var $n=Object.defineProperty;var Hn=(e,s,n)=>s in e?$n(e,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[s]=n;var Ut=(e,s,n)=>(Hn(e,typeof s!="symbol"?s+"":s,n),n);import{r as K,b as $r,a as ar,g as Hr,c as Ce}from"./vendor-fb33f09a.js";import{u as Je,L as Be,N as zr,a as lr,B as zn,R as xr,b as Pe}from"./router-d9a3df33.js";import{A as Vr,R as it,H as xt,B as Kr,a as rt,S as Le,b as St,m as fe,c as Kt,X as We,U as Ke,d as Vn,P as Ot,e as Wr,L as Gr,M as Kn,T as Wn,f as Gn,C as Jr,g as Yr,h as je,i as cr,j as Jn,k as ze,l as _e,n as Zr,o as Yn,p as Xr,q as Zn,D as ur,F as Ue,r as Xn,s as Qr,t as Qn,u as es,v as ts,E as bt,w as rs,x as ns,y as ss,I as is,z as ht,G as os,J as Wt,K as as,N as Gt,O as ls,Z as cs,Q as us}from"./ui-804f5366.js";import{i as ds}from"./charts-a79c46b1.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const c of i)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function n(i){const c={};return i.integrity&&(c.integrity=i.integrity),i.referrerPolicy&&(c.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?c.credentials="include":i.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(i){if(i.ep)return;i.ep=!0;const c=n(i);fetch(i.href,c)}})();var en={exports:{}},kt={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fs=K,hs=Symbol.for("react.element"),ps=Symbol.for("react.fragment"),ms=Object.prototype.hasOwnProperty,gs=fs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ys={key:!0,ref:!0,__self:!0,__source:!0};function tn(e,s,n){var r,i={},c=null,f=null;n!==void 0&&(c=""+n),s.key!==void 0&&(c=""+s.key),s.ref!==void 0&&(f=s.ref);for(r in s)ms.call(s,r)&&!ys.hasOwnProperty(r)&&(i[r]=s[r]);if(e&&e.defaultProps)for(r in s=e.defaultProps,s)i[r]===void 0&&(i[r]=s[r]);return{$$typeof:hs,type:e,key:c,ref:f,props:i,_owner:gs.current}}kt.Fragment=ps;kt.jsx=tn;kt.jsxs=tn;en.exports=kt;var t=en.exports,Jt={},br=$r;Jt.createRoot=br.createRoot,Jt.hydrateRoot=br.hydrateRoot;let vs={data:""},xs=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||vs,bs=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,ws=/\/\*[^]*?\*\/|  +/g,wr=/\n+/g,Me=(e,s)=>{let n="",r="",i="";for(let c in e){let f=e[c];c[0]=="@"?c[1]=="i"?n=c+" "+f+";":r+=c[1]=="f"?Me(f,c):c+"{"+Me(f,c[1]=="k"?"":s)+"}":typeof f=="object"?r+=Me(f,s?s.replace(/([^,])+/g,b=>c.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,w=>/&/.test(w)?w.replace(/&/g,b):b?b+" "+w:w)):c):f!=null&&(c=/^--/.test(c)?c:c.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=Me.p?Me.p(c,f):c+":"+f+";")}return n+(s&&i?s+"{"+i+"}":i)+r},Re={},rn=e=>{if(typeof e=="object"){let s="";for(let n in e)s+=n+rn(e[n]);return s}return e},Ns=(e,s,n,r,i)=>{let c=rn(e),f=Re[c]||(Re[c]=(w=>{let x=0,m=11;for(;x<w.length;)m=101*m+w.charCodeAt(x++)>>>0;return"go"+m})(c));if(!Re[f]){let w=c!==e?e:(x=>{let m,d,a=[{}];for(;m=bs.exec(x.replace(ws,""));)m[4]?a.shift():m[3]?(d=m[3].replace(wr," ").trim(),a.unshift(a[0][d]=a[0][d]||{})):a[0][m[1]]=m[2].replace(wr," ").trim();return a[0]})(e);Re[f]=Me(i?{["@keyframes "+f]:w}:w,n?"":"."+f)}let b=n&&Re.g?Re.g:null;return n&&(Re.g=Re[f]),((w,x,m,d)=>{d?x.data=x.data.replace(d,w):x.data.indexOf(w)===-1&&(x.data=m?w+x.data:x.data+w)})(Re[f],s,r,b),f},js=(e,s,n)=>e.reduce((r,i,c)=>{let f=s[c];if(f&&f.call){let b=f(n),w=b&&b.props&&b.props.className||/^go/.test(b)&&b;f=w?"."+w:b&&typeof b=="object"?b.props?"":Me(b,""):b===!1?"":b}return r+i+(f??"")},"");function At(e){let s=this||{},n=e.call?e(s.p):e;return Ns(n.unshift?n.raw?js(n,[].slice.call(arguments,1),s.p):n.reduce((r,i)=>Object.assign(r,i&&i.call?i(s.p):i),{}):n,xs(s.target),s.g,s.o,s.k)}let nn,Yt,Zt;At.bind({g:1});let Ie=At.bind({k:1});function Es(e,s,n,r){Me.p=s,nn=e,Yt=n,Zt=r}function qe(e,s){let n=this||{};return function(){let r=arguments;function i(c,f){let b=Object.assign({},c),w=b.className||i.className;n.p=Object.assign({theme:Yt&&Yt()},b),n.o=/ *go\d+/.test(w),b.className=At.apply(n,r)+(w?" "+w:""),s&&(b.ref=f);let x=e;return e[0]&&(x=b.as||e,delete b.as),Zt&&x[0]&&Zt(b),nn(x,b)}return s?s(i):i}}var _s=e=>typeof e=="function",wt=(e,s)=>_s(e)?e(s):e,Ss=(()=>{let e=0;return()=>(++e).toString()})(),sn=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let s=matchMedia("(prefers-reduced-motion: reduce)");e=!s||s.matches}return e}})(),Os=20,on=(e,s)=>{switch(s.type){case 0:return{...e,toasts:[s.toast,...e.toasts].slice(0,Os)};case 1:return{...e,toasts:e.toasts.map(c=>c.id===s.toast.id?{...c,...s.toast}:c)};case 2:let{toast:n}=s;return on(e,{type:e.toasts.find(c=>c.id===n.id)?1:0,toast:n});case 3:let{toastId:r}=s;return{...e,toasts:e.toasts.map(c=>c.id===r||r===void 0?{...c,dismissed:!0,visible:!1}:c)};case 4:return s.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(c=>c.id!==s.toastId)};case 5:return{...e,pausedAt:s.time};case 6:let i=s.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(c=>({...c,pauseDuration:c.pauseDuration+i}))}}},pt=[],Fe={toasts:[],pausedAt:void 0},Ve=e=>{Fe=on(Fe,e),pt.forEach(s=>{s(Fe)})},ks={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},As=(e={})=>{let[s,n]=K.useState(Fe),r=K.useRef(Fe);K.useEffect(()=>(r.current!==Fe&&n(Fe),pt.push(n),()=>{let c=pt.indexOf(n);c>-1&&pt.splice(c,1)}),[]);let i=s.toasts.map(c=>{var f,b,w;return{...e,...e[c.type],...c,removeDelay:c.removeDelay||((f=e[c.type])==null?void 0:f.removeDelay)||(e==null?void 0:e.removeDelay),duration:c.duration||((b=e[c.type])==null?void 0:b.duration)||(e==null?void 0:e.duration)||ks[c.type],style:{...e.style,...(w=e[c.type])==null?void 0:w.style,...c.style}}});return{...s,toasts:i}},Ts=(e,s="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:s,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:(n==null?void 0:n.id)||Ss()}),ot=e=>(s,n)=>{let r=Ts(s,e,n);return Ve({type:2,toast:r}),r.id},be=(e,s)=>ot("blank")(e,s);be.error=ot("error");be.success=ot("success");be.loading=ot("loading");be.custom=ot("custom");be.dismiss=e=>{Ve({type:3,toastId:e})};be.remove=e=>Ve({type:4,toastId:e});be.promise=(e,s,n)=>{let r=be.loading(s.loading,{...n,...n==null?void 0:n.loading});return typeof e=="function"&&(e=e()),e.then(i=>{let c=s.success?wt(s.success,i):void 0;return c?be.success(c,{id:r,...n,...n==null?void 0:n.success}):be.dismiss(r),i}).catch(i=>{let c=s.error?wt(s.error,i):void 0;c?be.error(c,{id:r,...n,...n==null?void 0:n.error}):be.dismiss(r)}),e};var Ps=(e,s)=>{Ve({type:1,toast:{id:e,height:s}})},Rs=()=>{Ve({type:5,time:Date.now()})},et=new Map,Ls=1e3,Cs=(e,s=Ls)=>{if(et.has(e))return;let n=setTimeout(()=>{et.delete(e),Ve({type:4,toastId:e})},s);et.set(e,n)},Is=e=>{let{toasts:s,pausedAt:n}=As(e);K.useEffect(()=>{if(n)return;let c=Date.now(),f=s.map(b=>{if(b.duration===1/0)return;let w=(b.duration||0)+b.pauseDuration-(c-b.createdAt);if(w<0){b.visible&&be.dismiss(b.id);return}return setTimeout(()=>be.dismiss(b.id),w)});return()=>{f.forEach(b=>b&&clearTimeout(b))}},[s,n]);let r=K.useCallback(()=>{n&&Ve({type:6,time:Date.now()})},[n]),i=K.useCallback((c,f)=>{let{reverseOrder:b=!1,gutter:w=8,defaultPosition:x}=f||{},m=s.filter(o=>(o.position||x)===(c.position||x)&&o.height),d=m.findIndex(o=>o.id===c.id),a=m.filter((o,y)=>y<d&&o.visible).length;return m.filter(o=>o.visible).slice(...b?[a+1]:[0,a]).reduce((o,y)=>o+(y.height||0)+w,0)},[s]);return K.useEffect(()=>{s.forEach(c=>{if(c.dismissed)Cs(c.id,c.removeDelay);else{let f=et.get(c.id);f&&(clearTimeout(f),et.delete(c.id))}})},[s]),{toasts:s,handlers:{updateHeight:Ps,startPause:Rs,endPause:r,calculateOffset:i}}},Ds=Ie`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Ms=Ie`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,qs=Ie`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Us=qe("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Ds} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Ms} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${qs} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Bs=Ie`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Fs=qe("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${Bs} 1s linear infinite;
`,$s=Ie`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Hs=Ie`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,zs=qe("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${$s} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Hs} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Vs=qe("div")`
  position: absolute;
`,Ks=qe("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Ws=Ie`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Gs=qe("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Ws} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Js=({toast:e})=>{let{icon:s,type:n,iconTheme:r}=e;return s!==void 0?typeof s=="string"?K.createElement(Gs,null,s):s:n==="blank"?null:K.createElement(Ks,null,K.createElement(Fs,{...r}),n!=="loading"&&K.createElement(Vs,null,n==="error"?K.createElement(Us,{...r}):K.createElement(zs,{...r})))},Ys=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Zs=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,Xs="0%{opacity:0;} 100%{opacity:1;}",Qs="0%{opacity:1;} 100%{opacity:0;}",ei=qe("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,ti=qe("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,ri=(e,s)=>{let n=e.includes("top")?1:-1,[r,i]=sn()?[Xs,Qs]:[Ys(n),Zs(n)];return{animation:s?`${Ie(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Ie(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},ni=K.memo(({toast:e,position:s,style:n,children:r})=>{let i=e.height?ri(e.position||s||"top-center",e.visible):{opacity:0},c=K.createElement(Js,{toast:e}),f=K.createElement(ti,{...e.ariaProps},wt(e.message,e));return K.createElement(ei,{className:e.className,style:{...i,...n,...e.style}},typeof r=="function"?r({icon:c,message:f}):K.createElement(K.Fragment,null,c,f))});Es(K.createElement);var si=({id:e,className:s,style:n,onHeightUpdate:r,children:i})=>{let c=K.useCallback(f=>{if(f){let b=()=>{let w=f.getBoundingClientRect().height;r(e,w)};b(),new MutationObserver(b).observe(f,{subtree:!0,childList:!0,characterData:!0})}},[e,r]);return K.createElement("div",{ref:c,className:s,style:n},i)},ii=(e,s)=>{let n=e.includes("top"),r=n?{top:0}:{bottom:0},i=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:sn()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${s*(n?1:-1)}px)`,...r,...i}},oi=At`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,ft=16,ai=({reverseOrder:e,position:s="top-center",toastOptions:n,gutter:r,children:i,containerStyle:c,containerClassName:f})=>{let{toasts:b,handlers:w}=Is(n);return K.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:ft,left:ft,right:ft,bottom:ft,pointerEvents:"none",...c},className:f,onMouseEnter:w.startPause,onMouseLeave:w.endPause},b.map(x=>{let m=x.position||s,d=w.calculateOffset(x,{reverseOrder:e,gutter:r,defaultPosition:s}),a=ii(m,d);return K.createElement(si,{id:x.id,key:x.id,onHeightUpdate:w.updateHeight,className:x.visible?oi:"",style:a},x.type==="custom"?wt(x.message,x):i?i(x):K.createElement(ni,{toast:x,position:m}))}))},ee=be;const an=K.createContext(null),li=({children:e})=>{const[s,n]=K.useState(null),[r,i]=K.useState(!0),[c,f]=K.useState(!1),[b,w]=K.useState({}),x={authentikUrl:"http://localhost:9000",appPath:"/application/o/speech-analysis",clientId:"hmYQcraW22qApmnJUbm36UOpwgUzVLTV5spl704r",clientSecret:"fhf8On3hqFhDGOAM9RsSqxRIFsalxD6O5TCIhBpmXMJoL0RcAErdYYnSyvnKW2Ozf2SALi62Ks7KSPyHCupSl5g78hynBIUBFSV0EiirglsGdf3Jaw0pk6rljzsmUaST",redirectUri:`${window.location.origin}/auth/callback`,authorizeUrl:"http://localhost:9000/application/o/authorize/",tokenUrl:"http://localhost:9000/application/o/token/",userinfoUrl:"http://localhost:9000/application/o/userinfo/"};K.useEffect(()=>{(()=>{try{const p=localStorage.getItem("auth_user"),u=localStorage.getItem("access_token");if(p&&u){const v=JSON.parse(p);n(v),f(!0),m(v),console.log("âœ… Restored existing session")}}catch(p){console.error("Failed to restore session:",p),localStorage.removeItem("auth_user"),localStorage.removeItem("access_token")}finally{i(!1)}})()},[]);const m=K.useCallback(h=>{const p=(h==null?void 0:h.groups)||[],u=d(p),v={role:u,isAdmin:["admin","superadmin"].includes(u),isSuperAdmin:u==="superadmin",groups:p,canUpload:!0,canAnalyze:!0,canManagePrompts:["admin","superadmin"].includes(u),canManageUsers:u==="superadmin"};w(v)},[]),d=K.useCallback(h=>{if(!Array.isArray(h))return"user";const p=h.map(u=>String(u).toLowerCase());return p.some(u=>["superadmin","super-admin"].includes(u))?"superadmin":p.some(u=>["admin","admins"].includes(u))?"admin":"user"},[]),a=K.useCallback(async()=>{try{console.log("ðŸ”„ Starting login process..."),i(!0);const h=window.location.pathname+window.location.search;localStorage.setItem("auth_return_url",h);const p=Math.random().toString(36).substring(7);localStorage.setItem("auth_state",p);const u=new URLSearchParams({client_id:x.clientId,response_type:"code",scope:"openid profile email groups",redirect_uri:x.redirectUri,state:p}),v=`${x.authorizeUrl}?${u.toString()}`;console.log("ðŸš€ Redirecting to Authentik:",v),window.location.href=v}catch(h){console.error("âŒ Login failed:",h),ee.error("Login failed. Please try again."),i(!1)}},[]),o=K.useCallback(async()=>{try{console.log("ðŸ”„ Processing login callback..."),i(!0);const h=new URLSearchParams(window.location.search),p=h.get("code"),u=h.get("state"),v=h.get("error");if(console.log("ðŸ“‹ Callback params:",{hasCode:!!p,state:u,hasError:!!v}),v)throw new Error(`OAuth Error: ${v}`);if(!p)throw new Error("No authorization code received");const l=localStorage.getItem("auth_state");if(u!==l)throw new Error("Invalid state parameter - possible CSRF attack");console.log("ðŸ”„ Exchanging code for tokens...");const N=new URLSearchParams({grant_type:"authorization_code",client_id:x.clientId,client_secret:x.clientSecret,code:p,redirect_uri:x.redirectUri}),T=await fetch(x.tokenUrl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},body:N});if(!T.ok)throw new Error(`Token exchange failed: ${T.status}`);const S=await T.json();console.log("âœ… Token exchange successful"),console.log("ðŸ”„ Getting user info...");const k=await fetch(x.userinfoUrl,{headers:{Authorization:`Bearer ${S.access_token}`,Accept:"application/json"}});if(!k.ok)throw new Error(`User info request failed: ${k.status}`);const A=await k.json();console.log("âœ… User info retrieved:",A);const _={id:A.sub,username:A.preferred_username||A.username,email:A.email,name:A.name,first_name:A.given_name,last_name:A.family_name,groups:A.groups||[],avatar_url:A.picture,is_verified:A.email_verified||!1};localStorage.setItem("auth_user",JSON.stringify(_)),localStorage.setItem("access_token",S.access_token),S.refresh_token&&localStorage.setItem("refresh_token",S.refresh_token),n(_),f(!0),m(_),localStorage.removeItem("auth_state"),ee.success(`Welcome back, ${_.name||_.username}!`);const E=localStorage.getItem("auth_return_url")||"/";return localStorage.removeItem("auth_return_url"),{user:_,returnUrl:E}}catch(h){throw console.error("âŒ Login callback failed:",h),localStorage.removeItem("auth_state"),localStorage.removeItem("auth_return_url"),localStorage.removeItem("auth_user"),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),n(null),f(!1),w({}),h}finally{i(!1)}},[m]),y=K.useCallback(async()=>{try{console.log("ðŸ”„ Logging out..."),localStorage.removeItem("auth_user"),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),n(null),f(!1),w({}),window.location.href="/"}catch(h){console.error("âŒ Logout failed:",h),window.location.href="/"}},[]),g={user:s,isLoading:r,isAuthenticated:c,permissions:b,authConfig:x,login:a,logout:y,handleLoginCallback:o,isAdmin:b.isAdmin||!1,isSuperAdmin:b.isSuperAdmin||!1,userRole:b.role,userGroups:b.groups||[],userName:(s==null?void 0:s.name)||(s==null?void 0:s.username),userEmail:s==null?void 0:s.email};return t.jsx(an.Provider,{value:g,children:e})},at=()=>{const e=K.useContext(an);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e};function ln(e,s){return function(){return e.apply(s,arguments)}}const{toString:ci}=Object.prototype,{getPrototypeOf:dr}=Object,{iterator:Tt,toStringTag:cn}=Symbol,Pt=(e=>s=>{const n=ci.call(s);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Oe=e=>(e=e.toLowerCase(),s=>Pt(s)===e),Rt=e=>s=>typeof s===e,{isArray:Ye}=Array,nt=Rt("undefined");function lt(e){return e!==null&&!nt(e)&&e.constructor!==null&&!nt(e.constructor)&&Ne(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const un=Oe("ArrayBuffer");function ui(e){let s;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?s=ArrayBuffer.isView(e):s=e&&e.buffer&&un(e.buffer),s}const di=Rt("string"),Ne=Rt("function"),dn=Rt("number"),ct=e=>e!==null&&typeof e=="object",fi=e=>e===!0||e===!1,mt=e=>{if(Pt(e)!=="object")return!1;const s=dr(e);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(cn in e)&&!(Tt in e)},hi=e=>{if(!ct(e)||lt(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},pi=Oe("Date"),mi=Oe("File"),gi=Oe("Blob"),yi=Oe("FileList"),vi=e=>ct(e)&&Ne(e.pipe),xi=e=>{let s;return e&&(typeof FormData=="function"&&e instanceof FormData||Ne(e.append)&&((s=Pt(e))==="formdata"||s==="object"&&Ne(e.toString)&&e.toString()==="[object FormData]"))},bi=Oe("URLSearchParams"),[wi,Ni,ji,Ei]=["ReadableStream","Request","Response","Headers"].map(Oe),_i=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ut(e,s,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,i;if(typeof e!="object"&&(e=[e]),Ye(e))for(r=0,i=e.length;r<i;r++)s.call(null,e[r],r,e);else{if(lt(e))return;const c=n?Object.getOwnPropertyNames(e):Object.keys(e),f=c.length;let b;for(r=0;r<f;r++)b=c[r],s.call(null,e[b],b,e)}}function fn(e,s){if(lt(e))return null;s=s.toLowerCase();const n=Object.keys(e);let r=n.length,i;for(;r-- >0;)if(i=n[r],s===i.toLowerCase())return i;return null}const $e=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),hn=e=>!nt(e)&&e!==$e;function Xt(){const{caseless:e}=hn(this)&&this||{},s={},n=(r,i)=>{const c=e&&fn(s,i)||i;mt(s[c])&&mt(r)?s[c]=Xt(s[c],r):mt(r)?s[c]=Xt({},r):Ye(r)?s[c]=r.slice():s[c]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&ut(arguments[r],n);return s}const Si=(e,s,n,{allOwnKeys:r}={})=>(ut(s,(i,c)=>{n&&Ne(i)?e[c]=ln(i,n):e[c]=i},{allOwnKeys:r}),e),Oi=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),ki=(e,s,n,r)=>{e.prototype=Object.create(s.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:s.prototype}),n&&Object.assign(e.prototype,n)},Ai=(e,s,n,r)=>{let i,c,f;const b={};if(s=s||{},e==null)return s;do{for(i=Object.getOwnPropertyNames(e),c=i.length;c-- >0;)f=i[c],(!r||r(f,e,s))&&!b[f]&&(s[f]=e[f],b[f]=!0);e=n!==!1&&dr(e)}while(e&&(!n||n(e,s))&&e!==Object.prototype);return s},Ti=(e,s,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=s.length;const r=e.indexOf(s,n);return r!==-1&&r===n},Pi=e=>{if(!e)return null;if(Ye(e))return e;let s=e.length;if(!dn(s))return null;const n=new Array(s);for(;s-- >0;)n[s]=e[s];return n},Ri=(e=>s=>e&&s instanceof e)(typeof Uint8Array<"u"&&dr(Uint8Array)),Li=(e,s)=>{const r=(e&&e[Tt]).call(e);let i;for(;(i=r.next())&&!i.done;){const c=i.value;s.call(e,c[0],c[1])}},Ci=(e,s)=>{let n;const r=[];for(;(n=e.exec(s))!==null;)r.push(n);return r},Ii=Oe("HTMLFormElement"),Di=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),Nr=(({hasOwnProperty:e})=>(s,n)=>e.call(s,n))(Object.prototype),Mi=Oe("RegExp"),pn=(e,s)=>{const n=Object.getOwnPropertyDescriptors(e),r={};ut(n,(i,c)=>{let f;(f=s(i,c,e))!==!1&&(r[c]=f||i)}),Object.defineProperties(e,r)},qi=e=>{pn(e,(s,n)=>{if(Ne(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(Ne(r)){if(s.enumerable=!1,"writable"in s){s.writable=!1;return}s.set||(s.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Ui=(e,s)=>{const n={},r=i=>{i.forEach(c=>{n[c]=!0})};return Ye(e)?r(e):r(String(e).split(s)),n},Bi=()=>{},Fi=(e,s)=>e!=null&&Number.isFinite(e=+e)?e:s;function $i(e){return!!(e&&Ne(e.append)&&e[cn]==="FormData"&&e[Tt])}const Hi=e=>{const s=new Array(10),n=(r,i)=>{if(ct(r)){if(s.indexOf(r)>=0)return;if(lt(r))return r;if(!("toJSON"in r)){s[i]=r;const c=Ye(r)?[]:{};return ut(r,(f,b)=>{const w=n(f,i+1);!nt(w)&&(c[b]=w)}),s[i]=void 0,c}}return r};return n(e,0)},zi=Oe("AsyncFunction"),Vi=e=>e&&(ct(e)||Ne(e))&&Ne(e.then)&&Ne(e.catch),mn=((e,s)=>e?setImmediate:s?((n,r)=>($e.addEventListener("message",({source:i,data:c})=>{i===$e&&c===n&&r.length&&r.shift()()},!1),i=>{r.push(i),$e.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Ne($e.postMessage)),Ki=typeof queueMicrotask<"u"?queueMicrotask.bind($e):typeof process<"u"&&process.nextTick||mn,Wi=e=>e!=null&&Ne(e[Tt]),G={isArray:Ye,isArrayBuffer:un,isBuffer:lt,isFormData:xi,isArrayBufferView:ui,isString:di,isNumber:dn,isBoolean:fi,isObject:ct,isPlainObject:mt,isEmptyObject:hi,isReadableStream:wi,isRequest:Ni,isResponse:ji,isHeaders:Ei,isUndefined:nt,isDate:pi,isFile:mi,isBlob:gi,isRegExp:Mi,isFunction:Ne,isStream:vi,isURLSearchParams:bi,isTypedArray:Ri,isFileList:yi,forEach:ut,merge:Xt,extend:Si,trim:_i,stripBOM:Oi,inherits:ki,toFlatObject:Ai,kindOf:Pt,kindOfTest:Oe,endsWith:Ti,toArray:Pi,forEachEntry:Li,matchAll:Ci,isHTMLForm:Ii,hasOwnProperty:Nr,hasOwnProp:Nr,reduceDescriptors:pn,freezeMethods:qi,toObjectSet:Ui,toCamelCase:Di,noop:Bi,toFiniteNumber:Fi,findKey:fn,global:$e,isContextDefined:hn,isSpecCompliantForm:$i,toJSONObject:Hi,isAsyncFn:zi,isThenable:Vi,setImmediate:mn,asap:Ki,isIterable:Wi};function le(e,s,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",s&&(this.code=s),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}G.inherits(le,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:G.toJSONObject(this.config),code:this.code,status:this.status}}});const gn=le.prototype,yn={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{yn[e]={value:e}});Object.defineProperties(le,yn);Object.defineProperty(gn,"isAxiosError",{value:!0});le.from=(e,s,n,r,i,c)=>{const f=Object.create(gn);return G.toFlatObject(e,f,function(w){return w!==Error.prototype},b=>b!=="isAxiosError"),le.call(f,e.message,s,n,r,i),f.cause=e,f.name=e.name,c&&Object.assign(f,c),f};const Gi=null;function Qt(e){return G.isPlainObject(e)||G.isArray(e)}function vn(e){return G.endsWith(e,"[]")?e.slice(0,-2):e}function jr(e,s,n){return e?e.concat(s).map(function(i,c){return i=vn(i),!n&&c?"["+i+"]":i}).join(n?".":""):s}function Ji(e){return G.isArray(e)&&!e.some(Qt)}const Yi=G.toFlatObject(G,{},null,function(s){return/^is[A-Z]/.test(s)});function Lt(e,s,n){if(!G.isObject(e))throw new TypeError("target must be an object");s=s||new FormData,n=G.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,h){return!G.isUndefined(h[g])});const r=n.metaTokens,i=n.visitor||m,c=n.dots,f=n.indexes,w=(n.Blob||typeof Blob<"u"&&Blob)&&G.isSpecCompliantForm(s);if(!G.isFunction(i))throw new TypeError("visitor must be a function");function x(y){if(y===null)return"";if(G.isDate(y))return y.toISOString();if(G.isBoolean(y))return y.toString();if(!w&&G.isBlob(y))throw new le("Blob is not supported. Use a Buffer instead.");return G.isArrayBuffer(y)||G.isTypedArray(y)?w&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function m(y,g,h){let p=y;if(y&&!h&&typeof y=="object"){if(G.endsWith(g,"{}"))g=r?g:g.slice(0,-2),y=JSON.stringify(y);else if(G.isArray(y)&&Ji(y)||(G.isFileList(y)||G.endsWith(g,"[]"))&&(p=G.toArray(y)))return g=vn(g),p.forEach(function(v,l){!(G.isUndefined(v)||v===null)&&s.append(f===!0?jr([g],l,c):f===null?g:g+"[]",x(v))}),!1}return Qt(y)?!0:(s.append(jr(h,g,c),x(y)),!1)}const d=[],a=Object.assign(Yi,{defaultVisitor:m,convertValue:x,isVisitable:Qt});function o(y,g){if(!G.isUndefined(y)){if(d.indexOf(y)!==-1)throw Error("Circular reference detected in "+g.join("."));d.push(y),G.forEach(y,function(p,u){(!(G.isUndefined(p)||p===null)&&i.call(s,p,G.isString(u)?u.trim():u,g,a))===!0&&o(p,g?g.concat(u):[u])}),d.pop()}}if(!G.isObject(e))throw new TypeError("data must be an object");return o(e),s}function Er(e){const s={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return s[r]})}function fr(e,s){this._pairs=[],e&&Lt(e,this,s)}const xn=fr.prototype;xn.append=function(s,n){this._pairs.push([s,n])};xn.toString=function(s){const n=s?function(r){return s.call(this,r,Er)}:Er;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function Zi(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function bn(e,s,n){if(!s)return e;const r=n&&n.encode||Zi;G.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let c;if(i?c=i(s,n):c=G.isURLSearchParams(s)?s.toString():new fr(s,n).toString(r),c){const f=e.indexOf("#");f!==-1&&(e=e.slice(0,f)),e+=(e.indexOf("?")===-1?"?":"&")+c}return e}class Xi{constructor(){this.handlers=[]}use(s,n,r){return this.handlers.push({fulfilled:s,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(s){this.handlers[s]&&(this.handlers[s]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(s){G.forEach(this.handlers,function(r){r!==null&&s(r)})}}const _r=Xi,wn={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Qi=typeof URLSearchParams<"u"?URLSearchParams:fr,eo=typeof FormData<"u"?FormData:null,to=typeof Blob<"u"?Blob:null,ro={isBrowser:!0,classes:{URLSearchParams:Qi,FormData:eo,Blob:to},protocols:["http","https","file","blob","url","data"]},hr=typeof window<"u"&&typeof document<"u",er=typeof navigator=="object"&&navigator||void 0,no=hr&&(!er||["ReactNative","NativeScript","NS"].indexOf(er.product)<0),so=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),io=hr&&window.location.href||"http://localhost",oo=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:hr,hasStandardBrowserEnv:no,hasStandardBrowserWebWorkerEnv:so,navigator:er,origin:io},Symbol.toStringTag,{value:"Module"})),xe={...oo,...ro};function ao(e,s){return Lt(e,new xe.classes.URLSearchParams,{visitor:function(n,r,i,c){return xe.isNode&&G.isBuffer(n)?(this.append(r,n.toString("base64")),!1):c.defaultVisitor.apply(this,arguments)},...s})}function lo(e){return G.matchAll(/\w+|\[(\w*)]/g,e).map(s=>s[0]==="[]"?"":s[1]||s[0])}function co(e){const s={},n=Object.keys(e);let r;const i=n.length;let c;for(r=0;r<i;r++)c=n[r],s[c]=e[c];return s}function Nn(e){function s(n,r,i,c){let f=n[c++];if(f==="__proto__")return!0;const b=Number.isFinite(+f),w=c>=n.length;return f=!f&&G.isArray(i)?i.length:f,w?(G.hasOwnProp(i,f)?i[f]=[i[f],r]:i[f]=r,!b):((!i[f]||!G.isObject(i[f]))&&(i[f]=[]),s(n,r,i[f],c)&&G.isArray(i[f])&&(i[f]=co(i[f])),!b)}if(G.isFormData(e)&&G.isFunction(e.entries)){const n={};return G.forEachEntry(e,(r,i)=>{s(lo(r),i,n,0)}),n}return null}function uo(e,s,n){if(G.isString(e))try{return(s||JSON.parse)(e),G.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const pr={transitional:wn,adapter:["xhr","http","fetch"],transformRequest:[function(s,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,c=G.isObject(s);if(c&&G.isHTMLForm(s)&&(s=new FormData(s)),G.isFormData(s))return i?JSON.stringify(Nn(s)):s;if(G.isArrayBuffer(s)||G.isBuffer(s)||G.isStream(s)||G.isFile(s)||G.isBlob(s)||G.isReadableStream(s))return s;if(G.isArrayBufferView(s))return s.buffer;if(G.isURLSearchParams(s))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),s.toString();let b;if(c){if(r.indexOf("application/x-www-form-urlencoded")>-1)return ao(s,this.formSerializer).toString();if((b=G.isFileList(s))||r.indexOf("multipart/form-data")>-1){const w=this.env&&this.env.FormData;return Lt(b?{"files[]":s}:s,w&&new w,this.formSerializer)}}return c||i?(n.setContentType("application/json",!1),uo(s)):s}],transformResponse:[function(s){const n=this.transitional||pr.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(G.isResponse(s)||G.isReadableStream(s))return s;if(s&&G.isString(s)&&(r&&!this.responseType||i)){const f=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(s)}catch(b){if(f)throw b.name==="SyntaxError"?le.from(b,le.ERR_BAD_RESPONSE,this,null,this.response):b}}return s}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:xe.classes.FormData,Blob:xe.classes.Blob},validateStatus:function(s){return s>=200&&s<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};G.forEach(["delete","get","head","post","put","patch"],e=>{pr.headers[e]={}});const mr=pr,fo=G.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ho=e=>{const s={};let n,r,i;return e&&e.split(`
`).forEach(function(f){i=f.indexOf(":"),n=f.substring(0,i).trim().toLowerCase(),r=f.substring(i+1).trim(),!(!n||s[n]&&fo[n])&&(n==="set-cookie"?s[n]?s[n].push(r):s[n]=[r]:s[n]=s[n]?s[n]+", "+r:r)}),s},Sr=Symbol("internals");function Xe(e){return e&&String(e).trim().toLowerCase()}function gt(e){return e===!1||e==null?e:G.isArray(e)?e.map(gt):String(e)}function po(e){const s=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)s[r[1]]=r[2];return s}const mo=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Bt(e,s,n,r,i){if(G.isFunction(r))return r.call(this,s,n);if(i&&(s=n),!!G.isString(s)){if(G.isString(r))return s.indexOf(r)!==-1;if(G.isRegExp(r))return r.test(s)}}function go(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(s,n,r)=>n.toUpperCase()+r)}function yo(e,s){const n=G.toCamelCase(" "+s);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(i,c,f){return this[r].call(this,s,i,c,f)},configurable:!0})})}class Ct{constructor(s){s&&this.set(s)}set(s,n,r){const i=this;function c(b,w,x){const m=Xe(w);if(!m)throw new Error("header name must be a non-empty string");const d=G.findKey(i,m);(!d||i[d]===void 0||x===!0||x===void 0&&i[d]!==!1)&&(i[d||w]=gt(b))}const f=(b,w)=>G.forEach(b,(x,m)=>c(x,m,w));if(G.isPlainObject(s)||s instanceof this.constructor)f(s,n);else if(G.isString(s)&&(s=s.trim())&&!mo(s))f(ho(s),n);else if(G.isObject(s)&&G.isIterable(s)){let b={},w,x;for(const m of s){if(!G.isArray(m))throw TypeError("Object iterator must return a key-value pair");b[x=m[0]]=(w=b[x])?G.isArray(w)?[...w,m[1]]:[w,m[1]]:m[1]}f(b,n)}else s!=null&&c(n,s,r);return this}get(s,n){if(s=Xe(s),s){const r=G.findKey(this,s);if(r){const i=this[r];if(!n)return i;if(n===!0)return po(i);if(G.isFunction(n))return n.call(this,i,r);if(G.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(s,n){if(s=Xe(s),s){const r=G.findKey(this,s);return!!(r&&this[r]!==void 0&&(!n||Bt(this,this[r],r,n)))}return!1}delete(s,n){const r=this;let i=!1;function c(f){if(f=Xe(f),f){const b=G.findKey(r,f);b&&(!n||Bt(r,r[b],b,n))&&(delete r[b],i=!0)}}return G.isArray(s)?s.forEach(c):c(s),i}clear(s){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const c=n[r];(!s||Bt(this,this[c],c,s,!0))&&(delete this[c],i=!0)}return i}normalize(s){const n=this,r={};return G.forEach(this,(i,c)=>{const f=G.findKey(r,c);if(f){n[f]=gt(i),delete n[c];return}const b=s?go(c):String(c).trim();b!==c&&delete n[c],n[b]=gt(i),r[b]=!0}),this}concat(...s){return this.constructor.concat(this,...s)}toJSON(s){const n=Object.create(null);return G.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=s&&G.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([s,n])=>s+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(s){return s instanceof this?s:new this(s)}static concat(s,...n){const r=new this(s);return n.forEach(i=>r.set(i)),r}static accessor(s){const r=(this[Sr]=this[Sr]={accessors:{}}).accessors,i=this.prototype;function c(f){const b=Xe(f);r[b]||(yo(i,f),r[b]=!0)}return G.isArray(s)?s.forEach(c):c(s),this}}Ct.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);G.reduceDescriptors(Ct.prototype,({value:e},s)=>{let n=s[0].toUpperCase()+s.slice(1);return{get:()=>e,set(r){this[n]=r}}});G.freezeMethods(Ct);const Se=Ct;function Ft(e,s){const n=this||mr,r=s||n,i=Se.from(r.headers);let c=r.data;return G.forEach(e,function(b){c=b.call(n,c,i.normalize(),s?s.status:void 0)}),i.normalize(),c}function jn(e){return!!(e&&e.__CANCEL__)}function Ze(e,s,n){le.call(this,e??"canceled",le.ERR_CANCELED,s,n),this.name="CanceledError"}G.inherits(Ze,le,{__CANCEL__:!0});function En(e,s,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):s(new le("Request failed with status code "+n.status,[le.ERR_BAD_REQUEST,le.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function vo(e){const s=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return s&&s[1]||""}function xo(e,s){e=e||10;const n=new Array(e),r=new Array(e);let i=0,c=0,f;return s=s!==void 0?s:1e3,function(w){const x=Date.now(),m=r[c];f||(f=x),n[i]=w,r[i]=x;let d=c,a=0;for(;d!==i;)a+=n[d++],d=d%e;if(i=(i+1)%e,i===c&&(c=(c+1)%e),x-f<s)return;const o=m&&x-m;return o?Math.round(a*1e3/o):void 0}}function bo(e,s){let n=0,r=1e3/s,i,c;const f=(x,m=Date.now())=>{n=m,i=null,c&&(clearTimeout(c),c=null),e(...x)};return[(...x)=>{const m=Date.now(),d=m-n;d>=r?f(x,m):(i=x,c||(c=setTimeout(()=>{c=null,f(i)},r-d)))},()=>i&&f(i)]}const Nt=(e,s,n=3)=>{let r=0;const i=xo(50,250);return bo(c=>{const f=c.loaded,b=c.lengthComputable?c.total:void 0,w=f-r,x=i(w),m=f<=b;r=f;const d={loaded:f,total:b,progress:b?f/b:void 0,bytes:w,rate:x||void 0,estimated:x&&b&&m?(b-f)/x:void 0,event:c,lengthComputable:b!=null,[s?"download":"upload"]:!0};e(d)},n)},Or=(e,s)=>{const n=e!=null;return[r=>s[0]({lengthComputable:n,total:e,loaded:r}),s[1]]},kr=e=>(...s)=>G.asap(()=>e(...s)),wo=xe.hasStandardBrowserEnv?((e,s)=>n=>(n=new URL(n,xe.origin),e.protocol===n.protocol&&e.host===n.host&&(s||e.port===n.port)))(new URL(xe.origin),xe.navigator&&/(msie|trident)/i.test(xe.navigator.userAgent)):()=>!0,No=xe.hasStandardBrowserEnv?{write(e,s,n,r,i,c){const f=[e+"="+encodeURIComponent(s)];G.isNumber(n)&&f.push("expires="+new Date(n).toGMTString()),G.isString(r)&&f.push("path="+r),G.isString(i)&&f.push("domain="+i),c===!0&&f.push("secure"),document.cookie=f.join("; ")},read(e){const s=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return s?decodeURIComponent(s[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function jo(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Eo(e,s){return s?e.replace(/\/?\/$/,"")+"/"+s.replace(/^\/+/,""):e}function _n(e,s,n){let r=!jo(s);return e&&(r||n==!1)?Eo(e,s):s}const Ar=e=>e instanceof Se?{...e}:e;function He(e,s){s=s||{};const n={};function r(x,m,d,a){return G.isPlainObject(x)&&G.isPlainObject(m)?G.merge.call({caseless:a},x,m):G.isPlainObject(m)?G.merge({},m):G.isArray(m)?m.slice():m}function i(x,m,d,a){if(G.isUndefined(m)){if(!G.isUndefined(x))return r(void 0,x,d,a)}else return r(x,m,d,a)}function c(x,m){if(!G.isUndefined(m))return r(void 0,m)}function f(x,m){if(G.isUndefined(m)){if(!G.isUndefined(x))return r(void 0,x)}else return r(void 0,m)}function b(x,m,d){if(d in s)return r(x,m);if(d in e)return r(void 0,x)}const w={url:c,method:c,data:c,baseURL:f,transformRequest:f,transformResponse:f,paramsSerializer:f,timeout:f,timeoutMessage:f,withCredentials:f,withXSRFToken:f,adapter:f,responseType:f,xsrfCookieName:f,xsrfHeaderName:f,onUploadProgress:f,onDownloadProgress:f,decompress:f,maxContentLength:f,maxBodyLength:f,beforeRedirect:f,transport:f,httpAgent:f,httpsAgent:f,cancelToken:f,socketPath:f,responseEncoding:f,validateStatus:b,headers:(x,m,d)=>i(Ar(x),Ar(m),d,!0)};return G.forEach(Object.keys({...e,...s}),function(m){const d=w[m]||i,a=d(e[m],s[m],m);G.isUndefined(a)&&d!==b||(n[m]=a)}),n}const Sn=e=>{const s=He({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:c,headers:f,auth:b}=s;s.headers=f=Se.from(f),s.url=bn(_n(s.baseURL,s.url,s.allowAbsoluteUrls),e.params,e.paramsSerializer),b&&f.set("Authorization","Basic "+btoa((b.username||"")+":"+(b.password?unescape(encodeURIComponent(b.password)):"")));let w;if(G.isFormData(n)){if(xe.hasStandardBrowserEnv||xe.hasStandardBrowserWebWorkerEnv)f.setContentType(void 0);else if((w=f.getContentType())!==!1){const[x,...m]=w?w.split(";").map(d=>d.trim()).filter(Boolean):[];f.setContentType([x||"multipart/form-data",...m].join("; "))}}if(xe.hasStandardBrowserEnv&&(r&&G.isFunction(r)&&(r=r(s)),r||r!==!1&&wo(s.url))){const x=i&&c&&No.read(c);x&&f.set(i,x)}return s},_o=typeof XMLHttpRequest<"u",So=_o&&function(e){return new Promise(function(n,r){const i=Sn(e);let c=i.data;const f=Se.from(i.headers).normalize();let{responseType:b,onUploadProgress:w,onDownloadProgress:x}=i,m,d,a,o,y;function g(){o&&o(),y&&y(),i.cancelToken&&i.cancelToken.unsubscribe(m),i.signal&&i.signal.removeEventListener("abort",m)}let h=new XMLHttpRequest;h.open(i.method.toUpperCase(),i.url,!0),h.timeout=i.timeout;function p(){if(!h)return;const v=Se.from("getAllResponseHeaders"in h&&h.getAllResponseHeaders()),N={data:!b||b==="text"||b==="json"?h.responseText:h.response,status:h.status,statusText:h.statusText,headers:v,config:e,request:h};En(function(S){n(S),g()},function(S){r(S),g()},N),h=null}"onloadend"in h?h.onloadend=p:h.onreadystatechange=function(){!h||h.readyState!==4||h.status===0&&!(h.responseURL&&h.responseURL.indexOf("file:")===0)||setTimeout(p)},h.onabort=function(){h&&(r(new le("Request aborted",le.ECONNABORTED,e,h)),h=null)},h.onerror=function(){r(new le("Network Error",le.ERR_NETWORK,e,h)),h=null},h.ontimeout=function(){let l=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const N=i.transitional||wn;i.timeoutErrorMessage&&(l=i.timeoutErrorMessage),r(new le(l,N.clarifyTimeoutError?le.ETIMEDOUT:le.ECONNABORTED,e,h)),h=null},c===void 0&&f.setContentType(null),"setRequestHeader"in h&&G.forEach(f.toJSON(),function(l,N){h.setRequestHeader(N,l)}),G.isUndefined(i.withCredentials)||(h.withCredentials=!!i.withCredentials),b&&b!=="json"&&(h.responseType=i.responseType),x&&([a,y]=Nt(x,!0),h.addEventListener("progress",a)),w&&h.upload&&([d,o]=Nt(w),h.upload.addEventListener("progress",d),h.upload.addEventListener("loadend",o)),(i.cancelToken||i.signal)&&(m=v=>{h&&(r(!v||v.type?new Ze(null,e,h):v),h.abort(),h=null)},i.cancelToken&&i.cancelToken.subscribe(m),i.signal&&(i.signal.aborted?m():i.signal.addEventListener("abort",m)));const u=vo(i.url);if(u&&xe.protocols.indexOf(u)===-1){r(new le("Unsupported protocol "+u+":",le.ERR_BAD_REQUEST,e));return}h.send(c||null)})},Oo=(e,s)=>{const{length:n}=e=e?e.filter(Boolean):[];if(s||n){let r=new AbortController,i;const c=function(x){if(!i){i=!0,b();const m=x instanceof Error?x:this.reason;r.abort(m instanceof le?m:new Ze(m instanceof Error?m.message:m))}};let f=s&&setTimeout(()=>{f=null,c(new le(`timeout ${s} of ms exceeded`,le.ETIMEDOUT))},s);const b=()=>{e&&(f&&clearTimeout(f),f=null,e.forEach(x=>{x.unsubscribe?x.unsubscribe(c):x.removeEventListener("abort",c)}),e=null)};e.forEach(x=>x.addEventListener("abort",c));const{signal:w}=r;return w.unsubscribe=()=>G.asap(b),w}},ko=Oo,Ao=function*(e,s){let n=e.byteLength;if(!s||n<s){yield e;return}let r=0,i;for(;r<n;)i=r+s,yield e.slice(r,i),r=i},To=async function*(e,s){for await(const n of Po(e))yield*Ao(n,s)},Po=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const s=e.getReader();try{for(;;){const{done:n,value:r}=await s.read();if(n)break;yield r}}finally{await s.cancel()}},Tr=(e,s,n,r)=>{const i=To(e,s);let c=0,f,b=w=>{f||(f=!0,r&&r(w))};return new ReadableStream({async pull(w){try{const{done:x,value:m}=await i.next();if(x){b(),w.close();return}let d=m.byteLength;if(n){let a=c+=d;n(a)}w.enqueue(new Uint8Array(m))}catch(x){throw b(x),x}},cancel(w){return b(w),i.return()}},{highWaterMark:2})},It=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",On=It&&typeof ReadableStream=="function",Ro=It&&(typeof TextEncoder=="function"?(e=>s=>e.encode(s))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),kn=(e,...s)=>{try{return!!e(...s)}catch{return!1}},Lo=On&&kn(()=>{let e=!1;const s=new Request(xe.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!s}),Pr=64*1024,tr=On&&kn(()=>G.isReadableStream(new Response("").body)),jt={stream:tr&&(e=>e.body)};It&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(s=>{!jt[s]&&(jt[s]=G.isFunction(e[s])?n=>n[s]():(n,r)=>{throw new le(`Response type '${s}' is not supported`,le.ERR_NOT_SUPPORT,r)})})})(new Response);const Co=async e=>{if(e==null)return 0;if(G.isBlob(e))return e.size;if(G.isSpecCompliantForm(e))return(await new Request(xe.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(G.isArrayBufferView(e)||G.isArrayBuffer(e))return e.byteLength;if(G.isURLSearchParams(e)&&(e=e+""),G.isString(e))return(await Ro(e)).byteLength},Io=async(e,s)=>{const n=G.toFiniteNumber(e.getContentLength());return n??Co(s)},Do=It&&(async e=>{let{url:s,method:n,data:r,signal:i,cancelToken:c,timeout:f,onDownloadProgress:b,onUploadProgress:w,responseType:x,headers:m,withCredentials:d="same-origin",fetchOptions:a}=Sn(e);x=x?(x+"").toLowerCase():"text";let o=ko([i,c&&c.toAbortSignal()],f),y;const g=o&&o.unsubscribe&&(()=>{o.unsubscribe()});let h;try{if(w&&Lo&&n!=="get"&&n!=="head"&&(h=await Io(m,r))!==0){let N=new Request(s,{method:"POST",body:r,duplex:"half"}),T;if(G.isFormData(r)&&(T=N.headers.get("content-type"))&&m.setContentType(T),N.body){const[S,k]=Or(h,Nt(kr(w)));r=Tr(N.body,Pr,S,k)}}G.isString(d)||(d=d?"include":"omit");const p="credentials"in Request.prototype;y=new Request(s,{...a,signal:o,method:n.toUpperCase(),headers:m.normalize().toJSON(),body:r,duplex:"half",credentials:p?d:void 0});let u=await fetch(y,a);const v=tr&&(x==="stream"||x==="response");if(tr&&(b||v&&g)){const N={};["status","statusText","headers"].forEach(A=>{N[A]=u[A]});const T=G.toFiniteNumber(u.headers.get("content-length")),[S,k]=b&&Or(T,Nt(kr(b),!0))||[];u=new Response(Tr(u.body,Pr,S,()=>{k&&k(),g&&g()}),N)}x=x||"text";let l=await jt[G.findKey(jt,x)||"text"](u,e);return!v&&g&&g(),await new Promise((N,T)=>{En(N,T,{data:l,headers:Se.from(u.headers),status:u.status,statusText:u.statusText,config:e,request:y})})}catch(p){throw g&&g(),p&&p.name==="TypeError"&&/Load failed|fetch/i.test(p.message)?Object.assign(new le("Network Error",le.ERR_NETWORK,e,y),{cause:p.cause||p}):le.from(p,p&&p.code,e,y)}}),rr={http:Gi,xhr:So,fetch:Do};G.forEach(rr,(e,s)=>{if(e){try{Object.defineProperty(e,"name",{value:s})}catch{}Object.defineProperty(e,"adapterName",{value:s})}});const Rr=e=>`- ${e}`,Mo=e=>G.isFunction(e)||e===null||e===!1,An={getAdapter:e=>{e=G.isArray(e)?e:[e];const{length:s}=e;let n,r;const i={};for(let c=0;c<s;c++){n=e[c];let f;if(r=n,!Mo(n)&&(r=rr[(f=String(n)).toLowerCase()],r===void 0))throw new le(`Unknown adapter '${f}'`);if(r)break;i[f||"#"+c]=r}if(!r){const c=Object.entries(i).map(([b,w])=>`adapter ${b} `+(w===!1?"is not supported by the environment":"is not available in the build"));let f=s?c.length>1?`since :
`+c.map(Rr).join(`
`):" "+Rr(c[0]):"as no adapter specified";throw new le("There is no suitable adapter to dispatch the request "+f,"ERR_NOT_SUPPORT")}return r},adapters:rr};function $t(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Ze(null,e)}function Lr(e){return $t(e),e.headers=Se.from(e.headers),e.data=Ft.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),An.getAdapter(e.adapter||mr.adapter)(e).then(function(r){return $t(e),r.data=Ft.call(e,e.transformResponse,r),r.headers=Se.from(r.headers),r},function(r){return jn(r)||($t(e),r&&r.response&&(r.response.data=Ft.call(e,e.transformResponse,r.response),r.response.headers=Se.from(r.response.headers))),Promise.reject(r)})}const Tn="1.11.0",Dt={};["object","boolean","number","function","string","symbol"].forEach((e,s)=>{Dt[e]=function(r){return typeof r===e||"a"+(s<1?"n ":" ")+e}});const Cr={};Dt.transitional=function(s,n,r){function i(c,f){return"[Axios v"+Tn+"] Transitional option '"+c+"'"+f+(r?". "+r:"")}return(c,f,b)=>{if(s===!1)throw new le(i(f," has been removed"+(n?" in "+n:"")),le.ERR_DEPRECATED);return n&&!Cr[f]&&(Cr[f]=!0,console.warn(i(f," has been deprecated since v"+n+" and will be removed in the near future"))),s?s(c,f,b):!0}};Dt.spelling=function(s){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${s}`),!0)};function qo(e,s,n){if(typeof e!="object")throw new le("options must be an object",le.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const c=r[i],f=s[c];if(f){const b=e[c],w=b===void 0||f(b,c,e);if(w!==!0)throw new le("option "+c+" must be "+w,le.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new le("Unknown option "+c,le.ERR_BAD_OPTION)}}const yt={assertOptions:qo,validators:Dt},ke=yt.validators;class Et{constructor(s){this.defaults=s||{},this.interceptors={request:new _r,response:new _r}}async request(s,n){try{return await this._request(s,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const c=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?c&&!String(r.stack).endsWith(c.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+c):r.stack=c}catch{}}throw r}}_request(s,n){typeof s=="string"?(n=n||{},n.url=s):n=s||{},n=He(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:c}=n;r!==void 0&&yt.assertOptions(r,{silentJSONParsing:ke.transitional(ke.boolean),forcedJSONParsing:ke.transitional(ke.boolean),clarifyTimeoutError:ke.transitional(ke.boolean)},!1),i!=null&&(G.isFunction(i)?n.paramsSerializer={serialize:i}:yt.assertOptions(i,{encode:ke.function,serialize:ke.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),yt.assertOptions(n,{baseUrl:ke.spelling("baseURL"),withXsrfToken:ke.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let f=c&&G.merge(c.common,c[n.method]);c&&G.forEach(["delete","get","head","post","put","patch","common"],y=>{delete c[y]}),n.headers=Se.concat(f,c);const b=[];let w=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(n)===!1||(w=w&&g.synchronous,b.unshift(g.fulfilled,g.rejected))});const x=[];this.interceptors.response.forEach(function(g){x.push(g.fulfilled,g.rejected)});let m,d=0,a;if(!w){const y=[Lr.bind(this),void 0];for(y.unshift(...b),y.push(...x),a=y.length,m=Promise.resolve(n);d<a;)m=m.then(y[d++],y[d++]);return m}a=b.length;let o=n;for(d=0;d<a;){const y=b[d++],g=b[d++];try{o=y(o)}catch(h){g.call(this,h);break}}try{m=Lr.call(this,o)}catch(y){return Promise.reject(y)}for(d=0,a=x.length;d<a;)m=m.then(x[d++],x[d++]);return m}getUri(s){s=He(this.defaults,s);const n=_n(s.baseURL,s.url,s.allowAbsoluteUrls);return bn(n,s.params,s.paramsSerializer)}}G.forEach(["delete","get","head","options"],function(s){Et.prototype[s]=function(n,r){return this.request(He(r||{},{method:s,url:n,data:(r||{}).data}))}});G.forEach(["post","put","patch"],function(s){function n(r){return function(c,f,b){return this.request(He(b||{},{method:s,headers:r?{"Content-Type":"multipart/form-data"}:{},url:c,data:f}))}}Et.prototype[s]=n(),Et.prototype[s+"Form"]=n(!0)});const vt=Et;class gr{constructor(s){if(typeof s!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(c){n=c});const r=this;this.promise.then(i=>{if(!r._listeners)return;let c=r._listeners.length;for(;c-- >0;)r._listeners[c](i);r._listeners=null}),this.promise.then=i=>{let c;const f=new Promise(b=>{r.subscribe(b),c=b}).then(i);return f.cancel=function(){r.unsubscribe(c)},f},s(function(c,f,b){r.reason||(r.reason=new Ze(c,f,b),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(s){if(this.reason){s(this.reason);return}this._listeners?this._listeners.push(s):this._listeners=[s]}unsubscribe(s){if(!this._listeners)return;const n=this._listeners.indexOf(s);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const s=new AbortController,n=r=>{s.abort(r)};return this.subscribe(n),s.signal.unsubscribe=()=>this.unsubscribe(n),s.signal}static source(){let s;return{token:new gr(function(i){s=i}),cancel:s}}}const Uo=gr;function Bo(e){return function(n){return e.apply(null,n)}}function Fo(e){return G.isObject(e)&&e.isAxiosError===!0}const nr={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(nr).forEach(([e,s])=>{nr[s]=e});const $o=nr;function Pn(e){const s=new vt(e),n=ln(vt.prototype.request,s);return G.extend(n,vt.prototype,s,{allOwnKeys:!0}),G.extend(n,s,null,{allOwnKeys:!0}),n.create=function(i){return Pn(He(e,i))},n}const ye=Pn(mr);ye.Axios=vt;ye.CanceledError=Ze;ye.CancelToken=Uo;ye.isCancel=jn;ye.VERSION=Tn;ye.toFormData=Lt;ye.AxiosError=le;ye.Cancel=ye.CanceledError;ye.all=function(s){return Promise.all(s)};ye.spread=Bo;ye.isAxiosError=Fo;ye.mergeConfig=He;ye.AxiosHeaders=Se;ye.formToJSON=e=>Nn(G.isHTMLForm(e)?new FormData(e):e);ye.getAdapter=An.getAdapter;ye.HttpStatusCode=$o;ye.default=ye;const yr=ye,vr="http://localhost:8888",ie=yr.create({baseURL:vr,timeout:3e5,headers:{"Content-Type":"application/json"}}),Rn=()=>localStorage.getItem("access_token"),sr=()=>localStorage.getItem("refresh_token"),ir=(e,s)=>{localStorage.setItem("access_token",e),s&&localStorage.setItem("refresh_token",s)},tt=()=>{localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token")};ie.interceptors.request.use(e=>{var n;const s=Rn();return s&&(e.headers.Authorization=`Bearer ${s}`),console.log(`API Request: ${(n=e.method)==null?void 0:n.toUpperCase()} ${e.url}`),e},e=>(console.error("API Request Error:",e),Promise.reject(e)));ie.interceptors.response.use(e=>(console.log(`API Response: ${e.status} ${e.config.url}`),e),async e=>{var n,r,i,c,f,b,w,x,m,d,a,o,y;const s=e.config;if(console.error("API Response Error:",(n=e.response)==null?void 0:n.status,((r=e.response)==null?void 0:r.data)||e.message),((i=e.response)==null?void 0:i.status)===401&&!s._retry){s._retry=!0;const g=sr();if(g)try{const h=await yr.post(`${vr}/auth/refresh`,{refresh_token:g}),{access_token:p,refresh_token:u}=h.data;return ir(p,u),s.headers.Authorization=`Bearer ${p}`,ie(s)}catch(h){return console.error("Token refresh failed:",h),tt(),window.location.href="/login",Promise.reject(h)}else tt(),window.location.href="/login"}return e.code==="ECONNREFUSED"||e.code==="ERR_NETWORK"?(e.isNetworkError=!0,e.userMessage="Backend server is not reachable. Please check if the server is running."):((c=e.response)==null?void 0:c.status)===503?e.userMessage=((f=e.response.data)==null?void 0:f.detail)||"Service temporarily unavailable.":((b=e.response)==null?void 0:b.status)===500?e.userMessage=((w=e.response.data)==null?void 0:w.detail)||"Server error occurred. Please try again later.":((x=e.response)==null?void 0:x.status)===403?e.userMessage="You do not have permission to perform this action.":((m=e.response)==null?void 0:m.status)===429?e.userMessage="Too many requests. Please wait a moment before trying again.":((d=e.response)==null?void 0:d.status)===400?e.userMessage=((a=e.response.data)==null?void 0:a.detail)||"Bad request. Please check your input.":e.userMessage=((y=(o=e.response)==null?void 0:o.data)==null?void 0:y.detail)||e.message||"An unexpected error occurred.",Promise.reject(e)});const ae={uploadAudio:(e,s)=>{const n=yr.create({baseURL:vr,timeout:3e5,headers:{"Content-Type":"multipart/form-data"}});return n.interceptors.response.use(r=>(console.log(`Upload Response: ${r.status}`),r),r=>{var i,c,f,b,w,x,m,d,a;return console.error("Upload error:",r),r.code==="ECONNREFUSED"||r.code==="ERR_NETWORK"?r.userMessage="Backend server is not reachable. Please check if the server is running on port 8888.":((i=r.response)==null?void 0:i.status)===503?r.userMessage=((c=r.response.data)==null?void 0:c.detail)||"Service temporarily unavailable.":((f=r.response)==null?void 0:f.status)===500?r.userMessage=((b=r.response.data)==null?void 0:b.detail)||"Server error during upload. Please try again.":((w=r.response)==null?void 0:w.status)===413?r.userMessage="File too large. Please use a smaller file.":((x=r.response)==null?void 0:x.status)===400?r.userMessage=((m=r.response.data)==null?void 0:m.detail)||"Invalid file format or request.":r.userMessage=((a=(d=r.response)==null?void 0:d.data)==null?void 0:a.detail)||r.message||"Upload failed. Please try again.",Promise.reject(r)}),n.post("/api/upload-audio",e,{onUploadProgress:s})},getLLMPrompts:async()=>{try{return await ie.get("/api/llm-prompts")}catch(e){throw console.error("Failed to get LLM prompts:",e),e}},processWithLLM:async e=>{try{return await ie.post("/api/llm-process",e)}catch(s){throw console.error("LLM processing failed:",s),s}},getResults:async e=>{try{return await ie.get(`/api/results/${e}`)}catch(s){throw console.error("Failed to get results:",s),s}},prompts:{getAll:async(e={})=>{try{const s=new URLSearchParams;e.category&&e.category!=="all"&&s.append("category",e.category),e.active_only!==void 0&&s.append("active_only",e.active_only);const n=`/api/prompts${s.toString()?`?${s.toString()}`:""}`;return await ie.get(n)}catch(s){throw console.error("Failed to fetch prompts:",s),s}},getCategories:async()=>{try{return await ie.get("/api/prompts/categories")}catch(e){return console.error("Failed to fetch categories:",e),{data:{categories:[{value:"all",label:"All Categories",color:"gray"},{value:"general",label:"General",color:"blue"},{value:"meeting",label:"Meeting",color:"green"},{value:"content",label:"Content",color:"purple"},{value:"analysis",label:"Analysis",color:"yellow"},{value:"productivity",label:"Productivity",color:"orange"}]}}}},getByKey:async e=>{try{return await ie.get(`/api/prompts/${e}`)}catch(s){throw console.error(`Failed to fetch prompt ${e}:`,s),s}},create:async e=>{try{if(!e.key||!e.title||!e.prompt_template)throw new Error("Missing required fields: key, title, and prompt_template are required");if(!e.prompt_template.includes("{transcript}"))throw new Error("Prompt template must contain {transcript} placeholder");return await ie.post("/api/prompts",e)}catch(s){throw console.error("Failed to create prompt:",s),s}},update:async(e,s)=>{try{if(!e)throw new Error("Prompt ID is required for update");const n=Object.fromEntries(Object.entries(s).filter(([r,i])=>i!==""&&i!==null&&i!==void 0));return await ie.put(`/api/prompts/${e}`,n)}catch(n){throw console.error(`Failed to update prompt ${e}:`,n),n}},delete:async e=>{try{if(!e)throw new Error("Prompt ID is required for deletion");return await ie.delete(`/api/prompts/${e}`)}catch(s){throw console.error(`Failed to delete prompt ${e}:`,s),s}},toggle:async e=>{try{if(!e)throw new Error("Prompt key is required for toggle");return await ie.post(`/api/prompts/${e}/toggle`)}catch(s){throw console.error(`Failed to toggle prompt ${e}:`,s),s}},incrementUsage:async e=>{try{if(!e)throw new Error("Prompt key is required");return await ie.post(`/api/prompts/${e}/increment-usage`)}catch(s){return console.error(`Failed to increment usage for ${e}:`,s),null}},getAnalytics:async()=>{try{return await ie.get("/api/prompts/analytics/usage")}catch(e){return console.error("Failed to fetch analytics:",e),{data:{overview:{total_prompts:0,active_prompts:0,total_usage:0,average_usage:0},categories:{},top_prompts:[]}}}}},auth:{getConfig:async()=>{try{return await ie.get("/auth/config")}catch(e){throw console.error("Failed to get auth config:",e),e}},login:async e=>{var s,n,r;try{if(console.log("ðŸ”„ Attempting backend login..."),!e.code)throw new Error("Authorization code is required");if(!e.redirect_uri)throw new Error("Redirect URI is required");const i=await ie.post("/auth/login",e);if(!i.data)throw new Error("Invalid response from authentication server");const{access_token:c,refresh_token:f}=i.data;if(!c)throw new Error("No access token received from server");return ir(c,f),ie.defaults.headers.common.Authorization=`Bearer ${c}`,console.log("âœ… Backend login successful"),i}catch(i){throw console.error("âŒ Backend login failed:",i),((s=i.response)==null?void 0:s.status)===400?new Error("Invalid authorization code or request parameters"):((n=i.response)==null?void 0:n.status)===401?new Error("Authentication failed. Please try logging in again."):((r=i.response)==null?void 0:r.status)>=500?new Error("Server error during authentication. Please try again later."):i.code==="ECONNREFUSED"||i.code==="ERR_NETWORK"?new Error("Cannot connect to authentication server"):i.message.includes("JSON")||i.message.includes("Unexpected token")?new Error("Invalid response format from authentication server. Please clear your browser cache and try again."):i}},refresh:async e=>{try{const s=await ie.post("/auth/refresh",{refresh_token:e||sr()}),{access_token:n,refresh_token:r}=s.data;return ir(n,r),s}catch(s){throw console.error("Token refresh failed:",s),tt(),s}},logout:async(e={})=>{try{const s=sr(),n=await ie.post("/auth/logout",{refresh_token:s,...e});return tt(),delete ie.defaults.headers.common.Authorization,n}catch(s){throw tt(),delete ie.defaults.headers.common.Authorization,console.error("Logout failed:",s),s}},getCurrentUser:async()=>{try{return await ie.get("/auth/me")}catch(e){throw console.error("Failed to get current user:",e),e}},updateProfile:async e=>{try{return await ie.put("/auth/me",e)}catch(s){throw console.error("Failed to update profile:",s),s}},getSessions:async()=>{try{return await ie.get("/auth/sessions")}catch(e){throw console.error("Failed to get sessions:",e),e}},revokeSession:async e=>{try{return await ie.delete(`/auth/sessions/${e}`)}catch(s){throw console.error("Failed to revoke session:",s),s}},admin:{getUsers:async(e={})=>{try{return await ie.get("/auth/admin/users",{params:e})}catch(s){throw console.error("Failed to get users:",s),s}},changeUserRole:async(e,s)=>{try{return await ie.put(`/auth/admin/users/${e}/role`,s)}catch(n){throw console.error("Failed to change user role:",n),n}},deactivateUser:async e=>{try{return await ie.delete(`/auth/admin/users/${e}`)}catch(s){throw console.error("Failed to deactivate user:",s),s}},getAuditLogs:async(e={})=>{try{return await ie.get("/auth/admin/audit",{params:e})}catch(s){throw console.error("Failed to get audit logs:",s),s}}}},transcripts:{getAll:async(e={})=>{try{return await ie.get("/transcripts",{params:e})}catch(s){throw console.error("Failed to get transcripts:",s),s}},getById:async e=>{try{return await ie.get(`/transcripts/${e}`)}catch(s){throw console.error("Failed to get transcript:",s),s}},create:async e=>{try{return await ie.post("/transcripts",e)}catch(s){throw console.error("Failed to create transcript:",s),s}},update:async(e,s)=>{try{return await ie.put(`/transcripts/${e}`,s)}catch(n){throw console.error("Failed to update transcript:",n),n}},delete:async e=>{try{return await ie.delete(`/transcripts/${e}`)}catch(s){throw console.error("Failed to delete transcript:",s),s}},processWithLLM:async(e,s)=>{try{return await ie.post(`/transcripts/${e}/process`,s)}catch(n){throw console.error("Failed to process transcript:",n),n}}},llm:{getModels:async()=>{try{return await ie.get("/llm/models")}catch(e){throw console.error("Failed to get LLM models:",e),e}},getTemplates:async()=>{try{return await ie.get("/llm/templates")}catch(e){throw console.error("Failed to get processing templates:",e),e}},processText:async e=>{try{return await ie.post("/llm/process",e)}catch(s){throw console.error("Failed to process text:",s),s}}},health:async()=>{try{return await ie.get("/health")}catch(e){throw console.error("Health check failed:",e),e}},healthCheck:async()=>{try{return await ie.get("/health")}catch(e){throw console.error("Health check failed:",e),e}},get:(e,s)=>ie.get(e,s),post:(e,s,n)=>ie.post(e,s,n),put:(e,s,n)=>ie.put(e,s,n),delete:(e,s)=>ie.delete(e,s)};ae.setAuthToken=e=>{e?ie.defaults.headers.common.Authorization=`Bearer ${e}`:delete ie.defaults.headers.common.Authorization};const Ir=Rn();Ir&&ae.setAuthToken(Ir);const Ln=K.createContext(),Ho=({children:e})=>{const[s,n]=K.useState(!1),[r,i]=K.useState(!0),[c,f]=K.useState(null),[b,w]=K.useState(null),[x,m]=K.useState(!1),[d,a]=K.useState(new Map),o=K.useRef(null),y=K.useRef(null),g=async()=>{var B;try{const I=(await ae.health()).data;return n(!0),f(I),w(new Date),m(((B=I.llm)==null?void 0:B.available)||!1),console.log("âœ… Backend connection established"),I}catch(q){throw console.error("âŒ Backend health check failed:",q),n(!1),f(null),m(!1),q}};K.useEffect(()=>{(async()=>{i(!0);try{await g(),ee.success("Connected to backend server")}catch(q){console.error("Failed to connect to backend:",q),q.isNetworkError?ee.error("Backend server not reachable. Please start the server on port 8888."):ee.error("Failed to connect to backend server")}finally{i(!1)}})()},[]),K.useEffect(()=>(s&&!y.current&&(y.current=setInterval(async()=>{try{await g()}catch{}},3e4)),()=>{y.current&&(clearInterval(y.current),y.current=null)}),[s]);const F={isConnected:s,isLoading:r,systemInfo:c,lastHealthCheck:b,isLLMAvailable:x,activeSessions:d,addSession:B=>{a(q=>{const I=new Map(q);return I.set(B.id,B),I}),ee.success("New processing session started")},updateSession:(B,q)=>{a(I=>{const R=new Map(I),O=R.get(B);return O?R.set(B,{...O,...q}):R.set(B,{id:B,...q}),R})},removeSession:B=>{a(q=>{const I=new Map(q);return I.delete(B),I})},getProcessingSessions:()=>Array.from(d.values()).filter(B=>B.status==="processing"),getSession:B=>d.get(B),hasSession:B=>d.has(B),registerNavigationCallback:B=>{o.current=B},navigateToResults:B=>{o.current&&o.current(`/results?session=${B}`)},uploadAudio:async(B,q)=>{try{return typeof ae.uploadAudio=="function"?(await ae.uploadAudio(B,q)).data:(await ae.post("/api/upload-audio",B,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:q})).data}catch(I){throw console.error("Upload failed:",I),ee.error(I.userMessage||"Upload failed"),I}},processWithLLM:async B=>{var q;try{return typeof((q=ae.llm)==null?void 0:q.processText)=="function"?(await ae.llm.processText(B)).data:typeof ae.processWithLLM=="function"?(await ae.processWithLLM(B)).data:(await ae.post("/api/process-llm",B)).data}catch(I){throw console.error("LLM processing failed:",I),ee.error(I.userMessage||"LLM processing failed"),I}},getProcessingStatus:async B=>{try{return(await ae.get(`/api/processing-status/${B}`)).data}catch(q){throw console.error("Status check failed:",q),q}},downloadFile:async(B,q)=>{try{return typeof ae.downloadFile=="function"?await ae.downloadFile(B,q):await ae.get(`/api/download/${B}/${q}`,{responseType:"blob"})}catch(I){throw console.error("Download failed:",I),ee.error(I.userMessage||"Download failed"),I}},getTranscripts:async(B={})=>{var q;try{return typeof((q=ae.transcripts)==null?void 0:q.getAll)=="function"?(await ae.transcripts.getAll(B)).data:(await ae.get("/api/transcripts",{params:B})).data}catch(I){throw console.error("Failed to get transcripts:",I),ee.error(I.userMessage||"Failed to get transcripts"),I}},getLLMModels:async()=>{var B;try{return typeof((B=ae.llm)==null?void 0:B.getModels)=="function"?(await ae.llm.getModels()).data:(await ae.get("/api/llm/models")).data}catch(q){throw console.error("Failed to get LLM models:",q),ee.error(q.userMessage||"Failed to get LLM models"),q}},getProcessingTemplates:async()=>{var B;try{return typeof((B=ae.llm)==null?void 0:B.getTemplates)=="function"?(await ae.llm.getTemplates()).data:(await ae.get("/api/llm/templates")).data}catch(q){throw console.error("Failed to get processing templates:",q),ee.error(q.userMessage||"Failed to get processing templates"),q}},refreshConnection:async()=>{i(!0);try{await g(),ee.success("Connection refreshed")}catch{ee.error("Failed to refresh connection")}finally{i(!1)}},performHealthCheck:g,api:ae};return t.jsx(Ln.Provider,{value:F,children:e})},dt=()=>{const e=K.useContext(Ln);if(!e)throw new Error("useBackend must be used within a BackendProvider");return e};class zo extends ar.Component{constructor(n){super(n);Ut(this,"handleRetry",()=>{this.setState({hasError:!1,error:null,errorInfo:null})});Ut(this,"handleGoHome",()=>{window.location.href="/"});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(n){return{hasError:!0}}componentDidCatch(n,r){console.error("Error caught by boundary:",n,r),this.setState({error:n,errorInfo:r})}render(){return this.state.hasError?t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:t.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-8 text-center",children:[t.jsx(Vr,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),t.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Something went wrong"}),t.jsx("p",{className:"text-gray-600 mb-6",children:"An unexpected error occurred. This might be due to a configuration issue or network problem."}),!1,t.jsxs("div",{className:"space-y-3",children:[t.jsxs("button",{onClick:this.handleRetry,className:"w-full flex items-center justify-center space-x-2 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:[t.jsx(it,{className:"w-4 h-4"}),t.jsx("span",{children:"Try Again"})]}),t.jsxs("button",{onClick:this.handleGoHome,className:"w-full flex items-center justify-center space-x-2 bg-gray-600 text-white py-2 px-4 rounded-lg hover:bg-gray-700 transition-colors",children:[t.jsx(xt,{className:"w-4 h-4"}),t.jsx("span",{children:"Go Home"})]})]}),t.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[t.jsx("p",{className:"text-sm text-gray-500",children:"If this problem persists, please check:"}),t.jsxs("ul",{className:"text-sm text-gray-500 mt-2 space-y-1",children:[t.jsx("li",{children:"â€¢ Backend server is running on port 8888"}),t.jsx("li",{children:"â€¢ Authentication service is available"}),t.jsx("li",{children:"â€¢ Network connection is stable"})]})]})]})}):this.props.children}}const or=[{id:"home",label:"Home",path:"/",icon:xt,description:"Audio Upload & Configuration"},{id:"results",label:"Results",path:"/results",icon:Kr,description:"Processing Status & Results"},{id:"analysis",label:"Analysis",path:"/analysis",icon:rt,description:"AI Analysis & Insights"},{id:"admin",label:"Admin",path:"/admin",icon:Le,description:"Prompt Management & Settings"},{id:"settings",label:"Settings",path:"/settings",icon:St,description:"Application Settings"}],Cn=({item:e,isMobile:s=!1})=>{const r=Je().pathname===e.path,i=e.icon;return s?t.jsxs(Be,{to:e.path,className:`flex items-center space-x-3 px-4 py-3 rounded-lg transition-all duration-200 ${r?"bg-cyan-900 text-white shadow-lg":"text-cyan-100 hover:bg-cyan-800 hover:text-white"}`,children:[t.jsx(i,{className:"w-5 h-5"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("span",{className:"font-medium",children:e.label}),t.jsx("div",{className:"text-xs text-cyan-200 opacity-80",children:e.description})]}),r&&t.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})]}):t.jsxs(Be,{to:e.path,className:`flex items-center justify-center p-4 rounded-lg transition-all duration-200 group relative ${r?"bg-cyan-900 text-white shadow-lg":"text-cyan-100 hover:bg-cyan-800 hover:text-white hover:scale-105"}`,title:e.label,children:[t.jsx(i,{className:"w-6 h-6"}),t.jsxs("div",{className:"absolute left-full ml-2 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg opacity-0 group-hover:opacity-100 transition-opacity z-50 whitespace-nowrap pointer-events-none",children:[t.jsx("div",{className:"font-medium",children:e.label}),t.jsx("div",{className:"text-xs text-gray-300 mt-1",children:e.description}),t.jsx("div",{className:"absolute left-0 top-1/2 transform -translate-y-1/2 -translate-x-full",children:t.jsx("div",{className:"w-0 h-0 border-t-4 border-b-4 border-r-4 border-transparent border-r-gray-900"})})]})]})};function Vo(){return t.jsxs("aside",{className:"bg-cyan-700 flex flex-col h-full py-6 shadow-lg",children:[t.jsx("div",{className:"flex items-center justify-center mb-8",children:t.jsx("div",{className:"w-8 h-8 bg-white rounded-lg flex items-center justify-center",children:t.jsx("span",{className:"text-cyan-700 font-bold text-lg",children:"AI"})})}),t.jsx("nav",{className:"flex-1 p-2",children:t.jsx("div",{className:"space-y-3",children:or.map(e=>t.jsx(Cn,{item:e},e.id))})}),t.jsx("div",{className:"p-2 mt-auto",children:t.jsx("div",{className:"flex items-center justify-center",children:t.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"})})})]})}function Ko({className:e=""}){const[s,n]=K.useState(!1),r=Je();K.useEffect(()=>{n(!1)},[r.pathname]),K.useEffect(()=>{const b=w=>{w.key==="Escape"&&n(!1)};return s?(document.addEventListener("keydown",b),document.body.style.overflow="hidden"):document.body.style.overflow="unset",()=>{document.removeEventListener("keydown",b),document.body.style.overflow="unset"}},[s]);const i=b=>{b.preventDefault(),b.stopPropagation(),n(!s)},c=b=>{b.preventDefault(),b.stopPropagation(),n(!1)},f=b=>{b.stopPropagation(),n(!1)};return t.jsxs(t.Fragment,{children:[t.jsxs("button",{onClick:i,className:`relative flex flex-col justify-center items-center w-10 h-10 space-y-1 hover:bg-gray-100 rounded-lg p-2 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 ${e}`,type:"button","aria-label":"Toggle navigation menu","aria-expanded":s,children:[t.jsx(fe.div,{className:"w-5 h-0.5 bg-gray-600 rounded-full",animate:{rotate:s?45:0,y:s?4:0},transition:{duration:.3,ease:"easeInOut"}}),t.jsx(fe.div,{className:"w-5 h-0.5 bg-gray-600 rounded-full",animate:{opacity:s?0:1,x:s?-10:0},transition:{duration:.3,ease:"easeInOut"}}),t.jsx(fe.div,{className:"w-5 h-0.5 bg-gray-600 rounded-full",animate:{rotate:s?-45:0,y:s?-4:0},transition:{duration:.3,ease:"easeInOut"}})]}),t.jsx(Kt,{children:s&&t.jsx(fe.div,{className:"fixed inset-0 z-40 bg-black bg-opacity-50",onClick:c,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3}})}),t.jsx(Kt,{children:s&&t.jsxs(fe.div,{className:"fixed top-0 left-0 h-full w-80 bg-cyan-700 z-50 shadow-2xl",initial:{x:-320},animate:{x:0},exit:{x:-320},transition:{type:"spring",damping:20,stiffness:300,duration:.3},children:[t.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-cyan-600 bg-cyan-800",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-10 h-10 bg-white rounded-lg flex items-center justify-center",children:t.jsx("span",{className:"text-cyan-700 font-bold text-xl",children:"AI"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-white text-lg font-semibold",children:"Navigation"}),t.jsx("p",{className:"text-cyan-200 text-sm",children:"Speech Analysis Platform"})]})]}),t.jsx("button",{onClick:b=>{b.preventDefault(),b.stopPropagation(),n(!1)},className:"text-white hover:bg-cyan-600 rounded-lg p-2 transition-colors focus:outline-none focus:ring-2 focus:ring-white",type:"button","aria-label":"Close navigation menu",children:t.jsx(We,{className:"w-6 h-6"})})]}),t.jsx("nav",{className:"p-6",children:t.jsx("div",{className:"space-y-2",children:or.map(b=>t.jsx(fe.div,{initial:{x:-50,opacity:0},animate:{x:0,opacity:1},transition:{delay:or.indexOf(b)*.05,duration:.3},children:t.jsx(Cn,{item:b,isMobile:!0,onClick:f})},b.id))})}),t.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-6 border-t border-cyan-600 bg-cyan-800",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-cyan-200 text-sm font-medium",children:"AI Speech Diarization"}),t.jsx("div",{className:"text-cyan-300 text-xs mt-1",children:"v1.0.0"}),t.jsxs("div",{className:"flex items-center justify-center mt-3",children:[t.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse mr-2"}),t.jsx("span",{className:"text-cyan-300 text-xs",children:"System Online"})]})]})})]})})]})}const Wo=({isOpen:e,onClose:s})=>{var B,q,I;const{user:n,userProfile:r,username:i,email:c,fullName:f,avatar:b,role:w,isAdmin:x,logout:m,refreshUser:d}=at(),[a,o]=K.useState("profile"),[y,g]=K.useState(!1),[h,p]=K.useState(!1),[u,v]=K.useState([]),[l,N]=K.useState(null),[T,S]=K.useState({full_name:f||"",first_name:(r==null?void 0:r.given_name)||"",last_name:(r==null?void 0:r.family_name)||""});K.useEffect(()=>{e&&(k(),A())},[e]);const k=async()=>{try{const R=await ae.auth.getCurrentUser();N(R.data),S({full_name:R.data.user.full_name||"",first_name:R.data.user.first_name||"",last_name:R.data.user.last_name||""})}catch(R){console.error("Failed to load user data:",R),ee.error("Failed to load user information")}},A=async()=>{try{const R=await ae.auth.getSessions();v(R.data.sessions||[])}catch(R){console.error("Failed to load sessions:",R)}},_=async()=>{try{p(!0),await ae.auth.updateProfile(T),ee.success("Profile updated successfully"),g(!1),await d(),await k()}catch(R){console.error("Profile update failed:",R),ee.error("Failed to update profile")}finally{p(!1)}},E=async R=>{try{await ae.auth.revokeSession(R),ee.success("Session revoked successfully"),await A()}catch(O){console.error("Failed to revoke session:",O),ee.error("Failed to revoke session")}},j=async()=>{try{await m(!0),s()}catch(R){console.error("Logout failed:",R)}},P=R=>{switch(R==null?void 0:R.toLowerCase()){case"mobile":return t.jsx(Gn,{className:"w-4 h-4"});case"tablet":return t.jsx(Wn,{className:"w-4 h-4"});default:return t.jsx(Kn,{className:"w-4 h-4"})}},C=R=>R?new Date(R).toLocaleString():"Never",L=R=>{if(!R)return"Never";const O=new Date,D=new Date(R),M=Math.floor((O-D)/1e3);return M<60?"Just now":M<3600?`${Math.floor(M/60)} minutes ago`:M<86400?`${Math.floor(M/3600)} hours ago`:`${Math.floor(M/86400)} days ago`},F=R=>{switch(R){case"superadmin":return"bg-purple-100 text-purple-800 border-purple-200";case"admin":return"bg-blue-100 text-blue-800 border-blue-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}};return e?t.jsx(Kt,{children:t.jsx(fe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:s,children:t.jsxs(fe.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-hidden",onClick:R=>R.stopPropagation(),children:[t.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-cyan-600 text-white p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:"w-16 h-16 bg-white bg-opacity-20 rounded-full flex items-center justify-center",children:b?t.jsx("img",{src:b,alt:f||i,className:"w-14 h-14 rounded-full object-cover"}):t.jsx(Ke,{className:"w-8 h-8"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold",children:f||i}),t.jsx("p",{className:"text-blue-100",children:c}),t.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[t.jsx(Le,{className:"w-4 h-4"}),t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium border ${F(w)}`,children:(w==null?void 0:w.charAt(0).toUpperCase())+(w==null?void 0:w.slice(1))})]})]})]}),t.jsx("button",{onClick:s,className:"text-white hover:bg-white hover:bg-opacity-20 p-2 rounded-lg transition-colors",children:t.jsx(We,{className:"w-6 h-6"})})]})}),t.jsx("div",{className:"border-b border-gray-200",children:t.jsx("nav",{className:"flex space-x-6 px-6",children:[{id:"profile",label:"Profile",icon:Ke},{id:"sessions",label:"Sessions",icon:Vn},{id:"security",label:"Security",icon:Le}].map(({id:R,label:O,icon:D})=>t.jsxs("button",{onClick:()=>o(R),className:`flex items-center space-x-2 py-4 border-b-2 transition-colors ${a===R?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[t.jsx(D,{className:"w-4 h-4"}),t.jsx("span",{className:"font-medium",children:O})]},R))})}),t.jsxs("div",{className:"p-6 max-h-96 overflow-y-auto",children:[a==="profile"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Profile Information"}),y?t.jsxs("div",{className:"flex space-x-2",children:[t.jsxs("button",{onClick:_,disabled:h,className:"flex items-center space-x-2 bg-blue-600 text-white px-3 py-1.5 rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[t.jsx(Wr,{className:"w-4 h-4"}),t.jsx("span",{children:"Save"})]}),t.jsxs("button",{onClick:()=>{g(!1),S({full_name:f||"",first_name:(r==null?void 0:r.given_name)||"",last_name:(r==null?void 0:r.family_name)||""})},className:"flex items-center space-x-2 text-gray-600 hover:text-gray-700",children:[t.jsx(We,{className:"w-4 h-4"}),t.jsx("span",{children:"Cancel"})]})]}):t.jsxs("button",{onClick:()=>g(!0),className:"flex items-center space-x-2 text-blue-600 hover:text-blue-700",children:[t.jsx(Ot,{className:"w-4 h-4"}),t.jsx("span",{children:"Edit"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),y?t.jsx("input",{type:"text",value:T.full_name,onChange:R=>S({...T,full_name:R.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}):t.jsx("p",{className:"text-gray-900",children:((B=l==null?void 0:l.user)==null?void 0:B.full_name)||"Not set"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),t.jsx("p",{className:"text-gray-900",children:c}),t.jsx("p",{className:"text-xs text-gray-500",children:"Managed by SSO provider"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),y?t.jsx("input",{type:"text",value:T.first_name,onChange:R=>S({...T,first_name:R.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}):t.jsx("p",{className:"text-gray-900",children:((q=l==null?void 0:l.user)==null?void 0:q.first_name)||"Not set"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),y?t.jsx("input",{type:"text",value:T.last_name,onChange:R=>S({...T,last_name:R.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}):t.jsx("p",{className:"text-gray-900",children:((I=l==null?void 0:l.user)==null?void 0:I.last_name)||"Not set"})]})]}),l&&t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[t.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Account Information"}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-gray-500",children:"Member Since"}),t.jsx("p",{className:"font-medium",children:C(l.user.created_at)})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-gray-500",children:"Last Login"}),t.jsx("p",{className:"font-medium",children:C(l.user.last_login)})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-gray-500",children:"Login Count"}),t.jsx("p",{className:"font-medium",children:l.user.login_count||0})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-gray-500",children:"Verified"}),t.jsx("p",{className:"font-medium",children:l.user.is_verified?"âœ… Yes":"âŒ No"})]})]})]})]}),a==="sessions"&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Active Sessions"}),t.jsx("button",{onClick:A,className:"text-blue-600 hover:text-blue-700 text-sm",children:"Refresh"})]}),u.length===0?t.jsx("p",{className:"text-gray-500 text-center py-8",children:"No active sessions found"}):t.jsx("div",{className:"space-y-3",children:u.map(R=>t.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[P(R.device_type),t.jsxs("div",{children:[t.jsxs("p",{className:"font-medium text-gray-900",children:[R.browser," on ",R.os]}),t.jsxs("p",{className:"text-sm text-gray-500",children:[R.ip_address," â€¢ ",L(R.last_activity)]})]})]}),t.jsx("button",{onClick:()=>E(R.session_id),className:"text-red-600 hover:text-red-700 text-sm font-medium",children:"Revoke"})]}),t.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Created: ",C(R.created_at)]})]},R.id))})]}),a==="security"&&t.jsxs("div",{className:"space-y-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Security Settings"}),t.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center space-x-2 text-blue-800 mb-2",children:[t.jsx(Le,{className:"w-5 h-5"}),t.jsx("h4",{className:"font-medium",children:"SSO Authentication"})]}),t.jsx("p",{className:"text-blue-700 text-sm",children:"Your account is secured with Single Sign-On (SSO) authentication. Password and security settings are managed by your organization."})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-gray-900",children:"Two-Factor Authentication"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Managed by SSO provider"})]}),t.jsx("span",{className:"text-green-600 text-sm font-medium",children:"Active"})]}),t.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-gray-900",children:"Session Timeout"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Automatic logout after inactivity"})]}),t.jsx("span",{className:"text-gray-600 text-sm font-medium",children:"8 hours"})]})]}),t.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[t.jsxs("button",{onClick:j,className:"w-full bg-red-600 text-white py-2 px-4 rounded-lg hover:bg-red-700 transition-colors flex items-center justify-center space-x-2",children:[t.jsx(Gr,{className:"w-5 h-5"}),t.jsx("span",{children:"Sign Out of All Devices"})]}),t.jsx("p",{className:"text-xs text-gray-500 text-center mt-2",children:"This will end all active sessions on all devices"})]})]})]})]})})}):null},Go=()=>{const e=Je(),{isAuthenticated:s,user:n,userProfile:r,username:i,email:c,avatar:f,role:b,isAdmin:w,logout:x}=at(),{isConnected:m,isLLMAvailable:d,systemInfo:a}=dt(),[o,y]=K.useState(!1),[g,h]=K.useState(!1),p=async()=>{try{await x(),h(!1),ee.success("Logged out successfully")}catch(l){console.error("Logout failed:",l),ee.error("Logout failed")}},u=()=>{switch(e.pathname){case"/":return"Audio Upload & Analysis";case"/results":return"Processing Results";case"/analysis":return"AI Analysis & Insights";case"/admin":return"Admin Panel";case"/settings":return"Application Settings";case"/login":return"Sign In";default:return"Speech Diarization Platform"}},v=({isConnected:l,label:N,color:T})=>t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:`w-2 h-2 rounded-full ${T} ${l?"animate-pulse":""}`}),t.jsx("span",{className:"text-xs text-gray-600 hidden sm:inline",children:N})]});return t.jsxs(t.Fragment,{children:[t.jsx("header",{className:"bg-white border-b border-gray-200 shadow-sm sticky top-0 z-30",children:t.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"flex justify-between items-center h-16",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:"lg:hidden",children:t.jsx(Ko,{})}),t.jsxs(Be,{to:"/",className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-600 to-cyan-600 rounded-lg flex items-center justify-center",children:t.jsx(Le,{className:"w-5 h-5 text-white"})}),t.jsxs("div",{className:"hidden sm:block",children:[t.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Speech Analysis"}),t.jsx("p",{className:"text-sm text-gray-500 hidden md:block",children:u()})]})]})]}),t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsxs("div",{className:"hidden md:flex items-center space-x-4",children:[t.jsx(v,{isConnected:m,label:"Backend",color:m?"bg-green-500":"bg-red-500"}),t.jsx(v,{isConnected:d,label:"LLM",color:d?"bg-green-500":"bg-yellow-500"})]}),t.jsxs("div",{className:"flex md:hidden items-center space-x-2",children:[t.jsx("div",{className:`w-3 h-3 rounded-full ${m?"bg-green-500":"bg-red-500"}`}),t.jsx("div",{className:`w-3 h-3 rounded-full ${d?"bg-green-500":"bg-yellow-500"}`})]}),s?t.jsxs("div",{className:"relative",children:[t.jsxs("button",{onClick:()=>h(!g),className:"flex items-center space-x-2 p-2 rounded-lg hover:bg-gray-50 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500",children:[t.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:f?t.jsx("img",{src:f,alt:"User Avatar",className:"w-8 h-8 rounded-full object-cover"}):t.jsx(Ke,{className:"w-4 h-4 text-blue-600"})}),t.jsxs("div",{className:"hidden sm:block text-left",children:[t.jsx("div",{className:"text-sm font-medium text-gray-900",children:i||c||"User"}),b&&t.jsx("div",{className:"text-xs text-gray-500 capitalize",children:b})]}),t.jsx(Jr,{className:"w-4 h-4 text-gray-400 hidden sm:block"})]}),g&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 z-10 md:hidden",onClick:()=>h(!1)}),t.jsxs(fe.div,{initial:{opacity:0,scale:.95,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-10},className:"absolute right-0 mt-2 w-56 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-20",children:[t.jsx("div",{className:"px-4 py-3 border-b border-gray-100",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:f?t.jsx("img",{src:f,alt:"User Avatar",className:"w-10 h-10 rounded-full object-cover"}):t.jsx(Ke,{className:"w-5 h-5 text-blue-600"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:i||"User"}),t.jsx("div",{className:"text-xs text-gray-500 truncate",children:c}),b&&t.jsx("div",{className:"text-xs text-blue-600 capitalize",children:b})]})]})}),t.jsxs("div",{className:"py-1",children:[t.jsxs("button",{onClick:()=>{y(!0),h(!1)},className:"flex items-center space-x-3 w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:[t.jsx(Ke,{className:"w-4 h-4"}),t.jsx("span",{children:"View Profile"})]}),t.jsxs(Be,{to:"/settings",onClick:()=>h(!1),className:"flex items-center space-x-3 w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:[t.jsx(St,{className:"w-4 h-4"}),t.jsx("span",{children:"Settings"})]}),w&&t.jsxs(Be,{to:"/admin",onClick:()=>h(!1),className:"flex items-center space-x-3 w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:[t.jsx(Le,{className:"w-4 h-4"}),t.jsx("span",{children:"Admin Panel"})]}),t.jsx("div",{className:"border-t border-gray-100 my-1"}),t.jsxs("button",{onClick:p,className:"flex items-center space-x-3 w-full px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors",children:[t.jsx(Gr,{className:"w-4 h-4"}),t.jsx("span",{children:"Sign Out"})]})]})]})]})]}):t.jsx(Be,{to:"/login",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 transition-colors",children:"Sign In"})]})]})})}),o&&t.jsx(Wo,{isOpen:o,onClose:()=>y(!1)})]})},Jo=({size:e="medium"})=>{const s={small:"w-6 h-6",medium:"w-8 h-8",large:"w-12 h-12"};return t.jsx("div",{className:"flex justify-center items-center",children:t.jsx("div",{className:`${s[e]} border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin`})})},Dr=({children:e,requireAdmin:s=!1,requiredPermission:n=null,fallbackPath:r="/login"})=>{var m,d;const{isAuthenticated:i,isLoading:c,isAdmin:f,hasPermission:b,user:w}=at(),x=Je();return c?t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:t.jsxs("div",{className:"text-center",children:[t.jsx(Jo,{size:"large"}),t.jsx("p",{className:"mt-4 text-lg text-gray-600",children:"Checking authentication..."})]})}):i?s&&!f?t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:t.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-8 text-center",children:[t.jsx(Le,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),t.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Access Denied"}),t.jsx("p",{className:"text-gray-600 mb-6",children:"Administrator privileges are required to access this page."}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[t.jsxs("p",{className:"text-sm text-gray-700",children:[t.jsx("strong",{children:"Current Role:"})," ",((m=w==null?void 0:w.profile)==null?void 0:m.role)||"User"]}),t.jsxs("p",{className:"text-sm text-gray-700",children:[t.jsx("strong",{children:"Required Role:"})," Administrator"]})]}),t.jsx("button",{onClick:()=>window.history.back(),className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:"Go Back"})]})}):n&&!b(n)?t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:t.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-8 text-center",children:[t.jsx(Yr,{className:"w-16 h-16 text-orange-500 mx-auto mb-4"}),t.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Insufficient Permissions"}),t.jsx("p",{className:"text-gray-600 mb-6",children:"You don't have the required permissions to access this resource."}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[t.jsxs("p",{className:"text-sm text-gray-700",children:[t.jsx("strong",{children:"Required Permission:"})," ",n]}),t.jsxs("p",{className:"text-sm text-gray-700",children:[t.jsx("strong",{children:"Your Role:"})," ",((d=w==null?void 0:w.profile)==null?void 0:d.role)||"User"]})]}),t.jsx("button",{onClick:()=>window.history.back(),className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:"Go Back"})]})}):e:t.jsx(zr,{to:"/login",state:{from:x.pathname+x.search},replace:!0})},Yo=()=>{var m,d;const{isAuthenticated:e,isLoading:s,login:n,authConfig:r}=at(),i=Je(),[c,f]=K.useState(!1),[b,w]=K.useState("checking");if(K.useEffect(()=>{s||(async()=>{try{w(r?"available":"unavailable")}catch(o){console.error("Auth status check failed:",o),w("unavailable")}})()},[r,s]),e){const a=((m=i.state)==null?void 0:m.from)||"/";return t.jsx(zr,{to:a,replace:!0})}const x=async()=>{if(b!=="available"){ee.error("Authentication system is not available");return}try{f(!0),await n()}catch(a){console.error("Login failed:",a),ee.error("Login failed. Please try again.")}finally{f(!1)}};return s||b==="checking"?t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-cyan-50",children:t.jsxs("div",{className:"text-center",children:[t.jsx(je,{className:"w-12 h-12 text-blue-600 animate-spin mx-auto mb-4"}),t.jsx("p",{className:"text-lg text-gray-600",children:"Initializing authentication..."})]})}):t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-cyan-50 px-4",children:t.jsxs("div",{className:"max-w-6xl w-full grid lg:grid-cols-2 gap-8",children:[t.jsxs(fe.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{duration:.6},className:"hidden lg:flex flex-col justify-center space-y-8",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Welcome to Speech Diarization Platform"}),t.jsx("p",{className:"text-xl text-gray-600 mb-8",children:"Advanced AI-powered speech analysis with secure authentication"})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsx(Ht,{icon:t.jsx(Le,{className:"w-6 h-6"}),title:"Secure Authentication",description:"Enterprise-grade security with Authentik SSO integration"}),t.jsx(Ht,{icon:t.jsx(cr,{className:"w-6 h-6"}),title:"Role-Based Access",description:"Granular permissions for users, admins, and super administrators"}),t.jsx(Ht,{icon:t.jsx(Yr,{className:"w-6 h-6"}),title:"Privacy Focused",description:"Local processing ensures your data never leaves your infrastructure"})]})]}),t.jsx(fe.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{duration:.6,delay:.2},className:"flex items-center justify-center",children:t.jsxs("div",{className:"w-full max-w-md bg-white rounded-xl shadow-xl p-8",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx(Jn,{className:"w-8 h-8 text-blue-600"})}),t.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Sign In"}),t.jsx("p",{className:"text-gray-600 mt-2",children:"Continue with your organization account"})]}),b==="available"?t.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(ze,{className:"w-5 h-5 text-green-500 mr-2"}),t.jsx("p",{className:"text-sm text-green-700",children:"Authentication system is ready"})]}),((d=r==null?void 0:r.oidc_config)==null?void 0:d.authority)&&t.jsxs("p",{className:"text-xs text-green-600 mt-1",children:["Provider: ",new URL(r.oidc_config.authority).hostname]})]}):t.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(_e,{className:"w-5 h-5 text-red-500 mr-2"}),t.jsx("p",{className:"text-sm text-red-700",children:"Authentication system unavailable"})]}),t.jsx("p",{className:"text-xs text-red-600 mt-1",children:"Please contact your administrator"})]}),t.jsx("button",{onClick:x,disabled:c||b!=="available",className:`w-full flex items-center justify-center space-x-2 py-3 px-4 rounded-lg font-medium transition-all duration-200 ${b==="available"&&!c?"bg-blue-600 text-white hover:bg-blue-700 hover:scale-105 active:scale-95":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:c?t.jsxs(t.Fragment,{children:[t.jsx(je,{className:"w-5 h-5 animate-spin"}),t.jsx("span",{children:"Redirecting..."})]}):t.jsxs(t.Fragment,{children:[t.jsx(Le,{className:"w-5 h-5"}),t.jsx("span",{children:"Sign in with SSO"}),t.jsx(Zr,{className:"w-5 h-5"})]})}),t.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200",children:t.jsx("p",{className:"text-center text-sm text-gray-500",children:"By signing in, you agree to our security policies and data protection measures."})}),t.jsx("div",{className:"mt-6 text-center",children:t.jsxs("details",{className:"group",children:[t.jsx("summary",{className:"text-sm text-blue-600 hover:text-blue-700 cursor-pointer",children:"Need help signing in?"}),t.jsxs("div",{className:"mt-3 text-sm text-gray-600 space-y-2",children:[t.jsx("p",{children:"â€¢ Contact your system administrator for account access"}),t.jsx("p",{children:"â€¢ Ensure you're connected to the organization network"}),t.jsx("p",{children:"â€¢ Clear your browser cache if experiencing issues"})]})]})})]})})]})})},Ht=({icon:e,title:s,description:n})=>t.jsxs(fe.div,{whileHover:{x:5},className:"flex items-start space-x-4 p-4 rounded-lg bg-white/50 backdrop-blur-sm",children:[t.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center text-blue-600 flex-shrink-0",children:e}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:s}),t.jsx("p",{className:"text-gray-600 text-sm",children:n})]})]}),Zo=()=>{const{handleLoginCallback:e,isAuthenticated:s}=at(),n=lr(),[r,i]=K.useState("processing"),[c,f]=K.useState("Processing authentication..."),[b,w]=K.useState(3),[x,m]=K.useState(null);K.useEffect(()=>{(async()=>{if(s){console.log("âœ… Already authenticated, redirecting home"),i("success"),f("Already authenticated! Redirecting..."),setTimeout(()=>n("/",{replace:!0}),1e3);return}try{console.log("ðŸ”„ AuthCallback: Starting callback processing"),i("processing"),f("Completing authentication...");const y=new URLSearchParams(window.location.search),g=y.get("code"),h=y.get("error"),p=y.get("error_description");if(console.log("ðŸ“‹ URL params:",{hasCode:!!g,error:h,errorDescription:p,fullUrl:window.location.href}),h)throw new Error(`OAuth Error: ${h} - ${p||"Unknown error"}`);if(!g)throw new Error("No authorization code found in callback URL. Please try logging in again.");console.log("ðŸ”„ Processing authentication callback...");const u=await e();if(u&&u.user){console.log("âœ… Authentication successful"),i("success"),f("Authentication successful! Redirecting...");const v=setInterval(()=>{w(l=>{if(l<=1){clearInterval(v);const N=u.returnUrl||"/";return console.log("ðŸ”„ Redirecting to:",N),n(N,{replace:!0}),0}return l-1})},1e3);return()=>clearInterval(v)}else if(s)console.log("âœ… User authenticated, redirecting to home"),i("success"),f("Authentication successful! Redirecting..."),setTimeout(()=>n("/",{replace:!0}),1e3);else throw new Error("Authentication completed but no user data was returned")}catch(y){console.error("âŒ Auth callback error:",y),i("error"),m(y.message),y.message.includes("Invalid state parameter")?f("Security validation failed. Please try logging in again."):y.message.includes("OAuth Error")?f("Authentication was cancelled or failed. Please try again."):y.message.includes("No authorization code")?f("Invalid authentication callback. Please try signing in again."):y.message.includes("Token exchange failed")?f("Failed to exchange authorization code. Please try again."):y.message.includes("User info request failed")?f("Failed to get user information. Please try again."):f("Authentication failed. Please try signing in again."),ee.error("Authentication failed")}})()},[e,n,s]);const d=()=>{n("/",{replace:!0})},a=()=>{window.location.href="/login"};return t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-cyan-50 px-4",children:t.jsxs(fe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5},className:"max-w-md w-full bg-white rounded-xl shadow-xl p-8 text-center",children:[t.jsxs("div",{className:"mb-6",children:[r==="processing"&&t.jsx(fe.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-16 h-16 mx-auto",children:t.jsx(je,{className:"w-16 h-16 text-blue-600"})}),r==="success"&&t.jsx(fe.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200},className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto",children:t.jsx(ze,{className:"w-10 h-10 text-green-600"})}),r==="error"&&t.jsx(fe.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200},className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto",children:t.jsx(_e,{className:"w-10 h-10 text-red-600"})})]}),t.jsxs("h1",{className:`text-2xl font-bold mb-4 ${r==="success"?"text-green-900":r==="error"?"text-red-900":"text-gray-900"}`,children:[r==="processing"&&"Signing You In",r==="success"&&"Welcome Back!",r==="error"&&"Authentication Failed"]}),t.jsx("p",{className:`text-lg mb-8 ${r==="success"?"text-green-600":r==="error"?"text-red-600":"text-gray-600"}`,children:c}),r==="success"&&t.jsx(fe.div,{initial:{opacity:0},animate:{opacity:1},className:"mb-6",children:t.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[t.jsxs("p",{className:"text-green-700 text-sm",children:["Redirecting in ",b," second",b!==1?"s":"","..."]}),t.jsx("div",{className:"w-full bg-green-200 rounded-full h-2 mt-2",children:t.jsx(fe.div,{initial:{width:"100%"},animate:{width:"0%"},transition:{duration:3,ease:"linear"},className:"bg-green-600 h-2 rounded-full"})})]})}),r==="error"&&x&&t.jsx(fe.div,{initial:{opacity:0},animate:{opacity:1},className:"mb-6",children:t.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:t.jsxs("details",{className:"text-left",children:[t.jsx("summary",{className:"text-red-700 font-medium cursor-pointer",children:"Error Details"}),t.jsx("p",{className:"text-red-600 text-sm mt-2 font-mono",children:x})]})})}),t.jsxs("div",{className:"space-y-3",children:[r==="success"&&t.jsxs("button",{onClick:d,className:"w-full flex items-center justify-center space-x-2 bg-green-600 text-white py-3 px-4 rounded-lg hover:bg-green-700 transition-colors",children:[t.jsx(xt,{className:"w-5 h-5"}),t.jsx("span",{children:"Go to Dashboard"}),t.jsx(Zr,{className:"w-5 h-5"})]}),r==="error"&&t.jsxs(t.Fragment,{children:[t.jsxs("button",{onClick:a,className:"w-full flex items-center justify-center space-x-2 bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:[t.jsx(it,{className:"w-5 h-5"}),t.jsx("span",{children:"Try Again"})]}),t.jsxs("button",{onClick:d,className:"w-full flex items-center justify-center space-x-2 bg-gray-600 text-white py-3 px-4 rounded-lg hover:bg-gray-700 transition-colors",children:[t.jsx(xt,{className:"w-5 h-5"}),t.jsx("span",{children:"Go Home"})]})]})]}),r==="error"&&t.jsx(fe.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:"mt-6 pt-6 border-t border-gray-200",children:t.jsxs("details",{className:"group text-left",children:[t.jsx("summary",{className:"text-sm text-blue-600 hover:text-blue-700 cursor-pointer text-center",children:"Troubleshooting Tips"}),t.jsxs("div",{className:"mt-3 text-sm text-gray-600 space-y-2",children:[t.jsx("p",{children:"â€¢ Clear your browser cache and cookies"}),t.jsx("p",{children:"â€¢ Make sure you're using the correct login URL"}),t.jsx("p",{children:"â€¢ Check that Authentik server is running"}),t.jsx("p",{children:"â€¢ Try using an incognito/private browser window"}),t.jsx("p",{children:"â€¢ Disable browser extensions that might interfere"}),t.jsx("p",{children:"â€¢ Contact your administrator if issues persist"})]})]})}),r==="processing"&&t.jsxs(fe.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1},className:"mt-6 text-sm text-gray-500",children:[t.jsx("p",{children:"Verifying your credentials with the authentication server..."}),t.jsx("p",{className:"mt-2 text-xs",children:"This may take a few moments."})]})]})})},Mr=e=>{let s;const n=new Set,r=(m,d)=>{const a=typeof m=="function"?m(s):m;if(!Object.is(a,s)){const o=s;s=d??(typeof a!="object"||a===null)?a:Object.assign({},s,a),n.forEach(y=>y(s,o))}},i=()=>s,w={setState:r,getState:i,getInitialState:()=>x,subscribe:m=>(n.add(m),()=>n.delete(m)),destroy:()=>{n.clear()}},x=s=e(r,i,w);return w},Xo=e=>e?Mr(e):Mr;var In={exports:{}},Dn={},Mn={exports:{}},qn={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ge=K;function Qo(e,s){return e===s&&(e!==0||1/e===1/s)||e!==e&&s!==s}var ea=typeof Object.is=="function"?Object.is:Qo,ta=Ge.useState,ra=Ge.useEffect,na=Ge.useLayoutEffect,sa=Ge.useDebugValue;function ia(e,s){var n=s(),r=ta({inst:{value:n,getSnapshot:s}}),i=r[0].inst,c=r[1];return na(function(){i.value=n,i.getSnapshot=s,zt(i)&&c({inst:i})},[e,n,s]),ra(function(){return zt(i)&&c({inst:i}),e(function(){zt(i)&&c({inst:i})})},[e]),sa(n),n}function zt(e){var s=e.getSnapshot;e=e.value;try{var n=s();return!ea(e,n)}catch{return!0}}function oa(e,s){return s()}var aa=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?oa:ia;qn.useSyncExternalStore=Ge.useSyncExternalStore!==void 0?Ge.useSyncExternalStore:aa;Mn.exports=qn;var la=Mn.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mt=K,ca=la;function ua(e,s){return e===s&&(e!==0||1/e===1/s)||e!==e&&s!==s}var da=typeof Object.is=="function"?Object.is:ua,fa=ca.useSyncExternalStore,ha=Mt.useRef,pa=Mt.useEffect,ma=Mt.useMemo,ga=Mt.useDebugValue;Dn.useSyncExternalStoreWithSelector=function(e,s,n,r,i){var c=ha(null);if(c.current===null){var f={hasValue:!1,value:null};c.current=f}else f=c.current;c=ma(function(){function w(o){if(!x){if(x=!0,m=o,o=r(o),i!==void 0&&f.hasValue){var y=f.value;if(i(y,o))return d=y}return d=o}if(y=d,da(m,o))return y;var g=r(o);return i!==void 0&&i(y,g)?(m=o,y):(m=o,d=g)}var x=!1,m,d,a=n===void 0?null:n;return[function(){return w(s())},a===null?void 0:function(){return w(a())}]},[s,n,r,i]);var b=fa(e,c[0],c[1]);return pa(function(){f.hasValue=!0,f.value=b},[b]),ga(b),b};In.exports=Dn;var ya=In.exports;const va=Hr(ya),{useDebugValue:xa}=ar,{useSyncExternalStoreWithSelector:ba}=va;const wa=e=>e;function Na(e,s=wa,n){const r=ba(e.subscribe,e.getState,e.getServerState||e.getInitialState,s,n);return xa(r),r}const qr=e=>{const s=typeof e=="function"?Xo(e):e,n=(r,i)=>Na(s,r,i);return Object.assign(n,s),n},ja=e=>e?qr(e):qr;function Ea(e,s){let n;try{n=e()}catch{return}return{getItem:i=>{var c;const f=w=>w===null?null:JSON.parse(w,s==null?void 0:s.reviver),b=(c=n.getItem(i))!=null?c:null;return b instanceof Promise?b.then(f):f(b)},setItem:(i,c)=>n.setItem(i,JSON.stringify(c,s==null?void 0:s.replacer)),removeItem:i=>n.removeItem(i)}}const st=e=>s=>{try{const n=e(s);return n instanceof Promise?n:{then(r){return st(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return st(r)(n)}}}},_a=(e,s)=>(n,r,i)=>{let c={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:h=>h,version:0,merge:(h,p)=>({...p,...h}),...s},f=!1;const b=new Set,w=new Set;let x;try{x=c.getStorage()}catch{}if(!x)return e((...h)=>{console.warn(`[zustand persist middleware] Unable to update item '${c.name}', the given storage is currently unavailable.`),n(...h)},r,i);const m=st(c.serialize),d=()=>{const h=c.partialize({...r()});let p;const u=m({state:h,version:c.version}).then(v=>x.setItem(c.name,v)).catch(v=>{p=v});if(p)throw p;return u},a=i.setState;i.setState=(h,p)=>{a(h,p),d()};const o=e((...h)=>{n(...h),d()},r,i);let y;const g=()=>{var h;if(!x)return;f=!1,b.forEach(u=>u(r()));const p=((h=c.onRehydrateStorage)==null?void 0:h.call(c,r()))||void 0;return st(x.getItem.bind(x))(c.name).then(u=>{if(u)return c.deserialize(u)}).then(u=>{if(u)if(typeof u.version=="number"&&u.version!==c.version){if(c.migrate)return c.migrate(u.state,u.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return u.state}).then(u=>{var v;return y=c.merge(u,(v=r())!=null?v:o),n(y,!0),d()}).then(()=>{p==null||p(y,void 0),f=!0,w.forEach(u=>u(y))}).catch(u=>{p==null||p(void 0,u)})};return i.persist={setOptions:h=>{c={...c,...h},h.getStorage&&(x=h.getStorage())},clearStorage:()=>{x==null||x.removeItem(c.name)},getOptions:()=>c,rehydrate:()=>g(),hasHydrated:()=>f,onHydrate:h=>(b.add(h),()=>{b.delete(h)}),onFinishHydration:h=>(w.add(h),()=>{w.delete(h)})},g(),y||o},Sa=(e,s)=>(n,r,i)=>{let c={storage:Ea(()=>localStorage),partialize:g=>g,version:0,merge:(g,h)=>({...h,...g}),...s},f=!1;const b=new Set,w=new Set;let x=c.storage;if(!x)return e((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${c.name}', the given storage is currently unavailable.`),n(...g)},r,i);const m=()=>{const g=c.partialize({...r()});return x.setItem(c.name,{state:g,version:c.version})},d=i.setState;i.setState=(g,h)=>{d(g,h),m()};const a=e((...g)=>{n(...g),m()},r,i);i.getInitialState=()=>a;let o;const y=()=>{var g,h;if(!x)return;f=!1,b.forEach(u=>{var v;return u((v=r())!=null?v:a)});const p=((h=c.onRehydrateStorage)==null?void 0:h.call(c,(g=r())!=null?g:a))||void 0;return st(x.getItem.bind(x))(c.name).then(u=>{if(u)if(typeof u.version=="number"&&u.version!==c.version){if(c.migrate)return[!0,c.migrate(u.state,u.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,u.state];return[!1,void 0]}).then(u=>{var v;const[l,N]=u;if(o=c.merge(N,(v=r())!=null?v:a),n(o,!0),l)return m()}).then(()=>{p==null||p(o,void 0),o=r(),f=!0,w.forEach(u=>u(o))}).catch(u=>{p==null||p(void 0,u)})};return i.persist={setOptions:g=>{c={...c,...g},g.storage&&(x=g.storage)},clearStorage:()=>{x==null||x.removeItem(c.name)},getOptions:()=>c,rehydrate:()=>y(),hasHydrated:()=>f,onHydrate:g=>(b.add(g),()=>{b.delete(g)}),onFinishHydration:g=>(w.add(g),()=>{w.delete(g)})},c.skipHydration||y(),o||a},Oa=(e,s)=>"getStorage"in s||"serialize"in s||"deserialize"in s?_a(e,s):Sa(e,s),ka=Oa,Aa=[{name:"Introduction",enabled:!1},{name:"Biographical History",enabled:!1},{name:"Professional Background",enabled:!0},{name:"Social History",enabled:!1},{name:"Family History",enabled:!0},{name:"Medical History",enabled:!0},{name:"Vegetative History",enabled:!0},{name:"Pyschological History",enabled:!1},{name:"Diseases History",enabled:!0}],Ta=[{name:"Include own Statement",enabled:!0},{name:"Audio Enhance",enabled:!0},{name:"Include own Comments",enabled:!0},{name:"Use Indirect Speech",enabled:!0},{name:"Summarize Conversation",enabled:!0},{name:"Patient Quotes",enabled:!0}],se=ja(ka((e,s)=>({selectedFile:null,setSelectedFile:n=>e({selectedFile:n}),isProcessing:!1,setIsProcessing:n=>e({isProcessing:n}),currentSession:null,setCurrentSession:n=>e({currentSession:n}),language:"",setLanguage:n=>e({language:n}),speakers:"",setSpeakers:n=>e({speakers:n}),structures:Aa,setStructures:n=>e({structures:n}),parameters:Ta,setParameters:n=>e({parameters:n}),currentSessionId:null,setCurrentSessionId:n=>e({currentSessionId:n}),processingStatus:null,setProcessingStatus:n=>e({processingStatus:n}),updateProgressSimulation:n=>e(r=>{if(!r.processingStatus)return r;const i=r.processingStatus.backendProgress||0,c=Math.min(n,95),f=Math.max(c,i);return{processingStatus:{...r.processingStatus,simulatedProgress:c,progress:f}}}),updateBackendProgress:n=>e(r=>{if(!r.processingStatus)return r;const i=r.processingStatus.simulatedProgress||5,c=Math.max(i,n);return{processingStatus:{...r.processingStatus,backendProgress:n,progress:c,simulationActive:n<100?r.processingStatus.simulationActive:!1}}}),results:null,setResults:n=>e({results:n}),expandedSummary:!1,setExpandedSummary:n=>e({expandedSummary:n}),expandedTranscript:!1,setExpandedTranscript:n=>e({expandedTranscript:n}),transcriptEditorContent:{},setTranscriptEditorContent:(n,r)=>e(i=>({transcriptEditorContent:{...i.transcriptEditorContent,[n]:r}})),speakerMappings:{},setSpeakerMappings:(n,r)=>e(i=>({speakerMappings:{...i.speakerMappings,[n]:r}})),editorHasUnsavedChanges:{},setEditorHasUnsavedChanges:(n,r)=>e(i=>({editorHasUnsavedChanges:{...i.editorHasUnsavedChanges,[n]:r}})),getEditorState:n=>{const r=s();return{content:r.transcriptEditorContent[n]||"",speakers:r.speakerMappings[n]||{},hasUnsavedChanges:r.editorHasUnsavedChanges[n]||!1}},saveEditorState:(n,r)=>{const{setTranscriptEditorContent:i,setSpeakerMappings:c,setEditorHasUnsavedChanges:f}=s();r.content!==void 0&&i(n,r.content),r.speakers!==void 0&&c(n,r.speakers),r.hasUnsavedChanges!==void 0&&f(n,r.hasUnsavedChanges)},clearEditorState:n=>{e(r=>{const i={...r.transcriptEditorContent},c={...r.speakerMappings},f={...r.editorHasUnsavedChanges};return delete i[n],delete c[n],delete f[n],{transcriptEditorContent:i,speakerMappings:c,editorHasUnsavedChanges:f}})},selectedAnalysisSession:"",setSelectedAnalysisSession:n=>e({selectedAnalysisSession:n}),sessionData:null,setSessionData:n=>e({sessionData:n}),customPrompt:"",setCustomPrompt:n=>e({customPrompt:n}),analysisResults:{},setAnalysisResults:n=>e({analysisResults:n}),analysisProgress:{},setAnalysisProgress:n=>e({analysisProgress:n}),loadingPrompts:[],setLoadingPrompts:n=>e({loadingPrompts:n}),backgroundPolling:[],setBackgroundPolling:n=>e({backgroundPolling:n}),showHistoryModal:!1,setShowHistoryModal:n=>e({showHistoryModal:n}),selectedChatSession:"",setSelectedChatSession:n=>e({selectedChatSession:n}),contextType:"none",setContextType:n=>e({contextType:n}),chatMessages:[],setChatMessages:n=>e({chatMessages:n}),addChatMessage:n=>e(r=>({chatMessages:[...r.chatMessages,n]})),clearChatMessages:()=>e({chatMessages:[]}),isLoading:!1,setChatLoading:n=>e({isLoading:n})}),{name:"speech-diarization-storage",partialize:e=>({selectedFile:null,language:e.language,speakers:e.speakers,structures:e.structures,parameters:e.parameters,currentSessionId:e.currentSessionId,processingStatus:e.processingStatus,results:e.results,expandedSummary:e.expandedSummary,expandedTranscript:e.expandedTranscript,transcriptEditorContent:e.transcriptEditorContent,speakerMappings:e.speakerMappings,editorHasUnsavedChanges:e.editorHasUnsavedChanges,customPrompt:e.customPrompt,analysisResults:e.analysisResults,analysisProgress:e.analysisProgress,showHistoryModal:e.showHistoryModal,selectedChatSession:e.selectedChatSession,contextType:e.contextType,chatMessages:e.chatMessages})})),Pa=()=>t.jsx(t.Fragment,{children:t.jsxs("div",{className:"text-center mb-8",children:[t.jsxs("div",{className:"flex items-center justify-center mb-4",children:[t.jsx("span",{className:"text-white text-xl mr-2",children:"Exploration &"}),t.jsx("span",{className:"text-cyan-400 text-xl font-semibold",children:"Interviews"})]}),t.jsxs("h1",{className:"text-4xl font-light text-white mb-2",children:[t.jsx("span",{className:"text-cyan-400",children:'"'}),"Turn Spoken Thoughts Into Smart Actions",t.jsx("span",{className:"text-cyan-400",children:'"'})]})]})}),Ra=({processingSessions:e,onViewSession:s})=>e.length===0?null:t.jsx(fe.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-6 bg-gradient-to-r from-cyan-500 to-cyan-600 rounded-xl p-4 text-white",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx(je,{className:"w-5 h-5 animate-spin"}),t.jsxs("div",{children:[t.jsxs("h3",{className:"font-semibold",children:[e.length," Session",e.length>1?"s":""," Processing"]}),t.jsx("p",{className:"text-cyan-100 text-sm",children:"Processing continues in background. You'll be notified when complete."})]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[e.slice(0,2).map(n=>t.jsxs("button",{onClick:()=>s(n.sessionId),className:"px-3 py-1 bg-white/20 hover:bg-white/30 rounded-lg text-sm transition-colors",children:["View ",n.sessionId.slice(0,8),"..."]},n.sessionId)),e.length>2&&t.jsxs("span",{className:"text-cyan-100 text-sm",children:["+",e.length-2," more"]})]})]})}),La=({onFileUpload:e,selectedFile:s,isProcessing:n,currentSessionId:r,processingStatus:i})=>{const[c,f]=K.useState(!1),[b,w]=K.useState(null),x=K.useRef(null),m=[".mp3",".wav",".mp4",".m4a",".flac",".ogg"],d=100*1024*1024,a=v=>{const l="."+v.name.split(".").pop().toLowerCase();return m.includes(l)?v.size>d?`File too large. Max size: ${d/1024/1024}MB`:null:`Unsupported format. Please use: ${m.join(", ")}`},o=v=>{if(v===0)return"0 Bytes";const l=1024,N=["Bytes","KB","MB","GB"],T=Math.floor(Math.log(v)/Math.log(l));return parseFloat((v/Math.pow(l,T)).toFixed(2))+" "+N[T]},y=v=>{v.preventDefault(),v.stopPropagation(),v.type==="dragenter"||v.type==="dragover"?f(!0):v.type==="dragleave"&&f(!1)},g=v=>{v.preventDefault(),v.stopPropagation(),f(!1),v.dataTransfer.files&&v.dataTransfer.files[0]&&h(v.dataTransfer.files[0])},h=v=>{const l=a(v);if(l){w(l);return}w(null),e(v)},p=()=>{var v;(v=x.current)==null||v.click()},u=v=>{v.target.files&&v.target.files[0]&&h(v.target.files[0])};return t.jsxs("div",{className:"w-full",children:[t.jsx("input",{ref:x,type:"file",accept:m.join(","),onChange:u,className:"hidden",disabled:n}),b&&t.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg flex items-center space-x-2",children:[t.jsx(_e,{className:"w-5 h-5 text-red-500"}),t.jsx("span",{className:"text-red-700 text-sm",children:b})]}),s?t.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx(ze,{className:"w-8 h-8 text-green-500"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-green-700",children:s.name}),t.jsx("p",{className:"text-xs text-green-600",children:o(s.size)})]})]})}):t.jsx("div",{className:`border-2 border-dashed rounded-lg p-6 text-center transition-colors cursor-pointer ${c?"border-cyan-400 bg-cyan-50":"border-gray-300 hover:border-cyan-400 hover:bg-gray-50"} ${n?"opacity-50 cursor-not-allowed":""}`,onDragEnter:y,onDragLeave:y,onDragOver:y,onDrop:g,onClick:n?void 0:p,children:t.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[t.jsx(Yn,{className:`w-10 h-10 ${c?"text-cyan-500":"text-gray-400"}`}),t.jsxs("div",{children:[t.jsx("p",{className:"text-lg font-medium text-gray-700",children:c?"Drop your audio file here":"Upload Audio File"}),t.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Drag & drop or ",t.jsx("button",{onClick:p,className:"text-cyan-500 hover:text-cyan-600 underline",children:"browse"})," to upload"]})]}),t.jsxs("div",{className:"text-xs text-gray-400",children:[t.jsxs("p",{children:["Supported: ",m.join(", ")]}),t.jsxs("p",{children:["Max size: ",d/1024/1024,"MB"]})]})]})})]})},Ca=()=>{const e=se(n=>n.resetAllState),s=()=>{window.confirm(`Start a new session?

This will clear all uploaded files and reset all settings.`)&&(e(),ee.success("New session started - all state cleared"))};return t.jsxs("button",{onClick:s,className:"w-full py-3 rounded-lg font-semibold transition-colors flex items-center justify-center space-x-2 bg-gray-500 hover:bg-gray-700 text-white border border-gray-400 hover:border-gray-400",title:"Clear all state and start fresh",children:[t.jsx(Xr,{className:"w-5 h-5"}),t.jsx("span",{children:"Add New Session"})]})},Ia=({isProcessing:e,language:s,setLanguage:n,speakers:r,setSpeakers:i,handleStartProcessing:c,canProcess:f})=>{const b=[{code:"",name:"Auto-detect"},{code:"en",name:"English"},{code:"es",name:"Spanish"},{code:"fr",name:"French"},{code:"de",name:"German"},{code:"it",name:"Italian"},{code:"pt",name:"Portuguese"},{code:"ru",name:"Russian"},{code:"ja",name:"Japanese"},{code:"ko",name:"Korean"},{code:"zh",name:"Chinese"}],w=[{value:"",label:"Auto-detect"},{value:"1",label:"1 Speaker"},{value:"2",label:"2 Speakers"},{value:"3",label:"3 Speakers"},{value:"4",label:"4 Speakers"},{value:"5",label:"5+ Speakers"}];return t.jsxs("div",{className:"bg-gray-100 p-6 rounded-lg",children:[t.jsx("h3",{className:"text-cyan-400 text-lg font-semibold mb-4",children:"Processing Settings"}),t.jsxs("div",{className:"mb-6",children:[t.jsx("div",{className:"bg-gray-800 rounded-lg p-4 mb-4",children:t.jsx("div",{className:"flex items-center justify-center space-x-1",children:[...Array(20)].map((x,m)=>t.jsx("div",{className:`bg-cyan-400 rounded transition-all duration-300 ${e?"animate-pulse":""}`,style:{width:"3px",height:`${Math.random()*60+10}px`,animationDelay:`${m*50}ms`}},m))})}),t.jsxs("div",{className:"flex justify-between",children:[t.jsxs("div",{className:"flex-1 mr-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Language"}),t.jsx("select",{value:s,onChange:x=>n(x.target.value),disabled:e,className:"w-full bg-gray-800 text-white px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-400",children:b.map(x=>t.jsx("option",{value:x.code,children:x.name},x.code))})]}),t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Speakers"}),t.jsx("select",{value:r,onChange:x=>i(x.target.value),disabled:e,className:"w-full bg-gray-800 text-white px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-400",children:w.map(x=>t.jsx("option",{value:x.value,children:x.label},x.value))})]})]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("button",{onClick:c,disabled:!f||e,className:`w-full py-3 rounded-lg font-semibold transition-colors flex items-center justify-center space-x-2 ${f&&!e?"bg-cyan-400 text-white hover:bg-cyan-500":"bg-gray-400 text-gray-200 cursor-not-allowed"}`,children:e?t.jsxs(t.Fragment,{children:[t.jsx(je,{className:"w-5 h-5 animate-spin"}),t.jsx("span",{children:"Processing..."})]}):t.jsx("span",{children:"Start Processing File"})}),t.jsx("div",{className:"w-full",children:t.jsx(Ca,{})})]})]})},Da=()=>{const e=lr(),{isConnected:s,addSession:n,registerNavigationCallback:r,getProcessingSessions:i}=dt(),c=se(A=>A.selectedFile),f=se(A=>A.setSelectedFile),b=se(A=>A.isProcessing),w=se(A=>A.setIsProcessing);se(A=>A.currentSession);const x=se(A=>A.setCurrentSession),m=se(A=>A.language),d=se(A=>A.setLanguage),a=se(A=>A.speakers),o=se(A=>A.setSpeakers),y=se(A=>A.structures),g=se(A=>A.parameters),h=se(A=>A.currentSessionId),p=se(A=>A.processingStatus),u=se(A=>A.setProcessingStatus),v=i(),l=K.useCallback(A=>{const _=A/1048576;return Math.max(10,Math.min(60,_*1.5))},[]),N=K.useCallback(A=>{f(A)},[f]),T=K.useCallback(async()=>{if(!c||!s){ee.error("Please select a file and ensure backend is connected");return}try{const A=new FormData;A.append("file",c),A.append("language",m),A.append("apply_preprocessing","true"),A.append("num_speakers",a);const _=y.filter(L=>L.enabled).map(L=>L.name),E=g.filter(L=>L.enabled).map(L=>L.name);A.append("structures",JSON.stringify(_)),A.append("parameters",JSON.stringify(E)),w(!0),ee.loading("Starting transcription...",{id:"upload"});const j=l(c.size),P=Date.now(),C=`temp_${Date.now()}`;x(C),u({status:"processing",progress:5,simulatedProgress:5,backendProgress:null,estimatedDuration:j,startTime:P,simulationActive:!0,message:"Starting audio processing...",fileInfo:{name:c.name,size:c.size,type:c.type}}),e("/results",{state:{sessionId:C,structures:_,parameters:E,fromUpload:!0,fileInfo:{name:c.name,size:c.size,type:c.type}}}),setTimeout(async()=>{try{const B=(await ae.uploadAudio(A)).data.session_id;x(B),se.getState().setCurrentSessionId(B),n(B,{status:"processing",progress:10,structures:_,parameters:E,filename:c.name,startTime:new Date}),r(B,q=>{console.log("Processing completed for session:",q)}),ee.success("Upload successful! Processing in progress...",{id:"upload",duration:3e3})}catch(L){console.error("Upload error:",L),ee.error(L.userMessage||"Upload failed",{id:"upload"}),u({status:"failed",message:L.userMessage||"Upload failed",simulationActive:!1})}finally{w(!1)}},100)}catch(A){console.error("Processing start error:",A),ee.error("Failed to start processing",{id:"upload"}),w(!1)}},[c,s,m,a,y,g,n,r,e,w,x,u,l]),S=K.useCallback(A=>{const _=v.find(E=>E.sessionId===A);_&&e("/results",{state:{sessionId:A,structures:_.structures,parameters:_.parameters}})},[v,e]),k=c&&!b;return t.jsx("div",{className:"min-h-screen bg-gray-900 overflow-auto",children:t.jsxs("div",{className:"p-6 max-w-5xl mx-auto",children:[t.jsx(Pa,{}),t.jsx(Ra,{processingSessions:v,onViewSession:S}),t.jsxs("div",{className:"max-w-3xl mx-auto space-y-6",children:[t.jsx(fe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:t.jsx(La,{onFileUpload:N,selectedFile:c,isProcessing:b,currentSessionId:h,processingStatus:p})}),t.jsx(fe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:t.jsx(Ia,{isProcessing:b,language:m,setLanguage:d,speakers:a,setSpeakers:o,handleStartProcessing:T,canProcess:k})})]})]})})},Ma="modulepreload",qa=function(e){return"/"+e},Ur={},Ua=function(s,n,r){if(!n||n.length===0)return s();const i=document.getElementsByTagName("link");return Promise.all(n.map(c=>{if(c=qa(c),c in Ur)return;Ur[c]=!0;const f=c.endsWith(".css"),b=f?'[rel="stylesheet"]':"";if(!!r)for(let m=i.length-1;m>=0;m--){const d=i[m];if(d.href===c&&(!f||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${b}`))return;const x=document.createElement("link");if(x.rel=f?"stylesheet":Ma,f||(x.as="script",x.crossOrigin=""),x.href=c,document.head.appendChild(x),f)return new Promise((m,d)=>{x.addEventListener("load",m),x.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${c}`)))})})).then(()=>s()).catch(c=>{const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=c,window.dispatchEvent(f),!f.defaultPrevented)throw c})},Ba=({currentSessionId:e,results:s,structures:n,parameters:r,hasSession:i,editorRef:c,currentView:f="original"})=>{const[b,w]=K.useState(!1),x=v=>{const l=Math.floor(v/60),N=Math.floor(v%60);return`${l}:${String(N).padStart(2,"0")}`},m=v=>{const l=Math.floor(v/3600),N=Math.floor(v%3600/60),T=Math.floor(v%60);return l>0?`${l}:${N.toString().padStart(2,"0")}:${T.toString().padStart(2,"0")}`:`${N}:${T.toString().padStart(2,"0")}`},d=()=>{var T,S,k,A;if(f==="editor"&&((T=c==null?void 0:c.current)!=null&&T.getCurrentContent)){const _=c.current.getCurrentContent(),E=((k=(S=c.current).getCurrentMappings)==null?void 0:k.call(S))||{};if(_&&_.trim()&&_!=="<p><br></p>")return console.log("ðŸ“ Getting content from editor (has edits)"),{content:_,isEdited:!0,mappings:E}}console.log("ðŸ“„ Using original content");const v=((A=s==null?void 0:s.results)==null?void 0:A.segments)||[];let l="";const N={};return v.forEach(_=>{const E=_.speaker,j=_.text||"",P=_.start||0,C=_.end||0;N[E]||(N[E]=E);const L=`[${x(P)} - ${x(C)}]`;l+=`<p><span style="color: #6b7280; font-size: 0.875rem; font-family: monospace;">${L}</span> <strong style="color: #059669;">${E}:</strong> ${j}</p>`}),{content:l,isEdited:!1,mappings:N}},a=(v={})=>{var T;const l={};return(((T=s==null?void 0:s.results)==null?void 0:T.segments)||[]).forEach(S=>{const k=v[S.speaker]||S.speaker;l[k]||(l[k]={segments:0,totalDuration:0,wordCount:0}),l[k].segments++,l[k].totalDuration+=S.end-S.start,l[k].wordCount+=(S.text||"").split(" ").length}),l},o=()=>{var v,l;try{const{content:N,isEdited:T,mappings:S}=d(),k=((v=s==null?void 0:s.results)==null?void 0:v.segments)||[],A=a(S),_=((l=s==null?void 0:s.results)==null?void 0:l.metadata)||{};let E=`TRANSCRIPT
${"=".repeat(60)}

Document Information:
â€¢ Generated: ${new Date().toLocaleDateString()} at ${new Date().toLocaleTimeString()}
â€¢ Session ID: ${(e==null?void 0:e.slice(0,8))||"N/A"}
â€¢ Total Duration: ${m(_.total_duration||0)}
â€¢ Total Speakers: ${Object.keys(A).length}
â€¢ Language: ${_.language||"Auto-detected"}
â€¢ Content Type: ${T?"Edited Transcript":"Original Transcript"}
â€¢ View Source: ${f==="editor"?"Live Editor":"Original View"}

Speaker Summary:
`;Object.entries(A).forEach(([L,F])=>{const B=_.total_duration?(F.totalDuration/_.total_duration*100).toFixed(1):"0";E+=`â€¢ ${L}: ${F.segments} segments, ${m(F.totalDuration)} (${B}%), ~${F.wordCount} words
`}),E+=`
${"=".repeat(60)}
TRANSCRIPT CONTENT
${"=".repeat(60)}

`,k.forEach((L,F)=>{const B=S[L.speaker]||L.speaker,q=`[${m(L.start)} - ${m(L.end)}]`;E+=`${q} ${B}:
${L.text}

`}),E+=`${"=".repeat(60)}
End of Transcript
Generated by AI Speech Diarization Platform
`;const j=new Blob([E],{type:"text/plain"}),P=URL.createObjectURL(j),C=document.createElement("a");C.href=P,C.download=`transcript_professional_${(e==null?void 0:e.slice(0,8))||"session"}_${new Date().toISOString().slice(0,10)}.txt`,document.body.appendChild(C),C.click(),C.remove(),URL.revokeObjectURL(P),ee.success(`Downloaded ${T?"edited":"original"} professional transcript from ${f} view`),w(!1)}catch(N){console.error("Download error:",N),ee.error("Failed to download transcript")}},y=()=>{var v,l;try{const{mappings:N,isEdited:T}=d(),S=((v=s==null?void 0:s.results)==null?void 0:v.segments)||[],k=a(N),A=((l=s==null?void 0:s.results)==null?void 0:l.metadata)||{};let _=`MEETING MINUTES
${"=".repeat(60)}

Meeting Details:
â€¢ Date: ${new Date().toLocaleDateString()}
â€¢ Duration: ${m(A.total_duration||0)}
â€¢ Participants: ${Object.keys(k).length}
â€¢ Content: ${T?"Edited Version":"Original Recording"}
â€¢ Source: ${f==="editor"?"Live Editor":"Original View"}

Attendees:
`;Object.keys(k).forEach(F=>{_+=`â€¢ ${F}
`}),_+=`
Discussion:
${"=".repeat(40)}

`;let E="",j="";S.forEach((F,B)=>{const q=N[F.speaker]||F.speaker;q!==E?(j&&(_+=`${E}:
${j}

`),E=q,j=F.text):j+=" "+F.text}),j&&(_+=`${E}:
${j}

`),_+=`${"=".repeat(60)}
Action Items: [To be filled]
Next Meeting: [To be scheduled]
`;const P=new Blob([_],{type:"text/plain"}),C=URL.createObjectURL(P),L=document.createElement("a");L.href=C,L.download=`meeting_minutes_${new Date().toISOString().slice(0,10)}.txt`,document.body.appendChild(L),L.click(),L.remove(),URL.revokeObjectURL(C),ee.success(`Downloaded ${T?"edited":"original"} meeting minutes from ${f} view`),w(!1)}catch{ee.error("Failed to download meeting minutes")}},g=()=>{var v;try{const{mappings:l,isEdited:N}=d(),T=((v=s==null?void 0:s.results)==null?void 0:v.segments)||[];let S=`Start Time,End Time,Duration,Speaker (Original),Speaker (Mapped),Text,Word Count
`;T.forEach(E=>{const j=l[E.speaker]||E.speaker,P=E.end-E.start,C=(E.text||"").split(" ").length,L=(E.text||"").replace(/"/g,'""');S+=`${E.start},${E.end},${P.toFixed(2)},"${E.speaker}","${j}","${L}",${C}
`});const k=new Blob([S],{type:"text/csv"}),A=URL.createObjectURL(k),_=document.createElement("a");_.href=A,_.download=`transcript_data_${(e==null?void 0:e.slice(0,8))||"session"}.csv`,document.body.appendChild(_),_.click(),_.remove(),URL.revokeObjectURL(A),ee.success(`Downloaded ${N?"edited":"original"} CSV data from ${f} view`),w(!1)}catch{ee.error("Failed to download CSV")}},h=()=>{try{const{content:v,isEdited:l}=d(),N=document.createElement("div");N.innerHTML=v;const T=N.textContent||N.innerText||"",S=new Blob([T],{type:"text/plain"}),k=URL.createObjectURL(S),A=document.createElement("a");A.href=k,A.download=`transcript_simple_${(e==null?void 0:e.slice(0,8))||"session"}_${new Date().toISOString().slice(0,10)}.txt`,document.body.appendChild(A),A.click(),A.remove(),URL.revokeObjectURL(k),ee.success(`Downloaded ${l?"edited":"original"} simple transcript from ${f} view`),w(!1)}catch{ee.error("Failed to download transcript")}},p=()=>{try{Ua(()=>import("./jspdf.es.min-836b9c71.js").then(v=>v.j),[]).then(({default:v})=>{var F,B;const{content:l,isEdited:N,mappings:T}=d(),S=((F=s==null?void 0:s.results)==null?void 0:F.segments)||[],k=a(T),A=((B=s==null?void 0:s.results)==null?void 0:B.metadata)||{},_=new v,E=_.internal.pageSize.width,j=20,P=E-j*2;let C=j;const L=(q,I=10,R=!1)=>{_.setFontSize(I),R?_.setFont("helvetica","bold"):_.setFont("helvetica","normal");const O=_.splitTextToSize(q,P);C+O.length*I*.35>_.internal.pageSize.height-j&&(_.addPage(),C=j),_.text(O,j,C),C+=O.length*I*.35+5};L("TRANSCRIPT DOCUMENT",16,!0),C+=5,L("Document Information:",12,!0),L(`Generated: ${new Date().toLocaleDateString()} at ${new Date().toLocaleTimeString()}`),L(`Session ID: ${(e==null?void 0:e.slice(0,8))||"N/A"}`),L(`Total Duration: ${m(A.total_duration||0)}`),L(`Total Speakers: ${Object.keys(k).length}`),L(`Language: ${A.language||"Auto-detected"}`),L(`Content Type: ${N?"Edited Transcript":"Original Transcript"}`),L(`View Source: ${f==="editor"?"Live Editor":"Original View"}`),C+=10,L("Speaker Summary:",12,!0),Object.entries(k).forEach(([q,I])=>{const R=A.total_duration?(I.totalDuration/A.total_duration*100).toFixed(1):"0";L(`â€¢ ${q}: ${I.segments} segments, ${m(I.totalDuration)} (${R}%), ~${I.wordCount} words`)}),C+=10,L("TRANSCRIPT CONTENT",14,!0),C+=5,S.forEach(q=>{const I=T[q.speaker]||q.speaker,R=`[${m(q.start)} - ${m(q.end)}]`;L(`${R} ${I}:`,10,!0),L(q.text,10,!1),C+=5}),_.save(`transcript_${(e==null?void 0:e.slice(0,8))||"session"}_${new Date().toISOString().slice(0,10)}.pdf`),ee.success(`Downloaded ${N?"edited":"original"} PDF from ${f} view`),w(!1)}).catch(v=>{console.error("Failed to load jsPDF:",v),ee.error("PDF library not available. Please try another format.")})}catch(v){console.error("PDF download error:",v),ee.error("Failed to generate PDF")}},u=()=>{try{const v=JSON.stringify(s,null,2),l=new Date().toISOString().slice(0,19).replace(/:/g,"-"),N=`${e}_results_${l}.json`,T=new Blob([v],{type:"application/json"}),S=URL.createObjectURL(T),k=document.createElement("a");k.href=S,k.download=N,document.body.appendChild(k),k.click(),k.remove(),URL.revokeObjectURL(S),ee.success(`Downloaded complete results as JSON from ${f} view`),w(!1)}catch(v){console.error("JSON download error:",v),ee.error("Failed to download JSON")}};return t.jsxs("div",{className:"mb-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsxs(Be,{to:"/",className:"flex items-center space-x-2 bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-500 transition-colors",children:[t.jsx(Zn,{className:"w-4 h-4"}),t.jsx("span",{children:"Back"})]}),t.jsxs("div",{children:[t.jsxs("h1",{className:"text-3xl font-bold text-white",children:["Exploration & ",t.jsx("span",{className:"text-cyan-400",children:"Interviews"})]}),e?t.jsx("p",{className:"text-gray-400",children:"Active Session"}):t.jsx("p",{className:"text-gray-400",children:"No active session - showing demo content"})]})]}),s&&t.jsx("div",{className:"flex items-center space-x-3",children:t.jsxs("div",{className:"relative",children:[t.jsxs("button",{onClick:()=>w(!b),className:"flex items-center space-x-2 px-4 py-2 bg-green-500 text-white hover:bg-green-600 rounded-lg transition-colors",children:[t.jsx(ur,{className:"w-4 h-4"}),t.jsx("span",{children:"Download"}),t.jsx(Jr,{className:"w-3 h-3"})]}),b&&t.jsx("div",{className:"absolute right-0 top-full mt-2 w-64 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:t.jsxs("div",{className:"p-2",children:[t.jsxs("div",{className:"text-xs text-gray-500 font-medium mb-2 px-2",children:["Professional Formats â€¢ From: ",f==="editor"?"Live Editor":"Original View"]}),t.jsxs("button",{onClick:o,className:"w-full flex items-center space-x-3 px-3 py-2 text-left hover:bg-gray-50 rounded-md transition-colors",children:[t.jsx(Ue,{className:"w-4 h-4 text-blue-600"}),t.jsxs("div",{children:[t.jsx("div",{className:"font-medium text-sm",children:"Professional Transcript"}),t.jsx("div",{className:"text-xs text-gray-500",children:"Formatted with metadata & stats"})]})]}),t.jsxs("button",{onClick:y,className:"w-full flex items-center space-x-3 px-3 py-2 text-left hover:bg-gray-50 rounded-md transition-colors",children:[t.jsx(Xn,{className:"w-4 h-4 text-green-600"}),t.jsxs("div",{children:[t.jsx("div",{className:"font-medium text-sm",children:"Meeting Minutes"}),t.jsx("div",{className:"text-xs text-gray-500",children:"Business-ready format"})]})]}),t.jsxs("button",{onClick:p,className:"w-full flex items-center space-x-3 px-3 py-2 text-left hover:bg-gray-50 rounded-md transition-colors",children:[t.jsx(Ue,{className:"w-4 h-4 text-red-600"}),t.jsxs("div",{children:[t.jsx("div",{className:"font-medium text-sm",children:"PDF Document"}),t.jsx("div",{className:"text-xs text-gray-500",children:"Professional PDF format"})]})]}),t.jsxs("button",{onClick:g,className:"w-full flex items-center space-x-3 px-3 py-2 text-left hover:bg-gray-50 rounded-md transition-colors",children:[t.jsx(Ue,{className:"w-4 h-4 text-purple-600"}),t.jsxs("div",{children:[t.jsx("div",{className:"font-medium text-sm",children:"Data Export (CSV)"}),t.jsx("div",{className:"text-xs text-gray-500",children:"For analysis & spreadsheets"})]})]}),t.jsx("div",{className:"border-t border-gray-100 my-2"}),t.jsx("div",{className:"text-xs text-gray-500 font-medium mb-2 px-2",children:"Basic Formats"}),t.jsxs("button",{onClick:h,className:"w-full flex items-center space-x-3 px-3 py-2 text-left hover:bg-gray-50 rounded-md transition-colors",children:[t.jsx(Ue,{className:"w-4 h-4 text-gray-600"}),t.jsxs("div",{children:[t.jsx("div",{className:"font-medium text-sm",children:"Simple Text"}),t.jsx("div",{className:"text-xs text-gray-500",children:"Plain transcript only"})]})]}),t.jsxs("button",{onClick:u,className:"w-full flex items-center space-x-3 px-3 py-2 text-left hover:bg-gray-50 rounded-md transition-colors",children:[t.jsx(Ue,{className:"w-4 h-4 text-indigo-600"}),t.jsxs("div",{children:[t.jsx("div",{className:"font-medium text-sm",children:"JSON Data"}),t.jsx("div",{className:"text-xs text-gray-500",children:"Complete results data"})]})]})]})})]})})]}),b&&t.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>w(!1)}),!i&&t.jsxs("div",{className:"bg-blue-100 border border-blue-200 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(_e,{className:"w-5 h-5 text-blue-600"}),t.jsx("span",{className:"text-blue-800 font-medium",children:"Demo Mode"})]}),t.jsx("p",{className:"text-blue-700 text-sm mt-1",children:"You're viewing sample content. Upload an audio file on the Home page to see real results."})]})]})},Fa=({status:e,onReset:s})=>{const n=(e==null?void 0:e.progress)||5,i=(()=>{switch(e==null?void 0:e.status){case"processing":return{icon:je,iconProps:{className:"w-5 h-5 text-blue-500 animate-spin"},bgColor:"bg-blue-50",borderColor:"border-blue-200",textColor:"text-blue-800"};case"completed":return{icon:ze,iconProps:{className:"w-5 h-5 text-green-500"},bgColor:"bg-green-50",borderColor:"border-green-200",textColor:"text-green-800"};case"failed":return{icon:_e,iconProps:{className:"w-5 h-5 text-red-500"},bgColor:"bg-red-50",borderColor:"border-red-200",textColor:"text-red-800"};default:return{icon:je,iconProps:{className:"w-5 h-5 text-gray-500"},bgColor:"bg-gray-50",borderColor:"border-gray-200",textColor:"text-gray-800"}}})(),c=i.icon;return t.jsxs(fe.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`${i.bgColor} ${i.borderColor} border rounded-xl p-4 mb-6`,children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx(c,{...i.iconProps}),t.jsxs("div",{children:[t.jsxs("h3",{className:`font-medium ${i.textColor}`,children:[(e==null?void 0:e.status)==="processing"&&"Processing Audio",(e==null?void 0:e.status)==="completed"&&"Processing Complete",(e==null?void 0:e.status)==="failed"&&"Processing Failed",!(e!=null&&e.status)&&"Processing Status"]}),t.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[(e==null?void 0:e.status)==="processing"&&((e==null?void 0:e.message)||"Processing your audio file..."),(e==null?void 0:e.status)==="completed"&&"Your transcription is ready!",(e==null?void 0:e.status)==="failed"&&((e==null?void 0:e.message)||"Something went wrong during processing.")]})]})]}),(e==null?void 0:e.status)==="failed"&&t.jsx("button",{onClick:s,className:"p-2 hover:bg-gray-200 rounded-lg transition-colors",title:"Reset and try again",children:t.jsx(We,{className:"w-5 h-5 text-gray-600"})})]}),(!e||(e==null?void 0:e.status)==="processing")&&t.jsxs("div",{className:"space-y-2 mt-4",children:[t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-gray-600",children:"Progress"}),t.jsxs("span",{className:"font-medium text-gray-900",children:[Math.round(n),"%"]})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:t.jsx("div",{className:"bg-gradient-to-r from-cyan-400 to-cyan-500 h-3 rounded-full transition-all duration-500 ease-out relative",style:{width:`${Math.max(5,Math.min(100,n))}%`},children:(e==null?void 0:e.simulationActive)&&t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent animate-pulse"})})}),t.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-2",children:[t.jsx("span",{className:n>=10?"text-cyan-600 font-medium":"",children:"Upload"}),t.jsx("span",{className:n>=30?"text-cyan-600 font-medium":"",children:"Analysis"}),t.jsx("span",{className:n>=60?"text-cyan-600 font-medium":"",children:"Diarization"}),t.jsx("span",{className:n>=90?"text-cyan-600 font-medium":"",children:"Complete"})]})]})]})},$a=({metadata:e,speakerStats:s,hasData:n})=>{const i=[{icon:Qr,label:"Duration",value:n?(c=>{if(!c)return"--:--";const f=Math.floor(c/60),b=Math.floor(c%60);return`${f.toString().padStart(2,"0")}:${b.toString().padStart(2,"0")}`})(e==null?void 0:e.total_duration):"--:--",color:"bg-blue-100 text-blue-800",isLoading:n&&!(e!=null&&e.total_duration)},{icon:cr,label:"Speakers",value:n&&(e==null?void 0:e.num_speakers)||"--",color:"bg-green-100 text-green-800",isLoading:n&&!(e!=null&&e.num_speakers)},{icon:Qn,label:"Segments",value:n&&(e==null?void 0:e.segments_count)||"--",color:"bg-purple-100 text-purple-800",isLoading:n&&!(e!=null&&e.segments_count)},{icon:es,label:"Language",value:n&&(e==null?void 0:e.language)||"--",color:"bg-orange-100 text-orange-800",isLoading:n&&!(e!=null&&e.language)}];return t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:i.map((c,f)=>{const b=c.icon;return t.jsx(fe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:f*.1},className:"bg-white rounded-xl border border-gray-200 p-4 relative overflow-hidden",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:`p-2 rounded-lg ${c.color}`,children:t.jsx(b,{className:"w-4 h-4"})}),t.jsx("div",{className:"flex-1 min-w-0",children:c.isLoading?t.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[t.jsx(je,{className:"w-4 h-4 animate-spin"}),t.jsx("span",{className:"text-lg font-bold",children:"--"})]}):t.jsx("div",{className:"text-lg font-bold",children:c.value})}),t.jsx("div",{className:"text-sm opacity-80",children:c.label}),c.isLoading&&t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent animate-pulse"})]})},c.label)})})},Ha=({hasSession:e,processingStatus:s,onReset:n,results:r,metadata:i,speakerStats:c})=>{var b;const f=e&&s&&(s.status==="processing"||s.status==="failed"||s.status==="completed"&&!((b=r==null?void 0:r.results)!=null&&b.segments));return t.jsxs("div",{children:[f&&t.jsx(Fa,{status:s,onReset:n}),t.jsx($a,{metadata:i||{},speakerStats:c||{},hasData:e})]})};var Un={exports:{}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */(function(e,s){(function(r,i){e.exports=i()})(typeof self<"u"?self:Ce,function(){return function(n){var r={};function i(c){if(r[c])return r[c].exports;var f=r[c]={i:c,l:!1,exports:{}};return n[c].call(f.exports,f,f.exports,i),f.l=!0,f.exports}return i.m=n,i.c=r,i.d=function(c,f,b){i.o(c,f)||Object.defineProperty(c,f,{configurable:!1,enumerable:!0,get:b})},i.n=function(c){var f=c&&c.__esModule?function(){return c.default}:function(){return c};return i.d(f,"a",f),f},i.o=function(c,f){return Object.prototype.hasOwnProperty.call(c,f)},i.p="",i(i.s=109)}([function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var c=i(17),f=i(18),b=i(19),w=i(45),x=i(46),m=i(47),d=i(48),a=i(49),o=i(12),y=i(32),g=i(33),h=i(31),p=i(1),u={Scope:p.Scope,create:p.create,find:p.find,query:p.query,register:p.register,Container:c.default,Format:f.default,Leaf:b.default,Embed:d.default,Scroll:w.default,Block:m.default,Inline:x.default,Text:a.default,Attributor:{Attribute:o.default,Class:y.default,Style:g.default,Store:h.default}};r.default=u},function(n,r,i){var c=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,u){p.__proto__=u}||function(p,u){for(var v in u)u.hasOwnProperty(v)&&(p[v]=u[v])};return function(p,u){h(p,u);function v(){this.constructor=p}p.prototype=u===null?Object.create(u):(v.prototype=u.prototype,new v)}}();Object.defineProperty(r,"__esModule",{value:!0});var f=function(h){c(p,h);function p(u){var v=this;return u="[Parchment] "+u,v=h.call(this,u)||this,v.message=u,v.name=v.constructor.name,v}return p}(Error);r.ParchmentError=f;var b={},w={},x={},m={};r.DATA_KEY="__blot";var d;(function(h){h[h.TYPE=3]="TYPE",h[h.LEVEL=12]="LEVEL",h[h.ATTRIBUTE=13]="ATTRIBUTE",h[h.BLOT=14]="BLOT",h[h.INLINE=7]="INLINE",h[h.BLOCK=11]="BLOCK",h[h.BLOCK_BLOT=10]="BLOCK_BLOT",h[h.INLINE_BLOT=6]="INLINE_BLOT",h[h.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",h[h.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",h[h.ANY=15]="ANY"})(d=r.Scope||(r.Scope={}));function a(h,p){var u=y(h);if(u==null)throw new f("Unable to create "+h+" blot");var v=u,l=h instanceof Node||h.nodeType===Node.TEXT_NODE?h:v.create(p);return new v(l,p)}r.create=a;function o(h,p){return p===void 0&&(p=!1),h==null?null:h[r.DATA_KEY]!=null?h[r.DATA_KEY].blot:p?o(h.parentNode,p):null}r.find=o;function y(h,p){p===void 0&&(p=d.ANY);var u;if(typeof h=="string")u=m[h]||b[h];else if(h instanceof Text||h.nodeType===Node.TEXT_NODE)u=m.text;else if(typeof h=="number")h&d.LEVEL&d.BLOCK?u=m.block:h&d.LEVEL&d.INLINE&&(u=m.inline);else if(h instanceof HTMLElement){var v=(h.getAttribute("class")||"").split(/\s+/);for(var l in v)if(u=w[v[l]],u)break;u=u||x[h.tagName]}return u==null?null:p&d.LEVEL&u.scope&&p&d.TYPE&u.scope?u:null}r.query=y;function g(){for(var h=[],p=0;p<arguments.length;p++)h[p]=arguments[p];if(h.length>1)return h.map(function(l){return g(l)});var u=h[0];if(typeof u.blotName!="string"&&typeof u.attrName!="string")throw new f("Invalid definition");if(u.blotName==="abstract")throw new f("Cannot register abstract class");if(m[u.blotName||u.attrName]=u,typeof u.keyName=="string")b[u.keyName]=u;else if(u.className!=null&&(w[u.className]=u),u.tagName!=null){Array.isArray(u.tagName)?u.tagName=u.tagName.map(function(l){return l.toUpperCase()}):u.tagName=u.tagName.toUpperCase();var v=Array.isArray(u.tagName)?u.tagName:[u.tagName];v.forEach(function(l){(x[l]==null||u.className==null)&&(x[l]=u)})}return u}r.register=g},function(n,r,i){var c=i(51),f=i(11),b=i(3),w=i(20),x=String.fromCharCode(0),m=function(d){Array.isArray(d)?this.ops=d:d!=null&&Array.isArray(d.ops)?this.ops=d.ops:this.ops=[]};m.prototype.insert=function(d,a){var o={};return d.length===0?this:(o.insert=d,a!=null&&typeof a=="object"&&Object.keys(a).length>0&&(o.attributes=a),this.push(o))},m.prototype.delete=function(d){return d<=0?this:this.push({delete:d})},m.prototype.retain=function(d,a){if(d<=0)return this;var o={retain:d};return a!=null&&typeof a=="object"&&Object.keys(a).length>0&&(o.attributes=a),this.push(o)},m.prototype.push=function(d){var a=this.ops.length,o=this.ops[a-1];if(d=b(!0,{},d),typeof o=="object"){if(typeof d.delete=="number"&&typeof o.delete=="number")return this.ops[a-1]={delete:o.delete+d.delete},this;if(typeof o.delete=="number"&&d.insert!=null&&(a-=1,o=this.ops[a-1],typeof o!="object"))return this.ops.unshift(d),this;if(f(d.attributes,o.attributes)){if(typeof d.insert=="string"&&typeof o.insert=="string")return this.ops[a-1]={insert:o.insert+d.insert},typeof d.attributes=="object"&&(this.ops[a-1].attributes=d.attributes),this;if(typeof d.retain=="number"&&typeof o.retain=="number")return this.ops[a-1]={retain:o.retain+d.retain},typeof d.attributes=="object"&&(this.ops[a-1].attributes=d.attributes),this}}return a===this.ops.length?this.ops.push(d):this.ops.splice(a,0,d),this},m.prototype.chop=function(){var d=this.ops[this.ops.length-1];return d&&d.retain&&!d.attributes&&this.ops.pop(),this},m.prototype.filter=function(d){return this.ops.filter(d)},m.prototype.forEach=function(d){this.ops.forEach(d)},m.prototype.map=function(d){return this.ops.map(d)},m.prototype.partition=function(d){var a=[],o=[];return this.forEach(function(y){var g=d(y)?a:o;g.push(y)}),[a,o]},m.prototype.reduce=function(d,a){return this.ops.reduce(d,a)},m.prototype.changeLength=function(){return this.reduce(function(d,a){return a.insert?d+w.length(a):a.delete?d-a.delete:d},0)},m.prototype.length=function(){return this.reduce(function(d,a){return d+w.length(a)},0)},m.prototype.slice=function(d,a){d=d||0,typeof a!="number"&&(a=1/0);for(var o=[],y=w.iterator(this.ops),g=0;g<a&&y.hasNext();){var h;g<d?h=y.next(d-g):(h=y.next(a-g),o.push(h)),g+=w.length(h)}return new m(o)},m.prototype.compose=function(d){var a=w.iterator(this.ops),o=w.iterator(d.ops),y=[],g=o.peek();if(g!=null&&typeof g.retain=="number"&&g.attributes==null){for(var h=g.retain;a.peekType()==="insert"&&a.peekLength()<=h;)h-=a.peekLength(),y.push(a.next());g.retain-h>0&&o.next(g.retain-h)}for(var p=new m(y);a.hasNext()||o.hasNext();)if(o.peekType()==="insert")p.push(o.next());else if(a.peekType()==="delete")p.push(a.next());else{var u=Math.min(a.peekLength(),o.peekLength()),v=a.next(u),l=o.next(u);if(typeof l.retain=="number"){var N={};typeof v.retain=="number"?N.retain=u:N.insert=v.insert;var T=w.attributes.compose(v.attributes,l.attributes,typeof v.retain=="number");if(T&&(N.attributes=T),p.push(N),!o.hasNext()&&f(p.ops[p.ops.length-1],N)){var S=new m(a.rest());return p.concat(S).chop()}}else typeof l.delete=="number"&&typeof v.retain=="number"&&p.push(l)}return p.chop()},m.prototype.concat=function(d){var a=new m(this.ops.slice());return d.ops.length>0&&(a.push(d.ops[0]),a.ops=a.ops.concat(d.ops.slice(1))),a},m.prototype.diff=function(d,a){if(this.ops===d.ops)return new m;var o=[this,d].map(function(u){return u.map(function(v){if(v.insert!=null)return typeof v.insert=="string"?v.insert:x;var l=u===d?"on":"with";throw new Error("diff() called "+l+" non-document")}).join("")}),y=new m,g=c(o[0],o[1],a),h=w.iterator(this.ops),p=w.iterator(d.ops);return g.forEach(function(u){for(var v=u[1].length;v>0;){var l=0;switch(u[0]){case c.INSERT:l=Math.min(p.peekLength(),v),y.push(p.next(l));break;case c.DELETE:l=Math.min(v,h.peekLength()),h.next(l),y.delete(l);break;case c.EQUAL:l=Math.min(h.peekLength(),p.peekLength(),v);var N=h.next(l),T=p.next(l);f(N.insert,T.insert)?y.retain(l,w.attributes.diff(N.attributes,T.attributes)):y.push(T).delete(l);break}v-=l}}),y.chop()},m.prototype.eachLine=function(d,a){a=a||`
`;for(var o=w.iterator(this.ops),y=new m,g=0;o.hasNext();){if(o.peekType()!=="insert")return;var h=o.peek(),p=w.length(h)-o.peekLength(),u=typeof h.insert=="string"?h.insert.indexOf(a,p)-p:-1;if(u<0)y.push(o.next());else if(u>0)y.push(o.next(u));else{if(d(y,o.next(1).attributes||{},g)===!1)return;g+=1,y=new m}}y.length()>0&&d(y,{},g)},m.prototype.transform=function(d,a){if(a=!!a,typeof d=="number")return this.transformPosition(d,a);for(var o=w.iterator(this.ops),y=w.iterator(d.ops),g=new m;o.hasNext()||y.hasNext();)if(o.peekType()==="insert"&&(a||y.peekType()!=="insert"))g.retain(w.length(o.next()));else if(y.peekType()==="insert")g.push(y.next());else{var h=Math.min(o.peekLength(),y.peekLength()),p=o.next(h),u=y.next(h);if(p.delete)continue;u.delete?g.push(u):g.retain(h,w.attributes.transform(p.attributes,u.attributes,a))}return g.chop()},m.prototype.transformPosition=function(d,a){a=!!a;for(var o=w.iterator(this.ops),y=0;o.hasNext()&&y<=d;){var g=o.peekLength(),h=o.peekType();if(o.next(),h==="delete"){d-=Math.min(g,d-y);continue}else h==="insert"&&(y<d||!a)&&(d+=g);y+=g}return d},n.exports=m},function(n,r){var i=Object.prototype.hasOwnProperty,c=Object.prototype.toString,f=Object.defineProperty,b=Object.getOwnPropertyDescriptor,w=function(o){return typeof Array.isArray=="function"?Array.isArray(o):c.call(o)==="[object Array]"},x=function(o){if(!o||c.call(o)!=="[object Object]")return!1;var y=i.call(o,"constructor"),g=o.constructor&&o.constructor.prototype&&i.call(o.constructor.prototype,"isPrototypeOf");if(o.constructor&&!y&&!g)return!1;var h;for(h in o);return typeof h>"u"||i.call(o,h)},m=function(o,y){f&&y.name==="__proto__"?f(o,y.name,{enumerable:!0,configurable:!0,value:y.newValue,writable:!0}):o[y.name]=y.newValue},d=function(o,y){if(y==="__proto__")if(i.call(o,y)){if(b)return b(o,y).value}else return;return o[y]};n.exports=function a(){var o,y,g,h,p,u,v=arguments[0],l=1,N=arguments.length,T=!1;for(typeof v=="boolean"&&(T=v,v=arguments[1]||{},l=2),(v==null||typeof v!="object"&&typeof v!="function")&&(v={});l<N;++l)if(o=arguments[l],o!=null)for(y in o)g=d(v,y),h=d(o,y),v!==h&&(T&&h&&(x(h)||(p=w(h)))?(p?(p=!1,u=g&&w(g)?g:[]):u=g&&x(g)?g:{},m(v,{name:y,newValue:a(T,u,h)})):typeof h<"u"&&m(v,{name:y,newValue:h}));return v}},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BlockEmbed=r.bubbleFormats=void 0;var c=function(){function E(j,P){for(var C=0;C<P.length;C++){var L=P[C];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(j,L.key,L)}}return function(j,P,C){return P&&E(j.prototype,P),C&&E(j,C),j}}(),f=function E(j,P,C){j===null&&(j=Function.prototype);var L=Object.getOwnPropertyDescriptor(j,P);if(L===void 0){var F=Object.getPrototypeOf(j);return F===null?void 0:E(F,P,C)}else{if("value"in L)return L.value;var B=L.get;return B===void 0?void 0:B.call(C)}},b=i(3),w=v(b),x=i(2),m=v(x),d=i(0),a=v(d),o=i(16),y=v(o),g=i(6),h=v(g),p=i(7),u=v(p);function v(E){return E&&E.__esModule?E:{default:E}}function l(E,j){if(!(E instanceof j))throw new TypeError("Cannot call a class as a function")}function N(E,j){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j&&(typeof j=="object"||typeof j=="function")?j:E}function T(E,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof j);E.prototype=Object.create(j&&j.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),j&&(Object.setPrototypeOf?Object.setPrototypeOf(E,j):E.__proto__=j)}var S=1,k=function(E){T(j,E);function j(){return l(this,j),N(this,(j.__proto__||Object.getPrototypeOf(j)).apply(this,arguments))}return c(j,[{key:"attach",value:function(){f(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"attach",this).call(this),this.attributes=new a.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new m.default().insert(this.value(),(0,w.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(C,L){var F=a.default.query(C,a.default.Scope.BLOCK_ATTRIBUTE);F!=null&&this.attributes.attribute(F,L)}},{key:"formatAt",value:function(C,L,F,B){this.format(F,B)}},{key:"insertAt",value:function(C,L,F){if(typeof L=="string"&&L.endsWith(`
`)){var B=a.default.create(A.blotName);this.parent.insertBefore(B,C===0?this:this.next),B.insertAt(0,L.slice(0,-1))}else f(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"insertAt",this).call(this,C,L,F)}}]),j}(a.default.Embed);k.scope=a.default.Scope.BLOCK_BLOT;var A=function(E){T(j,E);function j(P){l(this,j);var C=N(this,(j.__proto__||Object.getPrototypeOf(j)).call(this,P));return C.cache={},C}return c(j,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(a.default.Leaf).reduce(function(C,L){return L.length()===0?C:C.insert(L.value(),_(L))},new m.default).insert(`
`,_(this))),this.cache.delta}},{key:"deleteAt",value:function(C,L){f(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"deleteAt",this).call(this,C,L),this.cache={}}},{key:"formatAt",value:function(C,L,F,B){L<=0||(a.default.query(F,a.default.Scope.BLOCK)?C+L===this.length()&&this.format(F,B):f(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"formatAt",this).call(this,C,Math.min(L,this.length()-C-1),F,B),this.cache={})}},{key:"insertAt",value:function(C,L,F){if(F!=null)return f(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"insertAt",this).call(this,C,L,F);if(L.length!==0){var B=L.split(`
`),q=B.shift();q.length>0&&(C<this.length()-1||this.children.tail==null?f(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"insertAt",this).call(this,Math.min(C,this.length()-1),q):this.children.tail.insertAt(this.children.tail.length(),q),this.cache={});var I=this;B.reduce(function(R,O){return I=I.split(R,!0),I.insertAt(0,O),O.length},C+q.length)}}},{key:"insertBefore",value:function(C,L){var F=this.children.head;f(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"insertBefore",this).call(this,C,L),F instanceof y.default&&F.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=f(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"length",this).call(this)+S),this.cache.length}},{key:"moveChildren",value:function(C,L){f(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"moveChildren",this).call(this,C,L),this.cache={}}},{key:"optimize",value:function(C){f(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"optimize",this).call(this,C),this.cache={}}},{key:"path",value:function(C){return f(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"path",this).call(this,C,!0)}},{key:"removeChild",value:function(C){f(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"removeChild",this).call(this,C),this.cache={}}},{key:"split",value:function(C){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(L&&(C===0||C>=this.length()-S)){var F=this.clone();return C===0?(this.parent.insertBefore(F,this),this):(this.parent.insertBefore(F,this.next),F)}else{var B=f(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"split",this).call(this,C,L);return this.cache={},B}}}]),j}(a.default.Block);A.blotName="block",A.tagName="P",A.defaultChild="break",A.allowedChildren=[h.default,a.default.Embed,u.default];function _(E){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return E==null||(typeof E.formats=="function"&&(j=(0,w.default)(j,E.formats())),E.parent==null||E.parent.blotName=="scroll"||E.parent.statics.scope!==E.statics.scope)?j:_(E.parent,j)}r.bubbleFormats=_,r.BlockEmbed=k,r.default=A},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.overload=r.expandConfig=void 0;var c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},f=function(){function I(R,O){var D=[],M=!0,H=!1,z=void 0;try{for(var U=R[Symbol.iterator](),$;!(M=($=U.next()).done)&&(D.push($.value),!(O&&D.length===O));M=!0);}catch(V){H=!0,z=V}finally{try{!M&&U.return&&U.return()}finally{if(H)throw z}}return D}return function(R,O){if(Array.isArray(R))return R;if(Symbol.iterator in Object(R))return I(R,O);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),b=function(){function I(R,O){for(var D=0;D<O.length;D++){var M=O[D];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(R,M.key,M)}}return function(R,O,D){return O&&I(R.prototype,O),D&&I(R,D),R}}();i(50);var w=i(2),x=_(w),m=i(14),d=_(m),a=i(8),o=_(a),y=i(9),g=_(y),h=i(0),p=_(h),u=i(15),v=_(u),l=i(3),N=_(l),T=i(10),S=_(T),k=i(34),A=_(k);function _(I){return I&&I.__esModule?I:{default:I}}function E(I,R,O){return R in I?Object.defineProperty(I,R,{value:O,enumerable:!0,configurable:!0,writable:!0}):I[R]=O,I}function j(I,R){if(!(I instanceof R))throw new TypeError("Cannot call a class as a function")}var P=(0,S.default)("quill"),C=function(){b(I,null,[{key:"debug",value:function(O){O===!0&&(O="log"),S.default.level(O)}},{key:"find",value:function(O){return O.__quill||p.default.find(O)}},{key:"import",value:function(O){return this.imports[O]==null&&P.error("Cannot import "+O+". Are you sure it was registered?"),this.imports[O]}},{key:"register",value:function(O,D){var M=this,H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof O!="string"){var z=O.attrName||O.blotName;typeof z=="string"?this.register("formats/"+z,O,D):Object.keys(O).forEach(function(U){M.register(U,O[U],D)})}else this.imports[O]!=null&&!H&&P.warn("Overwriting "+O+" with",D),this.imports[O]=D,(O.startsWith("blots/")||O.startsWith("formats/"))&&D.blotName!=="abstract"?p.default.register(D):O.startsWith("modules")&&typeof D.register=="function"&&D.register()}}]);function I(R){var O=this,D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(j(this,I),this.options=L(R,D),this.container=this.options.container,this.container==null)return P.error("Invalid Quill container",R);this.options.debug&&I.debug(this.options.debug);var M=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new o.default,this.scroll=p.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new d.default(this.scroll),this.selection=new v.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(o.default.events.EDITOR_CHANGE,function(z){z===o.default.events.TEXT_CHANGE&&O.root.classList.toggle("ql-blank",O.editor.isBlank())}),this.emitter.on(o.default.events.SCROLL_UPDATE,function(z,U){var $=O.selection.lastRange,V=$&&$.length===0?$.index:void 0;F.call(O,function(){return O.editor.update(null,U,V)},z)});var H=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+M+"<p><br></p></div>");this.setContents(H),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return b(I,[{key:"addContainer",value:function(O){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof O=="string"){var M=O;O=document.createElement("div"),O.classList.add(M)}return this.container.insertBefore(O,D),O}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(O,D,M){var H=this,z=B(O,D,M),U=f(z,4);return O=U[0],D=U[1],M=U[3],F.call(this,function(){return H.editor.deleteText(O,D)},M,O,-1*D)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(O),this.container.classList.toggle("ql-disabled",!O)}},{key:"focus",value:function(){var O=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=O,this.scrollIntoView()}},{key:"format",value:function(O,D){var M=this,H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:o.default.sources.API;return F.call(this,function(){var z=M.getSelection(!0),U=new x.default;if(z==null)return U;if(p.default.query(O,p.default.Scope.BLOCK))U=M.editor.formatLine(z.index,z.length,E({},O,D));else{if(z.length===0)return M.selection.format(O,D),U;U=M.editor.formatText(z.index,z.length,E({},O,D))}return M.setSelection(z,o.default.sources.SILENT),U},H)}},{key:"formatLine",value:function(O,D,M,H,z){var U=this,$=void 0,V=B(O,D,M,H,z),W=f(V,4);return O=W[0],D=W[1],$=W[2],z=W[3],F.call(this,function(){return U.editor.formatLine(O,D,$)},z,O,0)}},{key:"formatText",value:function(O,D,M,H,z){var U=this,$=void 0,V=B(O,D,M,H,z),W=f(V,4);return O=W[0],D=W[1],$=W[2],z=W[3],F.call(this,function(){return U.editor.formatText(O,D,$)},z,O,0)}},{key:"getBounds",value:function(O){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,M=void 0;typeof O=="number"?M=this.selection.getBounds(O,D):M=this.selection.getBounds(O.index,O.length);var H=this.container.getBoundingClientRect();return{bottom:M.bottom-H.top,height:M.height,left:M.left-H.left,right:M.right-H.left,top:M.top-H.top,width:M.width}}},{key:"getContents",value:function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-O,M=B(O,D),H=f(M,2);return O=H[0],D=H[1],this.editor.getContents(O,D)}},{key:"getFormat",value:function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof O=="number"?this.editor.getFormat(O,D):this.editor.getFormat(O.index,O.length)}},{key:"getIndex",value:function(O){return O.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(O){return this.scroll.leaf(O)}},{key:"getLine",value:function(O){return this.scroll.line(O)}},{key:"getLines",value:function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof O!="number"?this.scroll.lines(O.index,O.length):this.scroll.lines(O,D)}},{key:"getModule",value:function(O){return this.theme.modules[O]}},{key:"getSelection",value:function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return O&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-O,M=B(O,D),H=f(M,2);return O=H[0],D=H[1],this.editor.getText(O,D)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(O,D,M){var H=this,z=arguments.length>3&&arguments[3]!==void 0?arguments[3]:I.sources.API;return F.call(this,function(){return H.editor.insertEmbed(O,D,M)},z,O)}},{key:"insertText",value:function(O,D,M,H,z){var U=this,$=void 0,V=B(O,0,M,H,z),W=f(V,4);return O=W[0],$=W[2],z=W[3],F.call(this,function(){return U.editor.insertText(O,D,$)},z,O,D.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(O,D,M){this.clipboard.dangerouslyPasteHTML(O,D,M)}},{key:"removeFormat",value:function(O,D,M){var H=this,z=B(O,D,M),U=f(z,4);return O=U[0],D=U[1],M=U[3],F.call(this,function(){return H.editor.removeFormat(O,D)},M,O)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(O){var D=this,M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o.default.sources.API;return F.call(this,function(){O=new x.default(O);var H=D.getLength(),z=D.editor.deleteText(0,H),U=D.editor.applyDelta(O),$=U.ops[U.ops.length-1];$!=null&&typeof $.insert=="string"&&$.insert[$.insert.length-1]===`
`&&(D.editor.deleteText(D.getLength()-1,1),U.delete(1));var V=z.compose(U);return V},M)}},{key:"setSelection",value:function(O,D,M){if(O==null)this.selection.setRange(null,D||I.sources.API);else{var H=B(O,D,M),z=f(H,4);O=z[0],D=z[1],M=z[3],this.selection.setRange(new u.Range(O,D),M),M!==o.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(O){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o.default.sources.API,M=new x.default().insert(O);return this.setContents(M,D)}},{key:"update",value:function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:o.default.sources.USER,D=this.scroll.update(O);return this.selection.update(O),D}},{key:"updateContents",value:function(O){var D=this,M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o.default.sources.API;return F.call(this,function(){return O=new x.default(O),D.editor.applyDelta(O,M)},M,!0)}}]),I}();C.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},C.events=o.default.events,C.sources=o.default.sources,C.version="1.3.7",C.imports={delta:x.default,parchment:p.default,"core/module":g.default,"core/theme":A.default};function L(I,R){if(R=(0,N.default)(!0,{container:I,modules:{clipboard:!0,keyboard:!0,history:!0}},R),!R.theme||R.theme===C.DEFAULTS.theme)R.theme=A.default;else if(R.theme=C.import("themes/"+R.theme),R.theme==null)throw new Error("Invalid theme "+R.theme+". Did you register it?");var O=(0,N.default)(!0,{},R.theme.DEFAULTS);[O,R].forEach(function(H){H.modules=H.modules||{},Object.keys(H.modules).forEach(function(z){H.modules[z]===!0&&(H.modules[z]={})})});var D=Object.keys(O.modules).concat(Object.keys(R.modules)),M=D.reduce(function(H,z){var U=C.import("modules/"+z);return U==null?P.error("Cannot load "+z+" module. Are you sure you registered it?"):H[z]=U.DEFAULTS||{},H},{});return R.modules!=null&&R.modules.toolbar&&R.modules.toolbar.constructor!==Object&&(R.modules.toolbar={container:R.modules.toolbar}),R=(0,N.default)(!0,{},C.DEFAULTS,{modules:M},O,R),["bounds","container","scrollingContainer"].forEach(function(H){typeof R[H]=="string"&&(R[H]=document.querySelector(R[H]))}),R.modules=Object.keys(R.modules).reduce(function(H,z){return R.modules[z]&&(H[z]=R.modules[z]),H},{}),R}function F(I,R,O,D){if(this.options.strict&&!this.isEnabled()&&R===o.default.sources.USER)return new x.default;var M=O==null?null:this.getSelection(),H=this.editor.delta,z=I();if(M!=null&&(O===!0&&(O=M.index),D==null?M=q(M,z,R):D!==0&&(M=q(M,O,D,R)),this.setSelection(M,o.default.sources.SILENT)),z.length()>0){var U,$=[o.default.events.TEXT_CHANGE,z,H,R];if((U=this.emitter).emit.apply(U,[o.default.events.EDITOR_CHANGE].concat($)),R!==o.default.sources.SILENT){var V;(V=this.emitter).emit.apply(V,$)}}return z}function B(I,R,O,D,M){var H={};return typeof I.index=="number"&&typeof I.length=="number"?typeof R!="number"?(M=D,D=O,O=R,R=I.length,I=I.index):(R=I.length,I=I.index):typeof R!="number"&&(M=D,D=O,O=R,R=0),(typeof O>"u"?"undefined":c(O))==="object"?(H=O,M=D):typeof O=="string"&&(D!=null?H[O]=D:M=O),M=M||o.default.sources.API,[I,R,H,M]}function q(I,R,O,D){if(I==null)return null;var M=void 0,H=void 0;if(R instanceof x.default){var z=[I.index,I.index+I.length].map(function(W){return R.transformPosition(W,D!==o.default.sources.USER)}),U=f(z,2);M=U[0],H=U[1]}else{var $=[I.index,I.index+I.length].map(function(W){return W<R||W===R&&D===o.default.sources.USER?W:O>=0?W+O:Math.max(R,W+O)}),V=f($,2);M=V[0],H=V[1]}return new u.Range(M,H-M)}r.expandConfig=L,r.overload=B,r.default=C},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var c=function(){function h(p,u){for(var v=0;v<u.length;v++){var l=u[v];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(p,l.key,l)}}return function(p,u,v){return u&&h(p.prototype,u),v&&h(p,v),p}}(),f=function h(p,u,v){p===null&&(p=Function.prototype);var l=Object.getOwnPropertyDescriptor(p,u);if(l===void 0){var N=Object.getPrototypeOf(p);return N===null?void 0:h(N,u,v)}else{if("value"in l)return l.value;var T=l.get;return T===void 0?void 0:T.call(v)}},b=i(7),w=d(b),x=i(0),m=d(x);function d(h){return h&&h.__esModule?h:{default:h}}function a(h,p){if(!(h instanceof p))throw new TypeError("Cannot call a class as a function")}function o(h,p){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:h}function y(h,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);h.prototype=Object.create(p&&p.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(h,p):h.__proto__=p)}var g=function(h){y(p,h);function p(){return a(this,p),o(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return c(p,[{key:"formatAt",value:function(v,l,N,T){if(p.compare(this.statics.blotName,N)<0&&m.default.query(N,m.default.Scope.BLOT)){var S=this.isolate(v,l);T&&S.wrap(N,T)}else f(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"formatAt",this).call(this,v,l,N,T)}},{key:"optimize",value:function(v){if(f(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"optimize",this).call(this,v),this.parent instanceof p&&p.compare(this.statics.blotName,this.parent.statics.blotName)>0){var l=this.parent.isolate(this.offset(),this.length());this.moveChildren(l),l.wrap(this)}}}],[{key:"compare",value:function(v,l){var N=p.order.indexOf(v),T=p.order.indexOf(l);return N>=0||T>=0?N-T:v===l?0:v<l?-1:1}}]),p}(m.default.Inline);g.allowedChildren=[g,m.default.Embed,w.default],g.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],r.default=g},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var c=i(0),f=b(c);function b(a){return a&&a.__esModule?a:{default:a}}function w(a,o){if(!(a instanceof o))throw new TypeError("Cannot call a class as a function")}function x(a,o){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&(typeof o=="object"||typeof o=="function")?o:a}function m(a,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof o);a.prototype=Object.create(o&&o.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(a,o):a.__proto__=o)}var d=function(a){m(o,a);function o(){return w(this,o),x(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}return o}(f.default.Text);r.default=d},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var c=function(){function u(v,l){for(var N=0;N<l.length;N++){var T=l[N];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(v,T.key,T)}}return function(v,l,N){return l&&u(v.prototype,l),N&&u(v,N),v}}(),f=function u(v,l,N){v===null&&(v=Function.prototype);var T=Object.getOwnPropertyDescriptor(v,l);if(T===void 0){var S=Object.getPrototypeOf(v);return S===null?void 0:u(S,l,N)}else{if("value"in T)return T.value;var k=T.get;return k===void 0?void 0:k.call(N)}},b=i(54),w=d(b),x=i(10),m=d(x);function d(u){return u&&u.__esModule?u:{default:u}}function a(u,v){if(!(u instanceof v))throw new TypeError("Cannot call a class as a function")}function o(u,v){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:u}function y(u,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);u.prototype=Object.create(v&&v.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(u,v):u.__proto__=v)}var g=(0,m.default)("quill:events"),h=["selectionchange","mousedown","mouseup","click"];h.forEach(function(u){document.addEventListener(u,function(){for(var v=arguments.length,l=Array(v),N=0;N<v;N++)l[N]=arguments[N];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(T){if(T.__quill&&T.__quill.emitter){var S;(S=T.__quill.emitter).handleDOM.apply(S,l)}})})});var p=function(u){y(v,u);function v(){a(this,v);var l=o(this,(v.__proto__||Object.getPrototypeOf(v)).call(this));return l.listeners={},l.on("error",g.error),l}return c(v,[{key:"emit",value:function(){g.log.apply(g,arguments),f(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(N){for(var T=arguments.length,S=Array(T>1?T-1:0),k=1;k<T;k++)S[k-1]=arguments[k];(this.listeners[N.type]||[]).forEach(function(A){var _=A.node,E=A.handler;(N.target===_||_.contains(N.target))&&E.apply(void 0,[N].concat(S))})}},{key:"listenDOM",value:function(N,T,S){this.listeners[N]||(this.listeners[N]=[]),this.listeners[N].push({node:T,handler:S})}}]),v}(w.default);p.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},p.sources={API:"api",SILENT:"silent",USER:"user"},r.default=p},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});function c(b,w){if(!(b instanceof w))throw new TypeError("Cannot call a class as a function")}var f=function b(w){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};c(this,b),this.quill=w,this.options=x};f.DEFAULTS={},r.default=f},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var c=["error","warn","log","info"],f="warn";function b(x){if(c.indexOf(x)<=c.indexOf(f)){for(var m,d=arguments.length,a=Array(d>1?d-1:0),o=1;o<d;o++)a[o-1]=arguments[o];(m=console)[x].apply(m,a)}}function w(x){return c.reduce(function(m,d){return m[d]=b.bind(console,d,x),m},{})}b.level=w.level=function(x){f=x},r.default=w},function(n,r,i){var c=Array.prototype.slice,f=i(52),b=i(53),w=n.exports=function(a,o,y){return y||(y={}),a===o?!0:a instanceof Date&&o instanceof Date?a.getTime()===o.getTime():!a||!o||typeof a!="object"&&typeof o!="object"?y.strict?a===o:a==o:d(a,o,y)};function x(a){return a==null}function m(a){return!(!a||typeof a!="object"||typeof a.length!="number"||typeof a.copy!="function"||typeof a.slice!="function"||a.length>0&&typeof a[0]!="number")}function d(a,o,y){var g,h;if(x(a)||x(o)||a.prototype!==o.prototype)return!1;if(b(a))return b(o)?(a=c.call(a),o=c.call(o),w(a,o,y)):!1;if(m(a)){if(!m(o)||a.length!==o.length)return!1;for(g=0;g<a.length;g++)if(a[g]!==o[g])return!1;return!0}try{var p=f(a),u=f(o)}catch{return!1}if(p.length!=u.length)return!1;for(p.sort(),u.sort(),g=p.length-1;g>=0;g--)if(p[g]!=u[g])return!1;for(g=p.length-1;g>=0;g--)if(h=p[g],!w(a[h],o[h],y))return!1;return typeof a==typeof o}},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var c=i(1),f=function(){function b(w,x,m){m===void 0&&(m={}),this.attrName=w,this.keyName=x;var d=c.Scope.TYPE&c.Scope.ATTRIBUTE;m.scope!=null?this.scope=m.scope&c.Scope.LEVEL|d:this.scope=c.Scope.ATTRIBUTE,m.whitelist!=null&&(this.whitelist=m.whitelist)}return b.keys=function(w){return[].map.call(w.attributes,function(x){return x.name})},b.prototype.add=function(w,x){return this.canAdd(w,x)?(w.setAttribute(this.keyName,x),!0):!1},b.prototype.canAdd=function(w,x){var m=c.query(w,c.Scope.BLOT&(this.scope|c.Scope.TYPE));return m==null?!1:this.whitelist==null?!0:typeof x=="string"?this.whitelist.indexOf(x.replace(/["']/g,""))>-1:this.whitelist.indexOf(x)>-1},b.prototype.remove=function(w){w.removeAttribute(this.keyName)},b.prototype.value=function(w){var x=w.getAttribute(this.keyName);return this.canAdd(w,x)&&x?x:""},b}();r.default=f},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Code=void 0;var c=function(){function k(A,_){var E=[],j=!0,P=!1,C=void 0;try{for(var L=A[Symbol.iterator](),F;!(j=(F=L.next()).done)&&(E.push(F.value),!(_&&E.length===_));j=!0);}catch(B){P=!0,C=B}finally{try{!j&&L.return&&L.return()}finally{if(P)throw C}}return E}return function(A,_){if(Array.isArray(A))return A;if(Symbol.iterator in Object(A))return k(A,_);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f=function(){function k(A,_){for(var E=0;E<_.length;E++){var j=_[E];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(A,j.key,j)}}return function(A,_,E){return _&&k(A.prototype,_),E&&k(A,E),A}}(),b=function k(A,_,E){A===null&&(A=Function.prototype);var j=Object.getOwnPropertyDescriptor(A,_);if(j===void 0){var P=Object.getPrototypeOf(A);return P===null?void 0:k(P,_,E)}else{if("value"in j)return j.value;var C=j.get;return C===void 0?void 0:C.call(E)}},w=i(2),x=u(w),m=i(0),d=u(m),a=i(4),o=u(a),y=i(6),g=u(y),h=i(7),p=u(h);function u(k){return k&&k.__esModule?k:{default:k}}function v(k,A){if(!(k instanceof A))throw new TypeError("Cannot call a class as a function")}function l(k,A){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:k}function N(k,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);k.prototype=Object.create(A&&A.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(k,A):k.__proto__=A)}var T=function(k){N(A,k);function A(){return v(this,A),l(this,(A.__proto__||Object.getPrototypeOf(A)).apply(this,arguments))}return A}(g.default);T.blotName="code",T.tagName="CODE";var S=function(k){N(A,k);function A(){return v(this,A),l(this,(A.__proto__||Object.getPrototypeOf(A)).apply(this,arguments))}return f(A,[{key:"delta",value:function(){var E=this,j=this.domNode.textContent;return j.endsWith(`
`)&&(j=j.slice(0,-1)),j.split(`
`).reduce(function(P,C){return P.insert(C).insert(`
`,E.formats())},new x.default)}},{key:"format",value:function(E,j){if(!(E===this.statics.blotName&&j)){var P=this.descendant(p.default,this.length()-1),C=c(P,1),L=C[0];L!=null&&L.deleteAt(L.length()-1,1),b(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"format",this).call(this,E,j)}}},{key:"formatAt",value:function(E,j,P,C){if(j!==0&&!(d.default.query(P,d.default.Scope.BLOCK)==null||P===this.statics.blotName&&C===this.statics.formats(this.domNode))){var L=this.newlineIndex(E);if(!(L<0||L>=E+j)){var F=this.newlineIndex(E,!0)+1,B=L-F+1,q=this.isolate(F,B),I=q.next;q.format(P,C),I instanceof A&&I.formatAt(0,E-F+j-B,P,C)}}}},{key:"insertAt",value:function(E,j,P){if(P==null){var C=this.descendant(p.default,E),L=c(C,2),F=L[0],B=L[1];F.insertAt(B,j)}}},{key:"length",value:function(){var E=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?E:E+1}},{key:"newlineIndex",value:function(E){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(j)return this.domNode.textContent.slice(0,E).lastIndexOf(`
`);var P=this.domNode.textContent.slice(E).indexOf(`
`);return P>-1?E+P:-1}},{key:"optimize",value:function(E){this.domNode.textContent.endsWith(`
`)||this.appendChild(d.default.create("text",`
`)),b(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"optimize",this).call(this,E);var j=this.next;j!=null&&j.prev===this&&j.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===j.statics.formats(j.domNode)&&(j.optimize(E),j.moveChildren(this),j.remove())}},{key:"replace",value:function(E){b(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"replace",this).call(this,E),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(j){var P=d.default.find(j);P==null?j.parentNode.removeChild(j):P instanceof d.default.Embed?P.remove():P.unwrap()})}}],[{key:"create",value:function(E){var j=b(A.__proto__||Object.getPrototypeOf(A),"create",this).call(this,E);return j.setAttribute("spellcheck",!1),j}},{key:"formats",value:function(){return!0}}]),A}(o.default);S.blotName="code-block",S.tagName="PRE",S.TAB="  ",r.Code=T,r.default=S},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},f=function(){function I(R,O){var D=[],M=!0,H=!1,z=void 0;try{for(var U=R[Symbol.iterator](),$;!(M=($=U.next()).done)&&(D.push($.value),!(O&&D.length===O));M=!0);}catch(V){H=!0,z=V}finally{try{!M&&U.return&&U.return()}finally{if(H)throw z}}return D}return function(R,O){if(Array.isArray(R))return R;if(Symbol.iterator in Object(R))return I(R,O);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),b=function(){function I(R,O){for(var D=0;D<O.length;D++){var M=O[D];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(R,M.key,M)}}return function(R,O,D){return O&&I(R.prototype,O),D&&I(R,D),R}}(),w=i(2),x=j(w),m=i(20),d=j(m),a=i(0),o=j(a),y=i(13),g=j(y),h=i(24),p=j(h),u=i(4),v=j(u),l=i(16),N=j(l),T=i(21),S=j(T),k=i(11),A=j(k),_=i(3),E=j(_);function j(I){return I&&I.__esModule?I:{default:I}}function P(I,R,O){return R in I?Object.defineProperty(I,R,{value:O,enumerable:!0,configurable:!0,writable:!0}):I[R]=O,I}function C(I,R){if(!(I instanceof R))throw new TypeError("Cannot call a class as a function")}var L=/^[ -~]*$/,F=function(){function I(R){C(this,I),this.scroll=R,this.delta=this.getDelta()}return b(I,[{key:"applyDelta",value:function(O){var D=this,M=!1;this.scroll.update();var H=this.scroll.length();return this.scroll.batchStart(),O=q(O),O.reduce(function(z,U){var $=U.retain||U.delete||U.insert.length||1,V=U.attributes||{};if(U.insert!=null){if(typeof U.insert=="string"){var W=U.insert;W.endsWith(`
`)&&M&&(M=!1,W=W.slice(0,-1)),z>=H&&!W.endsWith(`
`)&&(M=!0),D.scroll.insertAt(z,W);var Z=D.scroll.line(z),Q=f(Z,2),ne=Q[0],oe=Q[1],he=(0,E.default)({},(0,u.bubbleFormats)(ne));if(ne instanceof v.default){var pe=ne.descendant(o.default.Leaf,oe),we=f(pe,1),ve=we[0];he=(0,E.default)(he,(0,u.bubbleFormats)(ve))}V=d.default.attributes.diff(he,V)||{}}else if(c(U.insert)==="object"){var J=Object.keys(U.insert)[0];if(J==null)return z;D.scroll.insertAt(z,J,U.insert[J])}H+=$}return Object.keys(V).forEach(function(Y){D.scroll.formatAt(z,$,Y,V[Y])}),z+$},0),O.reduce(function(z,U){return typeof U.delete=="number"?(D.scroll.deleteAt(z,U.delete),z):z+(U.retain||U.insert.length||1)},0),this.scroll.batchEnd(),this.update(O)}},{key:"deleteText",value:function(O,D){return this.scroll.deleteAt(O,D),this.update(new x.default().retain(O).delete(D))}},{key:"formatLine",value:function(O,D){var M=this,H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(H).forEach(function(z){if(!(M.scroll.whitelist!=null&&!M.scroll.whitelist[z])){var U=M.scroll.lines(O,Math.max(D,1)),$=D;U.forEach(function(V){var W=V.length();if(!(V instanceof g.default))V.format(z,H[z]);else{var Z=O-V.offset(M.scroll),Q=V.newlineIndex(Z+$)-Z+1;V.formatAt(Z,Q,z,H[z])}$-=W})}}),this.scroll.optimize(),this.update(new x.default().retain(O).retain(D,(0,S.default)(H)))}},{key:"formatText",value:function(O,D){var M=this,H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(H).forEach(function(z){M.scroll.formatAt(O,D,z,H[z])}),this.update(new x.default().retain(O).retain(D,(0,S.default)(H)))}},{key:"getContents",value:function(O,D){return this.delta.slice(O,O+D)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(O,D){return O.concat(D.delta())},new x.default)}},{key:"getFormat",value:function(O){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,M=[],H=[];D===0?this.scroll.path(O).forEach(function(U){var $=f(U,1),V=$[0];V instanceof v.default?M.push(V):V instanceof o.default.Leaf&&H.push(V)}):(M=this.scroll.lines(O,D),H=this.scroll.descendants(o.default.Leaf,O,D));var z=[M,H].map(function(U){if(U.length===0)return{};for(var $=(0,u.bubbleFormats)(U.shift());Object.keys($).length>0;){var V=U.shift();if(V==null)return $;$=B((0,u.bubbleFormats)(V),$)}return $});return E.default.apply(E.default,z)}},{key:"getText",value:function(O,D){return this.getContents(O,D).filter(function(M){return typeof M.insert=="string"}).map(function(M){return M.insert}).join("")}},{key:"insertEmbed",value:function(O,D,M){return this.scroll.insertAt(O,D,M),this.update(new x.default().retain(O).insert(P({},D,M)))}},{key:"insertText",value:function(O,D){var M=this,H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return D=D.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(O,D),Object.keys(H).forEach(function(z){M.scroll.formatAt(O,D.length,z,H[z])}),this.update(new x.default().retain(O).insert(D,(0,S.default)(H)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var O=this.scroll.children.head;return O.statics.blotName!==v.default.blotName||O.children.length>1?!1:O.children.head instanceof N.default}},{key:"removeFormat",value:function(O,D){var M=this.getText(O,D),H=this.scroll.line(O+D),z=f(H,2),U=z[0],$=z[1],V=0,W=new x.default;U!=null&&(U instanceof g.default?V=U.newlineIndex($)-$+1:V=U.length()-$,W=U.delta().slice($,$+V-1).insert(`
`));var Z=this.getContents(O,D+V),Q=Z.diff(new x.default().insert(M).concat(W)),ne=new x.default().retain(O).concat(Q);return this.applyDelta(ne)}},{key:"update",value:function(O){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,H=this.delta;if(D.length===1&&D[0].type==="characterData"&&D[0].target.data.match(L)&&o.default.find(D[0].target)){var z=o.default.find(D[0].target),U=(0,u.bubbleFormats)(z),$=z.offset(this.scroll),V=D[0].oldValue.replace(p.default.CONTENTS,""),W=new x.default().insert(V),Z=new x.default().insert(z.value()),Q=new x.default().retain($).concat(W.diff(Z,M));O=Q.reduce(function(ne,oe){return oe.insert?ne.insert(oe.insert,U):ne.push(oe)},new x.default),this.delta=H.compose(O)}else this.delta=this.getDelta(),(!O||!(0,A.default)(H.compose(O),this.delta))&&(O=H.diff(this.delta,M));return O}}]),I}();function B(I,R){return Object.keys(R).reduce(function(O,D){return I[D]==null||(R[D]===I[D]?O[D]=R[D]:Array.isArray(R[D])?R[D].indexOf(I[D])<0&&(O[D]=R[D].concat([I[D]])):O[D]=[R[D],I[D]]),O},{})}function q(I){return I.reduce(function(R,O){if(O.insert===1){var D=(0,S.default)(O.attributes);return delete D.image,R.insert({image:O.attributes.image},D)}if(O.attributes!=null&&(O.attributes.list===!0||O.attributes.bullet===!0)&&(O=(0,S.default)(O),O.attributes.list?O.attributes.list="ordered":(O.attributes.list="bullet",delete O.attributes.bullet)),typeof O.insert=="string"){var M=O.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return R.insert(M,O.attributes)}return R.push(O)},new x.default)}r.default=F},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Range=void 0;var c=function(){function k(A,_){var E=[],j=!0,P=!1,C=void 0;try{for(var L=A[Symbol.iterator](),F;!(j=(F=L.next()).done)&&(E.push(F.value),!(_&&E.length===_));j=!0);}catch(B){P=!0,C=B}finally{try{!j&&L.return&&L.return()}finally{if(P)throw C}}return E}return function(A,_){if(Array.isArray(A))return A;if(Symbol.iterator in Object(A))return k(A,_);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f=function(){function k(A,_){for(var E=0;E<_.length;E++){var j=_[E];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(A,j.key,j)}}return function(A,_,E){return _&&k(A.prototype,_),E&&k(A,E),A}}(),b=i(0),w=p(b),x=i(21),m=p(x),d=i(11),a=p(d),o=i(8),y=p(o),g=i(10),h=p(g);function p(k){return k&&k.__esModule?k:{default:k}}function u(k){if(Array.isArray(k)){for(var A=0,_=Array(k.length);A<k.length;A++)_[A]=k[A];return _}else return Array.from(k)}function v(k,A){if(!(k instanceof A))throw new TypeError("Cannot call a class as a function")}var l=(0,h.default)("quill:selection"),N=function k(A){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;v(this,k),this.index=A,this.length=_},T=function(){function k(A,_){var E=this;v(this,k),this.emitter=_,this.scroll=A,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=w.default.create("cursor",this),this.lastRange=this.savedRange=new N(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){E.mouseDown||setTimeout(E.update.bind(E,y.default.sources.USER),1)}),this.emitter.on(y.default.events.EDITOR_CHANGE,function(j,P){j===y.default.events.TEXT_CHANGE&&P.length()>0&&E.update(y.default.sources.SILENT)}),this.emitter.on(y.default.events.SCROLL_BEFORE_UPDATE,function(){if(E.hasFocus()){var j=E.getNativeRange();j!=null&&j.start.node!==E.cursor.textNode&&E.emitter.once(y.default.events.SCROLL_UPDATE,function(){try{E.setNativeRange(j.start.node,j.start.offset,j.end.node,j.end.offset)}catch{}})}}),this.emitter.on(y.default.events.SCROLL_OPTIMIZE,function(j,P){if(P.range){var C=P.range,L=C.startNode,F=C.startOffset,B=C.endNode,q=C.endOffset;E.setNativeRange(L,F,B,q)}}),this.update(y.default.sources.SILENT)}return f(k,[{key:"handleComposition",value:function(){var _=this;this.root.addEventListener("compositionstart",function(){_.composing=!0}),this.root.addEventListener("compositionend",function(){if(_.composing=!1,_.cursor.parent){var E=_.cursor.restore();if(!E)return;setTimeout(function(){_.setNativeRange(E.startNode,E.startOffset,E.endNode,E.endOffset)},1)}})}},{key:"handleDragging",value:function(){var _=this;this.emitter.listenDOM("mousedown",document.body,function(){_.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){_.mouseDown=!1,_.update(y.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(_,E){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[_])){this.scroll.update();var j=this.getNativeRange();if(!(j==null||!j.native.collapsed||w.default.query(_,w.default.Scope.BLOCK))){if(j.start.node!==this.cursor.textNode){var P=w.default.find(j.start.node,!1);if(P==null)return;if(P instanceof w.default.Leaf){var C=P.split(j.start.offset);P.parent.insertBefore(this.cursor,C)}else P.insertBefore(this.cursor,j.start.node);this.cursor.attach()}this.cursor.format(_,E),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(_){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,j=this.scroll.length();_=Math.min(_,j-1),E=Math.min(_+E,j-1)-_;var P=void 0,C=this.scroll.leaf(_),L=c(C,2),F=L[0],B=L[1];if(F==null)return null;var q=F.position(B,!0),I=c(q,2);P=I[0],B=I[1];var R=document.createRange();if(E>0){R.setStart(P,B);var O=this.scroll.leaf(_+E),D=c(O,2);if(F=D[0],B=D[1],F==null)return null;var M=F.position(B,!0),H=c(M,2);return P=H[0],B=H[1],R.setEnd(P,B),R.getBoundingClientRect()}else{var z="left",U=void 0;return P instanceof Text?(B<P.data.length?(R.setStart(P,B),R.setEnd(P,B+1)):(R.setStart(P,B-1),R.setEnd(P,B),z="right"),U=R.getBoundingClientRect()):(U=F.domNode.getBoundingClientRect(),B>0&&(z="right")),{bottom:U.top+U.height,height:U.height,left:U[z],right:U[z],top:U.top,width:0}}}},{key:"getNativeRange",value:function(){var _=document.getSelection();if(_==null||_.rangeCount<=0)return null;var E=_.getRangeAt(0);if(E==null)return null;var j=this.normalizeNative(E);return l.info("getNativeRange",j),j}},{key:"getRange",value:function(){var _=this.getNativeRange();if(_==null)return[null,null];var E=this.normalizedToRange(_);return[E,_]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(_){var E=this,j=[[_.start.node,_.start.offset]];_.native.collapsed||j.push([_.end.node,_.end.offset]);var P=j.map(function(F){var B=c(F,2),q=B[0],I=B[1],R=w.default.find(q,!0),O=R.offset(E.scroll);return I===0?O:R instanceof w.default.Container?O+R.length():O+R.index(q,I)}),C=Math.min(Math.max.apply(Math,u(P)),this.scroll.length()-1),L=Math.min.apply(Math,[C].concat(u(P)));return new N(L,C-L)}},{key:"normalizeNative",value:function(_){if(!S(this.root,_.startContainer)||!_.collapsed&&!S(this.root,_.endContainer))return null;var E={start:{node:_.startContainer,offset:_.startOffset},end:{node:_.endContainer,offset:_.endOffset},native:_};return[E.start,E.end].forEach(function(j){for(var P=j.node,C=j.offset;!(P instanceof Text)&&P.childNodes.length>0;)if(P.childNodes.length>C)P=P.childNodes[C],C=0;else if(P.childNodes.length===C)P=P.lastChild,C=P instanceof Text?P.data.length:P.childNodes.length+1;else break;j.node=P,j.offset=C}),E}},{key:"rangeToNative",value:function(_){var E=this,j=_.collapsed?[_.index]:[_.index,_.index+_.length],P=[],C=this.scroll.length();return j.forEach(function(L,F){L=Math.min(C-1,L);var B=void 0,q=E.scroll.leaf(L),I=c(q,2),R=I[0],O=I[1],D=R.position(O,F!==0),M=c(D,2);B=M[0],O=M[1],P.push(B,O)}),P.length<2&&(P=P.concat(P)),P}},{key:"scrollIntoView",value:function(_){var E=this.lastRange;if(E!=null){var j=this.getBounds(E.index,E.length);if(j!=null){var P=this.scroll.length()-1,C=this.scroll.line(Math.min(E.index,P)),L=c(C,1),F=L[0],B=F;if(E.length>0){var q=this.scroll.line(Math.min(E.index+E.length,P)),I=c(q,1);B=I[0]}if(!(F==null||B==null)){var R=_.getBoundingClientRect();j.top<R.top?_.scrollTop-=R.top-j.top:j.bottom>R.bottom&&(_.scrollTop+=j.bottom-R.bottom)}}}}},{key:"setNativeRange",value:function(_,E){var j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:_,P=arguments.length>3&&arguments[3]!==void 0?arguments[3]:E,C=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(l.info("setNativeRange",_,E,j,P),!(_!=null&&(this.root.parentNode==null||_.parentNode==null||j.parentNode==null))){var L=document.getSelection();if(L!=null)if(_!=null){this.hasFocus()||this.root.focus();var F=(this.getNativeRange()||{}).native;if(F==null||C||_!==F.startContainer||E!==F.startOffset||j!==F.endContainer||P!==F.endOffset){_.tagName=="BR"&&(E=[].indexOf.call(_.parentNode.childNodes,_),_=_.parentNode),j.tagName=="BR"&&(P=[].indexOf.call(j.parentNode.childNodes,j),j=j.parentNode);var B=document.createRange();B.setStart(_,E),B.setEnd(j,P),L.removeAllRanges(),L.addRange(B)}}else L.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(_){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:y.default.sources.API;if(typeof E=="string"&&(j=E,E=!1),l.info("setRange",_),_!=null){var P=this.rangeToNative(_);this.setNativeRange.apply(this,u(P).concat([E]))}else this.setNativeRange(null);this.update(j)}},{key:"update",value:function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:y.default.sources.USER,E=this.lastRange,j=this.getRange(),P=c(j,2),C=P[0],L=P[1];if(this.lastRange=C,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,a.default)(E,this.lastRange)){var F;!this.composing&&L!=null&&L.native.collapsed&&L.start.node!==this.cursor.textNode&&this.cursor.restore();var B=[y.default.events.SELECTION_CHANGE,(0,m.default)(this.lastRange),(0,m.default)(E),_];if((F=this.emitter).emit.apply(F,[y.default.events.EDITOR_CHANGE].concat(B)),_!==y.default.sources.SILENT){var q;(q=this.emitter).emit.apply(q,B)}}}}]),k}();function S(k,A){try{A.parentNode}catch{return!1}return A instanceof Text&&(A=A.parentNode),k.contains(A)}r.Range=N,r.default=T},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var c=function(){function y(g,h){for(var p=0;p<h.length;p++){var u=h[p];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(g,u.key,u)}}return function(g,h,p){return h&&y(g.prototype,h),p&&y(g,p),g}}(),f=function y(g,h,p){g===null&&(g=Function.prototype);var u=Object.getOwnPropertyDescriptor(g,h);if(u===void 0){var v=Object.getPrototypeOf(g);return v===null?void 0:y(v,h,p)}else{if("value"in u)return u.value;var l=u.get;return l===void 0?void 0:l.call(p)}},b=i(0),w=x(b);function x(y){return y&&y.__esModule?y:{default:y}}function m(y,g){if(!(y instanceof g))throw new TypeError("Cannot call a class as a function")}function d(y,g){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:y}function a(y,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);y.prototype=Object.create(g&&g.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(y,g):y.__proto__=g)}var o=function(y){a(g,y);function g(){return m(this,g),d(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return c(g,[{key:"insertInto",value:function(p,u){p.children.length===0?f(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"insertInto",this).call(this,p,u):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),g}(w.default.Embed);o.blotName="break",o.tagName="BR",r.default=o},function(n,r,i){var c=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,o){a.__proto__=o}||function(a,o){for(var y in o)o.hasOwnProperty(y)&&(a[y]=o[y])};return function(a,o){d(a,o);function y(){this.constructor=a}a.prototype=o===null?Object.create(o):(y.prototype=o.prototype,new y)}}();Object.defineProperty(r,"__esModule",{value:!0});var f=i(44),b=i(30),w=i(1),x=function(d){c(a,d);function a(o){var y=d.call(this,o)||this;return y.build(),y}return a.prototype.appendChild=function(o){this.insertBefore(o)},a.prototype.attach=function(){d.prototype.attach.call(this),this.children.forEach(function(o){o.attach()})},a.prototype.build=function(){var o=this;this.children=new f.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(y){try{var g=m(y);o.insertBefore(g,o.children.head||void 0)}catch(h){if(h instanceof w.ParchmentError)return;throw h}})},a.prototype.deleteAt=function(o,y){if(o===0&&y===this.length())return this.remove();this.children.forEachAt(o,y,function(g,h,p){g.deleteAt(h,p)})},a.prototype.descendant=function(o,y){var g=this.children.find(y),h=g[0],p=g[1];return o.blotName==null&&o(h)||o.blotName!=null&&h instanceof o?[h,p]:h instanceof a?h.descendant(o,p):[null,-1]},a.prototype.descendants=function(o,y,g){y===void 0&&(y=0),g===void 0&&(g=Number.MAX_VALUE);var h=[],p=g;return this.children.forEachAt(y,g,function(u,v,l){(o.blotName==null&&o(u)||o.blotName!=null&&u instanceof o)&&h.push(u),u instanceof a&&(h=h.concat(u.descendants(o,v,p))),p-=l}),h},a.prototype.detach=function(){this.children.forEach(function(o){o.detach()}),d.prototype.detach.call(this)},a.prototype.formatAt=function(o,y,g,h){this.children.forEachAt(o,y,function(p,u,v){p.formatAt(u,v,g,h)})},a.prototype.insertAt=function(o,y,g){var h=this.children.find(o),p=h[0],u=h[1];if(p)p.insertAt(u,y,g);else{var v=g==null?w.create("text",y):w.create(y,g);this.appendChild(v)}},a.prototype.insertBefore=function(o,y){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(g){return o instanceof g}))throw new w.ParchmentError("Cannot insert "+o.statics.blotName+" into "+this.statics.blotName);o.insertInto(this,y)},a.prototype.length=function(){return this.children.reduce(function(o,y){return o+y.length()},0)},a.prototype.moveChildren=function(o,y){this.children.forEach(function(g){o.insertBefore(g,y)})},a.prototype.optimize=function(o){if(d.prototype.optimize.call(this,o),this.children.length===0)if(this.statics.defaultChild!=null){var y=w.create(this.statics.defaultChild);this.appendChild(y),y.optimize(o)}else this.remove()},a.prototype.path=function(o,y){y===void 0&&(y=!1);var g=this.children.find(o,y),h=g[0],p=g[1],u=[[this,o]];return h instanceof a?u.concat(h.path(p,y)):(h!=null&&u.push([h,p]),u)},a.prototype.removeChild=function(o){this.children.remove(o)},a.prototype.replace=function(o){o instanceof a&&o.moveChildren(this),d.prototype.replace.call(this,o)},a.prototype.split=function(o,y){if(y===void 0&&(y=!1),!y){if(o===0)return this;if(o===this.length())return this.next}var g=this.clone();return this.parent.insertBefore(g,this.next),this.children.forEachAt(o,this.length(),function(h,p,u){h=h.split(p,y),g.appendChild(h)}),g},a.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},a.prototype.update=function(o,y){var g=this,h=[],p=[];o.forEach(function(u){u.target===g.domNode&&u.type==="childList"&&(h.push.apply(h,u.addedNodes),p.push.apply(p,u.removedNodes))}),p.forEach(function(u){if(!(u.parentNode!=null&&u.tagName!=="IFRAME"&&document.body.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var v=w.find(u);v!=null&&(v.domNode.parentNode==null||v.domNode.parentNode===g.domNode)&&v.detach()}}),h.filter(function(u){return u.parentNode==g.domNode}).sort(function(u,v){return u===v?0:u.compareDocumentPosition(v)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(u){var v=null;u.nextSibling!=null&&(v=w.find(u.nextSibling));var l=m(u);(l.next!=v||l.next==null)&&(l.parent!=null&&l.parent.removeChild(g),g.insertBefore(l,v||void 0))})},a}(b.default);function m(d){var a=w.find(d);if(a==null)try{a=w.create(d)}catch{a=w.create(w.Scope.INLINE),[].slice.call(d.childNodes).forEach(function(y){a.domNode.appendChild(y)}),d.parentNode&&d.parentNode.replaceChild(a.domNode,d),a.attach()}return a}r.default=x},function(n,r,i){var c=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,o){a.__proto__=o}||function(a,o){for(var y in o)o.hasOwnProperty(y)&&(a[y]=o[y])};return function(a,o){d(a,o);function y(){this.constructor=a}a.prototype=o===null?Object.create(o):(y.prototype=o.prototype,new y)}}();Object.defineProperty(r,"__esModule",{value:!0});var f=i(12),b=i(31),w=i(17),x=i(1),m=function(d){c(a,d);function a(o){var y=d.call(this,o)||this;return y.attributes=new b.default(y.domNode),y}return a.formats=function(o){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return o.tagName.toLowerCase()},a.prototype.format=function(o,y){var g=x.query(o);g instanceof f.default?this.attributes.attribute(g,y):y&&g!=null&&(o!==this.statics.blotName||this.formats()[o]!==y)&&this.replaceWith(o,y)},a.prototype.formats=function(){var o=this.attributes.values(),y=this.statics.formats(this.domNode);return y!=null&&(o[this.statics.blotName]=y),o},a.prototype.replaceWith=function(o,y){var g=d.prototype.replaceWith.call(this,o,y);return this.attributes.copy(g),g},a.prototype.update=function(o,y){var g=this;d.prototype.update.call(this,o,y),o.some(function(h){return h.target===g.domNode&&h.type==="attributes"})&&this.attributes.build()},a.prototype.wrap=function(o,y){var g=d.prototype.wrap.call(this,o,y);return g instanceof a&&g.statics.scope===this.statics.scope&&this.attributes.move(g),g},a}(w.default);r.default=m},function(n,r,i){var c=this&&this.__extends||function(){var x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,d){m.__proto__=d}||function(m,d){for(var a in d)d.hasOwnProperty(a)&&(m[a]=d[a])};return function(m,d){x(m,d);function a(){this.constructor=m}m.prototype=d===null?Object.create(d):(a.prototype=d.prototype,new a)}}();Object.defineProperty(r,"__esModule",{value:!0});var f=i(30),b=i(1),w=function(x){c(m,x);function m(){return x!==null&&x.apply(this,arguments)||this}return m.value=function(d){return!0},m.prototype.index=function(d,a){return this.domNode===d||this.domNode.compareDocumentPosition(d)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(a,1):-1},m.prototype.position=function(d,a){var o=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return d>0&&(o+=1),[this.parent.domNode,o]},m.prototype.value=function(){var d;return d={},d[this.statics.blotName]=this.statics.value(this.domNode)||!0,d},m.scope=b.Scope.INLINE_BLOT,m}(f.default);r.default=w},function(n,r,i){var c=i(11),f=i(3),b={attributes:{compose:function(x,m,d){typeof x!="object"&&(x={}),typeof m!="object"&&(m={});var a=f(!0,{},m);d||(a=Object.keys(a).reduce(function(y,g){return a[g]!=null&&(y[g]=a[g]),y},{}));for(var o in x)x[o]!==void 0&&m[o]===void 0&&(a[o]=x[o]);return Object.keys(a).length>0?a:void 0},diff:function(x,m){typeof x!="object"&&(x={}),typeof m!="object"&&(m={});var d=Object.keys(x).concat(Object.keys(m)).reduce(function(a,o){return c(x[o],m[o])||(a[o]=m[o]===void 0?null:m[o]),a},{});return Object.keys(d).length>0?d:void 0},transform:function(x,m,d){if(typeof x!="object")return m;if(typeof m=="object"){if(!d)return m;var a=Object.keys(m).reduce(function(o,y){return x[y]===void 0&&(o[y]=m[y]),o},{});return Object.keys(a).length>0?a:void 0}}},iterator:function(x){return new w(x)},length:function(x){return typeof x.delete=="number"?x.delete:typeof x.retain=="number"?x.retain:typeof x.insert=="string"?x.insert.length:1}};function w(x){this.ops=x,this.index=0,this.offset=0}w.prototype.hasNext=function(){return this.peekLength()<1/0},w.prototype.next=function(x){x||(x=1/0);var m=this.ops[this.index];if(m){var d=this.offset,a=b.length(m);if(x>=a-d?(x=a-d,this.index+=1,this.offset=0):this.offset+=x,typeof m.delete=="number")return{delete:x};var o={};return m.attributes&&(o.attributes=m.attributes),typeof m.retain=="number"?o.retain=x:typeof m.insert=="string"?o.insert=m.insert.substr(d,x):o.insert=m.insert,o}else return{retain:1/0}},w.prototype.peek=function(){return this.ops[this.index]},w.prototype.peekLength=function(){return this.ops[this.index]?b.length(this.ops[this.index])-this.offset:1/0},w.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},w.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var x=this.offset,m=this.index,d=this.next(),a=this.ops.slice(this.index);return this.offset=x,this.index=m,[d].concat(a)}else return[]},n.exports=b},function(n,r){var i=function(){function c(g,h){return h!=null&&g instanceof h}var f;try{f=Map}catch{f=function(){}}var b;try{b=Set}catch{b=function(){}}var w;try{w=Promise}catch{w=function(){}}function x(g,h,p,u,v){typeof h=="object"&&(p=h.depth,u=h.prototype,v=h.includeNonEnumerable,h=h.circular);var l=[],N=[],T=typeof Buffer<"u";typeof h>"u"&&(h=!0),typeof p>"u"&&(p=1/0);function S(k,A){if(k===null)return null;if(A===0)return k;var _,E;if(typeof k!="object")return k;if(c(k,f))_=new f;else if(c(k,b))_=new b;else if(c(k,w))_=new w(function(R,O){k.then(function(D){R(S(D,A-1))},function(D){O(S(D,A-1))})});else if(x.__isArray(k))_=[];else if(x.__isRegExp(k))_=new RegExp(k.source,y(k)),k.lastIndex&&(_.lastIndex=k.lastIndex);else if(x.__isDate(k))_=new Date(k.getTime());else{if(T&&Buffer.isBuffer(k))return Buffer.allocUnsafe?_=Buffer.allocUnsafe(k.length):_=new Buffer(k.length),k.copy(_),_;c(k,Error)?_=Object.create(k):typeof u>"u"?(E=Object.getPrototypeOf(k),_=Object.create(E)):(_=Object.create(u),E=u)}if(h){var j=l.indexOf(k);if(j!=-1)return N[j];l.push(k),N.push(_)}c(k,f)&&k.forEach(function(R,O){var D=S(O,A-1),M=S(R,A-1);_.set(D,M)}),c(k,b)&&k.forEach(function(R){var O=S(R,A-1);_.add(O)});for(var P in k){var C;E&&(C=Object.getOwnPropertyDescriptor(E,P)),!(C&&C.set==null)&&(_[P]=S(k[P],A-1))}if(Object.getOwnPropertySymbols)for(var L=Object.getOwnPropertySymbols(k),P=0;P<L.length;P++){var F=L[P],B=Object.getOwnPropertyDescriptor(k,F);B&&!B.enumerable&&!v||(_[F]=S(k[F],A-1),B.enumerable||Object.defineProperty(_,F,{enumerable:!1}))}if(v)for(var q=Object.getOwnPropertyNames(k),P=0;P<q.length;P++){var I=q[P],B=Object.getOwnPropertyDescriptor(k,I);B&&B.enumerable||(_[I]=S(k[I],A-1),Object.defineProperty(_,I,{enumerable:!1}))}return _}return S(g,p)}x.clonePrototype=function(h){if(h===null)return null;var p=function(){};return p.prototype=h,new p};function m(g){return Object.prototype.toString.call(g)}x.__objToStr=m;function d(g){return typeof g=="object"&&m(g)==="[object Date]"}x.__isDate=d;function a(g){return typeof g=="object"&&m(g)==="[object Array]"}x.__isArray=a;function o(g){return typeof g=="object"&&m(g)==="[object RegExp]"}x.__isRegExp=o;function y(g){var h="";return g.global&&(h+="g"),g.ignoreCase&&(h+="i"),g.multiline&&(h+="m"),h}return x.__getRegExpFlags=y,x}();typeof n=="object"&&n.exports&&(n.exports=i)},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var c=function(){function _(E,j){var P=[],C=!0,L=!1,F=void 0;try{for(var B=E[Symbol.iterator](),q;!(C=(q=B.next()).done)&&(P.push(q.value),!(j&&P.length===j));C=!0);}catch(I){L=!0,F=I}finally{try{!C&&B.return&&B.return()}finally{if(L)throw F}}return P}return function(E,j){if(Array.isArray(E))return E;if(Symbol.iterator in Object(E))return _(E,j);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f=function(){function _(E,j){for(var P=0;P<j.length;P++){var C=j[P];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(E,C.key,C)}}return function(E,j,P){return j&&_(E.prototype,j),P&&_(E,P),E}}(),b=function _(E,j,P){E===null&&(E=Function.prototype);var C=Object.getOwnPropertyDescriptor(E,j);if(C===void 0){var L=Object.getPrototypeOf(E);return L===null?void 0:_(L,j,P)}else{if("value"in C)return C.value;var F=C.get;return F===void 0?void 0:F.call(P)}},w=i(0),x=l(w),m=i(8),d=l(m),a=i(4),o=l(a),y=i(16),g=l(y),h=i(13),p=l(h),u=i(25),v=l(u);function l(_){return _&&_.__esModule?_:{default:_}}function N(_,E){if(!(_ instanceof E))throw new TypeError("Cannot call a class as a function")}function T(_,E){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:_}function S(_,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);_.prototype=Object.create(E&&E.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(_,E):_.__proto__=E)}function k(_){return _ instanceof o.default||_ instanceof a.BlockEmbed}var A=function(_){S(E,_);function E(j,P){N(this,E);var C=T(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,j));return C.emitter=P.emitter,Array.isArray(P.whitelist)&&(C.whitelist=P.whitelist.reduce(function(L,F){return L[F]=!0,L},{})),C.domNode.addEventListener("DOMNodeInserted",function(){}),C.optimize(),C.enable(),C}return f(E,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(P,C){var L=this.line(P),F=c(L,2),B=F[0],q=F[1],I=this.line(P+C),R=c(I,1),O=R[0];if(b(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"deleteAt",this).call(this,P,C),O!=null&&B!==O&&q>0){if(B instanceof a.BlockEmbed||O instanceof a.BlockEmbed){this.optimize();return}if(B instanceof p.default){var D=B.newlineIndex(B.length(),!0);if(D>-1&&(B=B.split(D+1),B===O)){this.optimize();return}}else if(O instanceof p.default){var M=O.newlineIndex(0);M>-1&&O.split(M+1)}var H=O.children.head instanceof g.default?null:O.children.head;B.moveChildren(O,H),B.remove()}this.optimize()}},{key:"enable",value:function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",P)}},{key:"formatAt",value:function(P,C,L,F){this.whitelist!=null&&!this.whitelist[L]||(b(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"formatAt",this).call(this,P,C,L,F),this.optimize())}},{key:"insertAt",value:function(P,C,L){if(!(L!=null&&this.whitelist!=null&&!this.whitelist[C])){if(P>=this.length())if(L==null||x.default.query(C,x.default.Scope.BLOCK)==null){var F=x.default.create(this.statics.defaultChild);this.appendChild(F),L==null&&C.endsWith(`
`)&&(C=C.slice(0,-1)),F.insertAt(0,C,L)}else{var B=x.default.create(C,L);this.appendChild(B)}else b(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"insertAt",this).call(this,P,C,L);this.optimize()}}},{key:"insertBefore",value:function(P,C){if(P.statics.scope===x.default.Scope.INLINE_BLOT){var L=x.default.create(this.statics.defaultChild);L.appendChild(P),P=L}b(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"insertBefore",this).call(this,P,C)}},{key:"leaf",value:function(P){return this.path(P).pop()||[null,-1]}},{key:"line",value:function(P){return P===this.length()?this.line(P-1):this.descendant(k,P)}},{key:"lines",value:function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,L=function F(B,q,I){var R=[],O=I;return B.children.forEachAt(q,I,function(D,M,H){k(D)?R.push(D):D instanceof x.default.Container&&(R=R.concat(F(D,M,O))),O-=H}),R};return L(this,P,C)}},{key:"optimize",value:function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(b(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"optimize",this).call(this,P,C),P.length>0&&this.emitter.emit(d.default.events.SCROLL_OPTIMIZE,P,C))}},{key:"path",value:function(P){return b(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"path",this).call(this,P).slice(1)}},{key:"update",value:function(P){if(this.batch!==!0){var C=d.default.sources.USER;typeof P=="string"&&(C=P),Array.isArray(P)||(P=this.observer.takeRecords()),P.length>0&&this.emitter.emit(d.default.events.SCROLL_BEFORE_UPDATE,C,P),b(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"update",this).call(this,P.concat([])),P.length>0&&this.emitter.emit(d.default.events.SCROLL_UPDATE,C,P)}}}]),E}(x.default.Scroll);A.blotName="scroll",A.className="ql-editor",A.tagName="DIV",A.defaultChild="block",A.allowedChildren=[o.default,a.BlockEmbed,v.default],r.default=A},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.SHORTKEY=r.default=void 0;var c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},f=function(){function U($,V){var W=[],Z=!0,Q=!1,ne=void 0;try{for(var oe=$[Symbol.iterator](),he;!(Z=(he=oe.next()).done)&&(W.push(he.value),!(V&&W.length===V));Z=!0);}catch(pe){Q=!0,ne=pe}finally{try{!Z&&oe.return&&oe.return()}finally{if(Q)throw ne}}return W}return function($,V){if(Array.isArray($))return $;if(Symbol.iterator in Object($))return U($,V);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),b=function(){function U($,V){for(var W=0;W<V.length;W++){var Z=V[W];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty($,Z.key,Z)}}return function($,V,W){return V&&U($.prototype,V),W&&U($,W),$}}(),w=i(21),x=_(w),m=i(11),d=_(m),a=i(3),o=_(a),y=i(2),g=_(y),h=i(20),p=_(h),u=i(0),v=_(u),l=i(5),N=_(l),T=i(10),S=_(T),k=i(9),A=_(k);function _(U){return U&&U.__esModule?U:{default:U}}function E(U,$,V){return $ in U?Object.defineProperty(U,$,{value:V,enumerable:!0,configurable:!0,writable:!0}):U[$]=V,U}function j(U,$){if(!(U instanceof $))throw new TypeError("Cannot call a class as a function")}function P(U,$){if(!U)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $&&(typeof $=="object"||typeof $=="function")?$:U}function C(U,$){if(typeof $!="function"&&$!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof $);U.prototype=Object.create($&&$.prototype,{constructor:{value:U,enumerable:!1,writable:!0,configurable:!0}}),$&&(Object.setPrototypeOf?Object.setPrototypeOf(U,$):U.__proto__=$)}var L=(0,S.default)("quill:keyboard"),F=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",B=function(U){C($,U),b($,null,[{key:"match",value:function(W,Z){return Z=z(Z),["altKey","ctrlKey","metaKey","shiftKey"].some(function(Q){return!!Z[Q]!==W[Q]&&Z[Q]!==null})?!1:Z.key===(W.which||W.keyCode)}}]);function $(V,W){j(this,$);var Z=P(this,($.__proto__||Object.getPrototypeOf($)).call(this,V,W));return Z.bindings={},Object.keys(Z.options.bindings).forEach(function(Q){Q==="list autofill"&&V.scroll.whitelist!=null&&!V.scroll.whitelist.list||Z.options.bindings[Q]&&Z.addBinding(Z.options.bindings[Q])}),Z.addBinding({key:$.keys.ENTER,shiftKey:null},D),Z.addBinding({key:$.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(Z.addBinding({key:$.keys.BACKSPACE},{collapsed:!0},I),Z.addBinding({key:$.keys.DELETE},{collapsed:!0},R)):(Z.addBinding({key:$.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},I),Z.addBinding({key:$.keys.DELETE},{collapsed:!0,suffix:/^.?$/},R)),Z.addBinding({key:$.keys.BACKSPACE},{collapsed:!1},O),Z.addBinding({key:$.keys.DELETE},{collapsed:!1},O),Z.addBinding({key:$.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},I),Z.listen(),Z}return b($,[{key:"addBinding",value:function(W){var Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},ne=z(W);if(ne==null||ne.key==null)return L.warn("Attempted to add invalid keyboard binding",ne);typeof Z=="function"&&(Z={handler:Z}),typeof Q=="function"&&(Q={handler:Q}),ne=(0,o.default)(ne,Z,Q),this.bindings[ne.key]=this.bindings[ne.key]||[],this.bindings[ne.key].push(ne)}},{key:"listen",value:function(){var W=this;this.quill.root.addEventListener("keydown",function(Z){if(!Z.defaultPrevented){var Q=Z.which||Z.keyCode,ne=(W.bindings[Q]||[]).filter(function(ge){return $.match(Z,ge)});if(ne.length!==0){var oe=W.quill.getSelection();if(!(oe==null||!W.quill.hasFocus())){var he=W.quill.getLine(oe.index),pe=f(he,2),we=pe[0],ve=pe[1],J=W.quill.getLeaf(oe.index),Y=f(J,2),te=Y[0],re=Y[1],X=oe.length===0?[te,re]:W.quill.getLeaf(oe.index+oe.length),ce=f(X,2),ue=ce[0],de=ce[1],Ee=te instanceof v.default.Text?te.value().slice(0,re):"",Te=ue instanceof v.default.Text?ue.value().slice(de):"",me={collapsed:oe.length===0,empty:oe.length===0&&we.length()<=1,format:W.quill.getFormat(oe),offset:ve,prefix:Ee,suffix:Te},Fn=ne.some(function(ge){if(ge.collapsed!=null&&ge.collapsed!==me.collapsed||ge.empty!=null&&ge.empty!==me.empty||ge.offset!=null&&ge.offset!==me.offset)return!1;if(Array.isArray(ge.format)){if(ge.format.every(function(De){return me.format[De]==null}))return!1}else if(c(ge.format)==="object"&&!Object.keys(ge.format).every(function(De){return ge.format[De]===!0?me.format[De]!=null:ge.format[De]===!1?me.format[De]==null:(0,d.default)(ge.format[De],me.format[De])}))return!1;return ge.prefix!=null&&!ge.prefix.test(me.prefix)||ge.suffix!=null&&!ge.suffix.test(me.suffix)?!1:ge.handler.call(W,oe,me)!==!0});Fn&&Z.preventDefault()}}}})}}]),$}(A.default);B.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},B.DEFAULTS={bindings:{bold:H("bold"),italic:H("italic"),underline:H("underline"),indent:{key:B.keys.TAB,format:["blockquote","indent","list"],handler:function($,V){if(V.collapsed&&V.offset!==0)return!0;this.quill.format("indent","+1",N.default.sources.USER)}},outdent:{key:B.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function($,V){if(V.collapsed&&V.offset!==0)return!0;this.quill.format("indent","-1",N.default.sources.USER)}},"outdent backspace":{key:B.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function($,V){V.format.indent!=null?this.quill.format("indent","-1",N.default.sources.USER):V.format.list!=null&&this.quill.format("list",!1,N.default.sources.USER)}},"indent code-block":M(!0),"outdent code-block":M(!1),"remove tab":{key:B.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function($){this.quill.deleteText($.index-1,1,N.default.sources.USER)}},tab:{key:B.keys.TAB,handler:function($){this.quill.history.cutoff();var V=new g.default().retain($.index).delete($.length).insert("	");this.quill.updateContents(V,N.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection($.index+1,N.default.sources.SILENT)}},"list empty enter":{key:B.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function($,V){this.quill.format("list",!1,N.default.sources.USER),V.format.indent&&this.quill.format("indent",!1,N.default.sources.USER)}},"checklist enter":{key:B.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function($){var V=this.quill.getLine($.index),W=f(V,2),Z=W[0],Q=W[1],ne=(0,o.default)({},Z.formats(),{list:"checked"}),oe=new g.default().retain($.index).insert(`
`,ne).retain(Z.length()-Q-1).retain(1,{list:"unchecked"});this.quill.updateContents(oe,N.default.sources.USER),this.quill.setSelection($.index+1,N.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:B.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function($,V){var W=this.quill.getLine($.index),Z=f(W,2),Q=Z[0],ne=Z[1],oe=new g.default().retain($.index).insert(`
`,V.format).retain(Q.length()-ne-1).retain(1,{header:null});this.quill.updateContents(oe,N.default.sources.USER),this.quill.setSelection($.index+1,N.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function($,V){var W=V.prefix.length,Z=this.quill.getLine($.index),Q=f(Z,2),ne=Q[0],oe=Q[1];if(oe>W)return!0;var he=void 0;switch(V.prefix.trim()){case"[]":case"[ ]":he="unchecked";break;case"[x]":he="checked";break;case"-":case"*":he="bullet";break;default:he="ordered"}this.quill.insertText($.index," ",N.default.sources.USER),this.quill.history.cutoff();var pe=new g.default().retain($.index-oe).delete(W+1).retain(ne.length()-2-oe).retain(1,{list:he});this.quill.updateContents(pe,N.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection($.index-W,N.default.sources.SILENT)}},"code exit":{key:B.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function($){var V=this.quill.getLine($.index),W=f(V,2),Z=W[0],Q=W[1],ne=new g.default().retain($.index+Z.length()-Q-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(ne,N.default.sources.USER)}},"embed left":q(B.keys.LEFT,!1),"embed left shift":q(B.keys.LEFT,!0),"embed right":q(B.keys.RIGHT,!1),"embed right shift":q(B.keys.RIGHT,!0)}};function q(U,$){var V,W=U===B.keys.LEFT?"prefix":"suffix";return V={key:U,shiftKey:$,altKey:null},E(V,W,/^$/),E(V,"handler",function(Q){var ne=Q.index;U===B.keys.RIGHT&&(ne+=Q.length+1);var oe=this.quill.getLeaf(ne),he=f(oe,1),pe=he[0];return pe instanceof v.default.Embed?(U===B.keys.LEFT?$?this.quill.setSelection(Q.index-1,Q.length+1,N.default.sources.USER):this.quill.setSelection(Q.index-1,N.default.sources.USER):$?this.quill.setSelection(Q.index,Q.length+1,N.default.sources.USER):this.quill.setSelection(Q.index+Q.length+1,N.default.sources.USER),!1):!0}),V}function I(U,$){if(!(U.index===0||this.quill.getLength()<=1)){var V=this.quill.getLine(U.index),W=f(V,1),Z=W[0],Q={};if($.offset===0){var ne=this.quill.getLine(U.index-1),oe=f(ne,1),he=oe[0];if(he!=null&&he.length()>1){var pe=Z.formats(),we=this.quill.getFormat(U.index-1,1);Q=p.default.attributes.diff(pe,we)||{}}}var ve=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test($.prefix)?2:1;this.quill.deleteText(U.index-ve,ve,N.default.sources.USER),Object.keys(Q).length>0&&this.quill.formatLine(U.index-ve,ve,Q,N.default.sources.USER),this.quill.focus()}}function R(U,$){var V=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test($.suffix)?2:1;if(!(U.index>=this.quill.getLength()-V)){var W={},Z=0,Q=this.quill.getLine(U.index),ne=f(Q,1),oe=ne[0];if($.offset>=oe.length()-1){var he=this.quill.getLine(U.index+1),pe=f(he,1),we=pe[0];if(we){var ve=oe.formats(),J=this.quill.getFormat(U.index,1);W=p.default.attributes.diff(ve,J)||{},Z=we.length()}}this.quill.deleteText(U.index,V,N.default.sources.USER),Object.keys(W).length>0&&this.quill.formatLine(U.index+Z-1,V,W,N.default.sources.USER)}}function O(U){var $=this.quill.getLines(U),V={};if($.length>1){var W=$[0].formats(),Z=$[$.length-1].formats();V=p.default.attributes.diff(Z,W)||{}}this.quill.deleteText(U,N.default.sources.USER),Object.keys(V).length>0&&this.quill.formatLine(U.index,1,V,N.default.sources.USER),this.quill.setSelection(U.index,N.default.sources.SILENT),this.quill.focus()}function D(U,$){var V=this;U.length>0&&this.quill.scroll.deleteAt(U.index,U.length);var W=Object.keys($.format).reduce(function(Z,Q){return v.default.query(Q,v.default.Scope.BLOCK)&&!Array.isArray($.format[Q])&&(Z[Q]=$.format[Q]),Z},{});this.quill.insertText(U.index,`
`,W,N.default.sources.USER),this.quill.setSelection(U.index+1,N.default.sources.SILENT),this.quill.focus(),Object.keys($.format).forEach(function(Z){W[Z]==null&&(Array.isArray($.format[Z])||Z!=="link"&&V.quill.format(Z,$.format[Z],N.default.sources.USER))})}function M(U){return{key:B.keys.TAB,shiftKey:!U,format:{"code-block":!0},handler:function(V){var W=v.default.query("code-block"),Z=V.index,Q=V.length,ne=this.quill.scroll.descendant(W,Z),oe=f(ne,2),he=oe[0],pe=oe[1];if(he!=null){var we=this.quill.getIndex(he),ve=he.newlineIndex(pe,!0)+1,J=he.newlineIndex(we+pe+Q),Y=he.domNode.textContent.slice(ve,J).split(`
`);pe=0,Y.forEach(function(te,re){U?(he.insertAt(ve+pe,W.TAB),pe+=W.TAB.length,re===0?Z+=W.TAB.length:Q+=W.TAB.length):te.startsWith(W.TAB)&&(he.deleteAt(ve+pe,W.TAB.length),pe-=W.TAB.length,re===0?Z-=W.TAB.length:Q-=W.TAB.length),pe+=te.length+1}),this.quill.update(N.default.sources.USER),this.quill.setSelection(Z,Q,N.default.sources.SILENT)}}}}function H(U){return{key:U[0].toUpperCase(),shortKey:!0,handler:function(V,W){this.quill.format(U,!W.format[U],N.default.sources.USER)}}}function z(U){if(typeof U=="string"||typeof U=="number")return z({key:U});if((typeof U>"u"?"undefined":c(U))==="object"&&(U=(0,x.default)(U,!1)),typeof U.key=="string")if(B.keys[U.key.toUpperCase()]!=null)U.key=B.keys[U.key.toUpperCase()];else if(U.key.length===1)U.key=U.key.toUpperCase().charCodeAt(0);else return null;return U.shortKey&&(U[F]=U.shortKey,delete U.shortKey),U}r.default=B,r.SHORTKEY=F},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var c=function(){function p(u,v){var l=[],N=!0,T=!1,S=void 0;try{for(var k=u[Symbol.iterator](),A;!(N=(A=k.next()).done)&&(l.push(A.value),!(v&&l.length===v));N=!0);}catch(_){T=!0,S=_}finally{try{!N&&k.return&&k.return()}finally{if(T)throw S}}return l}return function(u,v){if(Array.isArray(u))return u;if(Symbol.iterator in Object(u))return p(u,v);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f=function p(u,v,l){u===null&&(u=Function.prototype);var N=Object.getOwnPropertyDescriptor(u,v);if(N===void 0){var T=Object.getPrototypeOf(u);return T===null?void 0:p(T,v,l)}else{if("value"in N)return N.value;var S=N.get;return S===void 0?void 0:S.call(l)}},b=function(){function p(u,v){for(var l=0;l<v.length;l++){var N=v[l];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(u,N.key,N)}}return function(u,v,l){return v&&p(u.prototype,v),l&&p(u,l),u}}(),w=i(0),x=a(w),m=i(7),d=a(m);function a(p){return p&&p.__esModule?p:{default:p}}function o(p,u){if(!(p instanceof u))throw new TypeError("Cannot call a class as a function")}function y(p,u){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u&&(typeof u=="object"||typeof u=="function")?u:p}function g(p,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);p.prototype=Object.create(u&&u.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(p,u):p.__proto__=u)}var h=function(p){g(u,p),b(u,null,[{key:"value",value:function(){}}]);function u(v,l){o(this,u);var N=y(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,v));return N.selection=l,N.textNode=document.createTextNode(u.CONTENTS),N.domNode.appendChild(N.textNode),N._length=0,N}return b(u,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(l,N){if(this._length!==0)return f(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"format",this).call(this,l,N);for(var T=this,S=0;T!=null&&T.statics.scope!==x.default.Scope.BLOCK_BLOT;)S+=T.offset(T.parent),T=T.parent;T!=null&&(this._length=u.CONTENTS.length,T.optimize(),T.formatAt(S,u.CONTENTS.length,l,N),this._length=0)}},{key:"index",value:function(l,N){return l===this.textNode?0:f(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"index",this).call(this,l,N)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){f(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var l=this.textNode,N=this.selection.getNativeRange(),T=void 0,S=void 0,k=void 0;if(N!=null&&N.start.node===l&&N.end.node===l){var A=[l,N.start.offset,N.end.offset];T=A[0],S=A[1],k=A[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==u.CONTENTS){var _=this.textNode.data.split(u.CONTENTS).join("");this.next instanceof d.default?(T=this.next.domNode,this.next.insertAt(0,_),this.textNode.data=u.CONTENTS):(this.textNode.data=_,this.parent.insertBefore(x.default.create(this.textNode),this),this.textNode=document.createTextNode(u.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),S!=null){var E=[S,k].map(function(P){return Math.max(0,Math.min(T.data.length,P-1))}),j=c(E,2);return S=j[0],k=j[1],{startNode:T,startOffset:S,endNode:T,endOffset:k}}}}},{key:"update",value:function(l,N){var T=this;if(l.some(function(k){return k.type==="characterData"&&k.target===T.textNode})){var S=this.restore();S&&(N.range=S)}}},{key:"value",value:function(){return""}}]),u}(x.default.Embed);h.blotName="cursor",h.className="ql-cursor",h.tagName="span",h.CONTENTS="\uFEFF",r.default=h},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var c=i(0),f=x(c),b=i(4),w=x(b);function x(y){return y&&y.__esModule?y:{default:y}}function m(y,g){if(!(y instanceof g))throw new TypeError("Cannot call a class as a function")}function d(y,g){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:y}function a(y,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);y.prototype=Object.create(g&&g.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(y,g):y.__proto__=g)}var o=function(y){a(g,y);function g(){return m(this,g),d(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return g}(f.default.Container);o.allowedChildren=[w.default,b.BlockEmbed,o],r.default=o},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.ColorStyle=r.ColorClass=r.ColorAttributor=void 0;var c=function(){function h(p,u){for(var v=0;v<u.length;v++){var l=u[v];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(p,l.key,l)}}return function(p,u,v){return u&&h(p.prototype,u),v&&h(p,v),p}}(),f=function h(p,u,v){p===null&&(p=Function.prototype);var l=Object.getOwnPropertyDescriptor(p,u);if(l===void 0){var N=Object.getPrototypeOf(p);return N===null?void 0:h(N,u,v)}else{if("value"in l)return l.value;var T=l.get;return T===void 0?void 0:T.call(v)}},b=i(0),w=x(b);function x(h){return h&&h.__esModule?h:{default:h}}function m(h,p){if(!(h instanceof p))throw new TypeError("Cannot call a class as a function")}function d(h,p){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:h}function a(h,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);h.prototype=Object.create(p&&p.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(h,p):h.__proto__=p)}var o=function(h){a(p,h);function p(){return m(this,p),d(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return c(p,[{key:"value",value:function(v){var l=f(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"value",this).call(this,v);return l.startsWith("rgb(")?(l=l.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+l.split(",").map(function(N){return("00"+parseInt(N).toString(16)).slice(-2)}).join("")):l}}]),p}(w.default.Attributor.Style),y=new w.default.Attributor.Class("color","ql-color",{scope:w.default.Scope.INLINE}),g=new o("color","color",{scope:w.default.Scope.INLINE});r.ColorAttributor=o,r.ColorClass=y,r.ColorStyle=g},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.sanitize=r.default=void 0;var c=function(){function g(h,p){for(var u=0;u<p.length;u++){var v=p[u];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(h,v.key,v)}}return function(h,p,u){return p&&g(h.prototype,p),u&&g(h,u),h}}(),f=function g(h,p,u){h===null&&(h=Function.prototype);var v=Object.getOwnPropertyDescriptor(h,p);if(v===void 0){var l=Object.getPrototypeOf(h);return l===null?void 0:g(l,p,u)}else{if("value"in v)return v.value;var N=v.get;return N===void 0?void 0:N.call(u)}},b=i(6),w=x(b);function x(g){return g&&g.__esModule?g:{default:g}}function m(g,h){if(!(g instanceof h))throw new TypeError("Cannot call a class as a function")}function d(g,h){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:g}function a(g,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);g.prototype=Object.create(h&&h.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(g,h):g.__proto__=h)}var o=function(g){a(h,g);function h(){return m(this,h),d(this,(h.__proto__||Object.getPrototypeOf(h)).apply(this,arguments))}return c(h,[{key:"format",value:function(u,v){if(u!==this.statics.blotName||!v)return f(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"format",this).call(this,u,v);v=this.constructor.sanitize(v),this.domNode.setAttribute("href",v)}}],[{key:"create",value:function(u){var v=f(h.__proto__||Object.getPrototypeOf(h),"create",this).call(this,u);return u=this.sanitize(u),v.setAttribute("href",u),v.setAttribute("rel","noopener noreferrer"),v.setAttribute("target","_blank"),v}},{key:"formats",value:function(u){return u.getAttribute("href")}},{key:"sanitize",value:function(u){return y(u,this.PROTOCOL_WHITELIST)?u:this.SANITIZED_URL}}]),h}(w.default);o.blotName="link",o.tagName="A",o.SANITIZED_URL="about:blank",o.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function y(g,h){var p=document.createElement("a");p.href=g;var u=p.href.slice(0,p.href.indexOf(":"));return h.indexOf(u)>-1}r.default=o,r.sanitize=y},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},f=function(){function h(p,u){for(var v=0;v<u.length;v++){var l=u[v];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(p,l.key,l)}}return function(p,u,v){return u&&h(p.prototype,u),v&&h(p,v),p}}(),b=i(23),w=d(b),x=i(107),m=d(x);function d(h){return h&&h.__esModule?h:{default:h}}function a(h,p){if(!(h instanceof p))throw new TypeError("Cannot call a class as a function")}var o=0;function y(h,p){h.setAttribute(p,h.getAttribute(p)!=="true")}var g=function(){function h(p){var u=this;a(this,h),this.select=p,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){u.togglePicker()}),this.label.addEventListener("keydown",function(v){switch(v.keyCode){case w.default.keys.ENTER:u.togglePicker();break;case w.default.keys.ESCAPE:u.escape(),v.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return f(h,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),y(this.label,"aria-expanded"),y(this.options,"aria-hidden")}},{key:"buildItem",value:function(u){var v=this,l=document.createElement("span");return l.tabIndex="0",l.setAttribute("role","button"),l.classList.add("ql-picker-item"),u.hasAttribute("value")&&l.setAttribute("data-value",u.getAttribute("value")),u.textContent&&l.setAttribute("data-label",u.textContent),l.addEventListener("click",function(){v.selectItem(l,!0)}),l.addEventListener("keydown",function(N){switch(N.keyCode){case w.default.keys.ENTER:v.selectItem(l,!0),N.preventDefault();break;case w.default.keys.ESCAPE:v.escape(),N.preventDefault();break}}),l}},{key:"buildLabel",value:function(){var u=document.createElement("span");return u.classList.add("ql-picker-label"),u.innerHTML=m.default,u.tabIndex="0",u.setAttribute("role","button"),u.setAttribute("aria-expanded","false"),this.container.appendChild(u),u}},{key:"buildOptions",value:function(){var u=this,v=document.createElement("span");v.classList.add("ql-picker-options"),v.setAttribute("aria-hidden","true"),v.tabIndex="-1",v.id="ql-picker-options-"+o,o+=1,this.label.setAttribute("aria-controls",v.id),this.options=v,[].slice.call(this.select.options).forEach(function(l){var N=u.buildItem(l);v.appendChild(N),l.selected===!0&&u.selectItem(N)}),this.container.appendChild(v)}},{key:"buildPicker",value:function(){var u=this;[].slice.call(this.select.attributes).forEach(function(v){u.container.setAttribute(v.name,v.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var u=this;this.close(),setTimeout(function(){return u.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(u){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,l=this.container.querySelector(".ql-selected");if(u!==l&&(l!=null&&l.classList.remove("ql-selected"),u!=null&&(u.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(u.parentNode.children,u),u.hasAttribute("data-value")?this.label.setAttribute("data-value",u.getAttribute("data-value")):this.label.removeAttribute("data-value"),u.hasAttribute("data-label")?this.label.setAttribute("data-label",u.getAttribute("data-label")):this.label.removeAttribute("data-label"),v))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":c(Event))==="object"){var N=document.createEvent("Event");N.initEvent("change",!0,!0),this.select.dispatchEvent(N)}this.close()}}},{key:"update",value:function(){var u=void 0;if(this.select.selectedIndex>-1){var v=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];u=this.select.options[this.select.selectedIndex],this.selectItem(v)}else this.selectItem(null);var l=u!=null&&u!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",l)}}]),h}();r.default=g},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var c=i(0),f=L(c),b=i(5),w=L(b),x=i(4),m=L(x),d=i(16),a=L(d),o=i(25),y=L(o),g=i(24),h=L(g),p=i(35),u=L(p),v=i(6),l=L(v),N=i(22),T=L(N),S=i(7),k=L(S),A=i(55),_=L(A),E=i(42),j=L(E),P=i(23),C=L(P);function L(F){return F&&F.__esModule?F:{default:F}}w.default.register({"blots/block":m.default,"blots/block/embed":x.BlockEmbed,"blots/break":a.default,"blots/container":y.default,"blots/cursor":h.default,"blots/embed":u.default,"blots/inline":l.default,"blots/scroll":T.default,"blots/text":k.default,"modules/clipboard":_.default,"modules/history":j.default,"modules/keyboard":C.default}),f.default.register(m.default,a.default,h.default,l.default,T.default,k.default),r.default=w.default},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var c=i(1),f=function(){function b(w){this.domNode=w,this.domNode[c.DATA_KEY]={blot:this}}return Object.defineProperty(b.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),b.create=function(w){if(this.tagName==null)throw new c.ParchmentError("Blot definition missing tagName");var x;return Array.isArray(this.tagName)?(typeof w=="string"&&(w=w.toUpperCase(),parseInt(w).toString()===w&&(w=parseInt(w))),typeof w=="number"?x=document.createElement(this.tagName[w-1]):this.tagName.indexOf(w)>-1?x=document.createElement(w):x=document.createElement(this.tagName[0])):x=document.createElement(this.tagName),this.className&&x.classList.add(this.className),x},b.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},b.prototype.clone=function(){var w=this.domNode.cloneNode(!1);return c.create(w)},b.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[c.DATA_KEY]},b.prototype.deleteAt=function(w,x){var m=this.isolate(w,x);m.remove()},b.prototype.formatAt=function(w,x,m,d){var a=this.isolate(w,x);if(c.query(m,c.Scope.BLOT)!=null&&d)a.wrap(m,d);else if(c.query(m,c.Scope.ATTRIBUTE)!=null){var o=c.create(this.statics.scope);a.wrap(o),o.format(m,d)}},b.prototype.insertAt=function(w,x,m){var d=m==null?c.create("text",x):c.create(x,m),a=this.split(w);this.parent.insertBefore(d,a)},b.prototype.insertInto=function(w,x){x===void 0&&(x=null),this.parent!=null&&this.parent.children.remove(this);var m=null;w.children.insertBefore(this,x),x!=null&&(m=x.domNode),(this.domNode.parentNode!=w.domNode||this.domNode.nextSibling!=m)&&w.domNode.insertBefore(this.domNode,m),this.parent=w,this.attach()},b.prototype.isolate=function(w,x){var m=this.split(w);return m.split(x),m},b.prototype.length=function(){return 1},b.prototype.offset=function(w){return w===void 0&&(w=this.parent),this.parent==null||this==w?0:this.parent.children.offset(this)+this.parent.offset(w)},b.prototype.optimize=function(w){this.domNode[c.DATA_KEY]!=null&&delete this.domNode[c.DATA_KEY].mutations},b.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},b.prototype.replace=function(w){w.parent!=null&&(w.parent.insertBefore(this,w.next),w.remove())},b.prototype.replaceWith=function(w,x){var m=typeof w=="string"?c.create(w,x):w;return m.replace(this),m},b.prototype.split=function(w,x){return w===0?this:this.next},b.prototype.update=function(w,x){},b.prototype.wrap=function(w,x){var m=typeof w=="string"?c.create(w,x):w;return this.parent!=null&&this.parent.insertBefore(m,this.next),m.appendChild(this),m},b.blotName="abstract",b}();r.default=f},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var c=i(12),f=i(32),b=i(33),w=i(1),x=function(){function m(d){this.attributes={},this.domNode=d,this.build()}return m.prototype.attribute=function(d,a){a?d.add(this.domNode,a)&&(d.value(this.domNode)!=null?this.attributes[d.attrName]=d:delete this.attributes[d.attrName]):(d.remove(this.domNode),delete this.attributes[d.attrName])},m.prototype.build=function(){var d=this;this.attributes={};var a=c.default.keys(this.domNode),o=f.default.keys(this.domNode),y=b.default.keys(this.domNode);a.concat(o).concat(y).forEach(function(g){var h=w.query(g,w.Scope.ATTRIBUTE);h instanceof c.default&&(d.attributes[h.attrName]=h)})},m.prototype.copy=function(d){var a=this;Object.keys(this.attributes).forEach(function(o){var y=a.attributes[o].value(a.domNode);d.format(o,y)})},m.prototype.move=function(d){var a=this;this.copy(d),Object.keys(this.attributes).forEach(function(o){a.attributes[o].remove(a.domNode)}),this.attributes={}},m.prototype.values=function(){var d=this;return Object.keys(this.attributes).reduce(function(a,o){return a[o]=d.attributes[o].value(d.domNode),a},{})},m}();r.default=x},function(n,r,i){var c=this&&this.__extends||function(){var x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,d){m.__proto__=d}||function(m,d){for(var a in d)d.hasOwnProperty(a)&&(m[a]=d[a])};return function(m,d){x(m,d);function a(){this.constructor=m}m.prototype=d===null?Object.create(d):(a.prototype=d.prototype,new a)}}();Object.defineProperty(r,"__esModule",{value:!0});var f=i(12);function b(x,m){var d=x.getAttribute("class")||"";return d.split(/\s+/).filter(function(a){return a.indexOf(m+"-")===0})}var w=function(x){c(m,x);function m(){return x!==null&&x.apply(this,arguments)||this}return m.keys=function(d){return(d.getAttribute("class")||"").split(/\s+/).map(function(a){return a.split("-").slice(0,-1).join("-")})},m.prototype.add=function(d,a){return this.canAdd(d,a)?(this.remove(d),d.classList.add(this.keyName+"-"+a),!0):!1},m.prototype.remove=function(d){var a=b(d,this.keyName);a.forEach(function(o){d.classList.remove(o)}),d.classList.length===0&&d.removeAttribute("class")},m.prototype.value=function(d){var a=b(d,this.keyName)[0]||"",o=a.slice(this.keyName.length+1);return this.canAdd(d,o)?o:""},m}(f.default);r.default=w},function(n,r,i){var c=this&&this.__extends||function(){var x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,d){m.__proto__=d}||function(m,d){for(var a in d)d.hasOwnProperty(a)&&(m[a]=d[a])};return function(m,d){x(m,d);function a(){this.constructor=m}m.prototype=d===null?Object.create(d):(a.prototype=d.prototype,new a)}}();Object.defineProperty(r,"__esModule",{value:!0});var f=i(12);function b(x){var m=x.split("-"),d=m.slice(1).map(function(a){return a[0].toUpperCase()+a.slice(1)}).join("");return m[0]+d}var w=function(x){c(m,x);function m(){return x!==null&&x.apply(this,arguments)||this}return m.keys=function(d){return(d.getAttribute("style")||"").split(";").map(function(a){var o=a.split(":");return o[0].trim()})},m.prototype.add=function(d,a){return this.canAdd(d,a)?(d.style[b(this.keyName)]=a,!0):!1},m.prototype.remove=function(d){d.style[b(this.keyName)]="",d.getAttribute("style")||d.removeAttribute("style")},m.prototype.value=function(d){var a=d.style[b(this.keyName)];return this.canAdd(d,a)?a:""},m}(f.default);r.default=w},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var c=function(){function w(x,m){for(var d=0;d<m.length;d++){var a=m[d];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(x,a.key,a)}}return function(x,m,d){return m&&w(x.prototype,m),d&&w(x,d),x}}();function f(w,x){if(!(w instanceof x))throw new TypeError("Cannot call a class as a function")}var b=function(){function w(x,m){f(this,w),this.quill=x,this.options=m,this.modules={}}return c(w,[{key:"init",value:function(){var m=this;Object.keys(this.options.modules).forEach(function(d){m.modules[d]==null&&m.addModule(d)})}},{key:"addModule",value:function(m){var d=this.quill.constructor.import("modules/"+m);return this.modules[m]=new d(this.quill,this.options.modules[m]||{}),this.modules[m]}}]),w}();b.DEFAULTS={modules:{}},b.themes={default:b},r.default=b},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var c=function(){function p(u,v){for(var l=0;l<v.length;l++){var N=v[l];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(u,N.key,N)}}return function(u,v,l){return v&&p(u.prototype,v),l&&p(u,l),u}}(),f=function p(u,v,l){u===null&&(u=Function.prototype);var N=Object.getOwnPropertyDescriptor(u,v);if(N===void 0){var T=Object.getPrototypeOf(u);return T===null?void 0:p(T,v,l)}else{if("value"in N)return N.value;var S=N.get;return S===void 0?void 0:S.call(l)}},b=i(0),w=d(b),x=i(7),m=d(x);function d(p){return p&&p.__esModule?p:{default:p}}function a(p,u){if(!(p instanceof u))throw new TypeError("Cannot call a class as a function")}function o(p,u){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u&&(typeof u=="object"||typeof u=="function")?u:p}function y(p,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);p.prototype=Object.create(u&&u.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(p,u):p.__proto__=u)}var g="\uFEFF",h=function(p){y(u,p);function u(v){a(this,u);var l=o(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,v));return l.contentNode=document.createElement("span"),l.contentNode.setAttribute("contenteditable",!1),[].slice.call(l.domNode.childNodes).forEach(function(N){l.contentNode.appendChild(N)}),l.leftGuard=document.createTextNode(g),l.rightGuard=document.createTextNode(g),l.domNode.appendChild(l.leftGuard),l.domNode.appendChild(l.contentNode),l.domNode.appendChild(l.rightGuard),l}return c(u,[{key:"index",value:function(l,N){return l===this.leftGuard?0:l===this.rightGuard?1:f(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"index",this).call(this,l,N)}},{key:"restore",value:function(l){var N=void 0,T=void 0,S=l.data.split(g).join("");if(l===this.leftGuard)if(this.prev instanceof m.default){var k=this.prev.length();this.prev.insertAt(k,S),N={startNode:this.prev.domNode,startOffset:k+S.length}}else T=document.createTextNode(S),this.parent.insertBefore(w.default.create(T),this),N={startNode:T,startOffset:S.length};else l===this.rightGuard&&(this.next instanceof m.default?(this.next.insertAt(0,S),N={startNode:this.next.domNode,startOffset:S.length}):(T=document.createTextNode(S),this.parent.insertBefore(w.default.create(T),this.next),N={startNode:T,startOffset:S.length}));return l.data=g,N}},{key:"update",value:function(l,N){var T=this;l.forEach(function(S){if(S.type==="characterData"&&(S.target===T.leftGuard||S.target===T.rightGuard)){var k=T.restore(S.target);k&&(N.range=k)}})}}]),u}(w.default.Embed);r.default=h},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.AlignStyle=r.AlignClass=r.AlignAttribute=void 0;var c=i(0),f=b(c);function b(a){return a&&a.__esModule?a:{default:a}}var w={scope:f.default.Scope.BLOCK,whitelist:["right","center","justify"]},x=new f.default.Attributor.Attribute("align","align",w),m=new f.default.Attributor.Class("align","ql-align",w),d=new f.default.Attributor.Style("align","text-align",w);r.AlignAttribute=x,r.AlignClass=m,r.AlignStyle=d},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.BackgroundStyle=r.BackgroundClass=void 0;var c=i(0),f=w(c),b=i(26);function w(d){return d&&d.__esModule?d:{default:d}}var x=new f.default.Attributor.Class("background","ql-bg",{scope:f.default.Scope.INLINE}),m=new b.ColorAttributor("background","background-color",{scope:f.default.Scope.INLINE});r.BackgroundClass=x,r.BackgroundStyle=m},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.DirectionStyle=r.DirectionClass=r.DirectionAttribute=void 0;var c=i(0),f=b(c);function b(a){return a&&a.__esModule?a:{default:a}}var w={scope:f.default.Scope.BLOCK,whitelist:["rtl"]},x=new f.default.Attributor.Attribute("direction","dir",w),m=new f.default.Attributor.Class("direction","ql-direction",w),d=new f.default.Attributor.Style("direction","direction",w);r.DirectionAttribute=x,r.DirectionClass=m,r.DirectionStyle=d},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.FontClass=r.FontStyle=void 0;var c=function(){function p(u,v){for(var l=0;l<v.length;l++){var N=v[l];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(u,N.key,N)}}return function(u,v,l){return v&&p(u.prototype,v),l&&p(u,l),u}}(),f=function p(u,v,l){u===null&&(u=Function.prototype);var N=Object.getOwnPropertyDescriptor(u,v);if(N===void 0){var T=Object.getPrototypeOf(u);return T===null?void 0:p(T,v,l)}else{if("value"in N)return N.value;var S=N.get;return S===void 0?void 0:S.call(l)}},b=i(0),w=x(b);function x(p){return p&&p.__esModule?p:{default:p}}function m(p,u){if(!(p instanceof u))throw new TypeError("Cannot call a class as a function")}function d(p,u){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u&&(typeof u=="object"||typeof u=="function")?u:p}function a(p,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);p.prototype=Object.create(u&&u.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(p,u):p.__proto__=u)}var o={scope:w.default.Scope.INLINE,whitelist:["serif","monospace"]},y=new w.default.Attributor.Class("font","ql-font",o),g=function(p){a(u,p);function u(){return m(this,u),d(this,(u.__proto__||Object.getPrototypeOf(u)).apply(this,arguments))}return c(u,[{key:"value",value:function(l){return f(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"value",this).call(this,l).replace(/["']/g,"")}}]),u}(w.default.Attributor.Style),h=new g("font","font-family",o);r.FontStyle=h,r.FontClass=y},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.SizeStyle=r.SizeClass=void 0;var c=i(0),f=b(c);function b(m){return m&&m.__esModule?m:{default:m}}var w=new f.default.Attributor.Class("size","ql-size",{scope:f.default.Scope.INLINE,whitelist:["small","large","huge"]}),x=new f.default.Attributor.Style("size","font-size",{scope:f.default.Scope.INLINE,whitelist:["10px","18px","32px"]});r.SizeClass=w,r.SizeStyle=x},function(n,r,i){n.exports={align:{"":i(76),center:i(77),right:i(78),justify:i(79)},background:i(80),blockquote:i(81),bold:i(82),clean:i(83),code:i(58),"code-block":i(58),color:i(84),direction:{"":i(85),rtl:i(86)},float:{center:i(87),full:i(88),left:i(89),right:i(90)},formula:i(91),header:{1:i(92),2:i(93)},italic:i(94),image:i(95),indent:{"+1":i(96),"-1":i(97)},link:i(98),list:{ordered:i(99),bullet:i(100),check:i(101)},script:{sub:i(102),super:i(103)},strike:i(104),underline:i(105),video:i(106)}},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.getLastChangeIndex=r.default=void 0;var c=function(){function v(l,N){for(var T=0;T<N.length;T++){var S=N[T];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(l,S.key,S)}}return function(l,N,T){return N&&v(l.prototype,N),T&&v(l,T),l}}(),f=i(0),b=a(f),w=i(5),x=a(w),m=i(9),d=a(m);function a(v){return v&&v.__esModule?v:{default:v}}function o(v,l){if(!(v instanceof l))throw new TypeError("Cannot call a class as a function")}function y(v,l){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l&&(typeof l=="object"||typeof l=="function")?l:v}function g(v,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);v.prototype=Object.create(l&&l.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(v,l):v.__proto__=l)}var h=function(v){g(l,v);function l(N,T){o(this,l);var S=y(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,N,T));return S.lastRecorded=0,S.ignoreChange=!1,S.clear(),S.quill.on(x.default.events.EDITOR_CHANGE,function(k,A,_,E){k!==x.default.events.TEXT_CHANGE||S.ignoreChange||(!S.options.userOnly||E===x.default.sources.USER?S.record(A,_):S.transform(A))}),S.quill.keyboard.addBinding({key:"Z",shortKey:!0},S.undo.bind(S)),S.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},S.redo.bind(S)),/Win/i.test(navigator.platform)&&S.quill.keyboard.addBinding({key:"Y",shortKey:!0},S.redo.bind(S)),S}return c(l,[{key:"change",value:function(T,S){if(this.stack[T].length!==0){var k=this.stack[T].pop();this.stack[S].push(k),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(k[T],x.default.sources.USER),this.ignoreChange=!1;var A=u(k[T]);this.quill.setSelection(A)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(T,S){if(T.ops.length!==0){this.stack.redo=[];var k=this.quill.getContents().diff(S),A=Date.now();if(this.lastRecorded+this.options.delay>A&&this.stack.undo.length>0){var _=this.stack.undo.pop();k=k.compose(_.undo),T=_.redo.compose(T)}else this.lastRecorded=A;this.stack.undo.push({redo:T,undo:k}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(T){this.stack.undo.forEach(function(S){S.undo=T.transform(S.undo,!0),S.redo=T.transform(S.redo,!0)}),this.stack.redo.forEach(function(S){S.undo=T.transform(S.undo,!0),S.redo=T.transform(S.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),l}(d.default);h.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function p(v){var l=v.ops[v.ops.length-1];return l==null?!1:l.insert!=null?typeof l.insert=="string"&&l.insert.endsWith(`
`):l.attributes!=null?Object.keys(l.attributes).some(function(N){return b.default.query(N,b.default.Scope.BLOCK)!=null}):!1}function u(v){var l=v.reduce(function(T,S){return T+=S.delete||0,T},0),N=v.length()-l;return p(v)&&(N-=1),N}r.default=h,r.getLastChangeIndex=u},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BaseTooltip=void 0;var c=function(){function D(M,H){for(var z=0;z<H.length;z++){var U=H[z];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(M,U.key,U)}}return function(M,H,z){return H&&D(M.prototype,H),z&&D(M,z),M}}(),f=function D(M,H,z){M===null&&(M=Function.prototype);var U=Object.getOwnPropertyDescriptor(M,H);if(U===void 0){var $=Object.getPrototypeOf(M);return $===null?void 0:D($,H,z)}else{if("value"in U)return U.value;var V=U.get;return V===void 0?void 0:V.call(z)}},b=i(3),w=A(b),x=i(2),m=A(x),d=i(8),a=A(d),o=i(23),y=A(o),g=i(34),h=A(g),p=i(59),u=A(p),v=i(60),l=A(v),N=i(28),T=A(N),S=i(61),k=A(S);function A(D){return D&&D.__esModule?D:{default:D}}function _(D,M){if(!(D instanceof M))throw new TypeError("Cannot call a class as a function")}function E(D,M){if(!D)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return M&&(typeof M=="object"||typeof M=="function")?M:D}function j(D,M){if(typeof M!="function"&&M!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof M);D.prototype=Object.create(M&&M.prototype,{constructor:{value:D,enumerable:!1,writable:!0,configurable:!0}}),M&&(Object.setPrototypeOf?Object.setPrototypeOf(D,M):D.__proto__=M)}var P=[!1,"center","right","justify"],C=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],L=[!1,"serif","monospace"],F=["1","2","3",!1],B=["small",!1,"large","huge"],q=function(D){j(M,D);function M(H,z){_(this,M);var U=E(this,(M.__proto__||Object.getPrototypeOf(M)).call(this,H,z)),$=function V(W){if(!document.body.contains(H.root))return document.body.removeEventListener("click",V);U.tooltip!=null&&!U.tooltip.root.contains(W.target)&&document.activeElement!==U.tooltip.textbox&&!U.quill.hasFocus()&&U.tooltip.hide(),U.pickers!=null&&U.pickers.forEach(function(Z){Z.container.contains(W.target)||Z.close()})};return H.emitter.listenDOM("click",document.body,$),U}return c(M,[{key:"addModule",value:function(z){var U=f(M.prototype.__proto__||Object.getPrototypeOf(M.prototype),"addModule",this).call(this,z);return z==="toolbar"&&this.extendToolbar(U),U}},{key:"buildButtons",value:function(z,U){z.forEach(function($){var V=$.getAttribute("class")||"";V.split(/\s+/).forEach(function(W){if(W.startsWith("ql-")&&(W=W.slice(3),U[W]!=null))if(W==="direction")$.innerHTML=U[W][""]+U[W].rtl;else if(typeof U[W]=="string")$.innerHTML=U[W];else{var Z=$.value||"";Z!=null&&U[W][Z]&&($.innerHTML=U[W][Z])}})})}},{key:"buildPickers",value:function(z,U){var $=this;this.pickers=z.map(function(W){if(W.classList.contains("ql-align"))return W.querySelector("option")==null&&O(W,P),new l.default(W,U.align);if(W.classList.contains("ql-background")||W.classList.contains("ql-color")){var Z=W.classList.contains("ql-background")?"background":"color";return W.querySelector("option")==null&&O(W,C,Z==="background"?"#ffffff":"#000000"),new u.default(W,U[Z])}else return W.querySelector("option")==null&&(W.classList.contains("ql-font")?O(W,L):W.classList.contains("ql-header")?O(W,F):W.classList.contains("ql-size")&&O(W,B)),new T.default(W)});var V=function(){$.pickers.forEach(function(Z){Z.update()})};this.quill.on(a.default.events.EDITOR_CHANGE,V)}}]),M}(h.default);q.DEFAULTS=(0,w.default)(!0,{},h.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var M=this,H=this.container.querySelector("input.ql-image[type=file]");H==null&&(H=document.createElement("input"),H.setAttribute("type","file"),H.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),H.classList.add("ql-image"),H.addEventListener("change",function(){if(H.files!=null&&H.files[0]!=null){var z=new FileReader;z.onload=function(U){var $=M.quill.getSelection(!0);M.quill.updateContents(new m.default().retain($.index).delete($.length).insert({image:U.target.result}),a.default.sources.USER),M.quill.setSelection($.index+1,a.default.sources.SILENT),H.value=""},z.readAsDataURL(H.files[0])}}),this.container.appendChild(H)),H.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var I=function(D){j(M,D);function M(H,z){_(this,M);var U=E(this,(M.__proto__||Object.getPrototypeOf(M)).call(this,H,z));return U.textbox=U.root.querySelector('input[type="text"]'),U.listen(),U}return c(M,[{key:"listen",value:function(){var z=this;this.textbox.addEventListener("keydown",function(U){y.default.match(U,"enter")?(z.save(),U.preventDefault()):y.default.match(U,"escape")&&(z.cancel(),U.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),U!=null?this.textbox.value=U:z!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+z)||""),this.root.setAttribute("data-mode",z)}},{key:"restoreFocus",value:function(){var z=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=z}},{key:"save",value:function(){var z=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var U=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",z,a.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",z,a.default.sources.USER)),this.quill.root.scrollTop=U;break}case"video":z=R(z);case"formula":{if(!z)break;var $=this.quill.getSelection(!0);if($!=null){var V=$.index+$.length;this.quill.insertEmbed(V,this.root.getAttribute("data-mode"),z,a.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(V+1," ",a.default.sources.USER),this.quill.setSelection(V+2,a.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),M}(k.default);function R(D){var M=D.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||D.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return M?(M[1]||"https")+"://www.youtube.com/embed/"+M[2]+"?showinfo=0":(M=D.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(M[1]||"https")+"://player.vimeo.com/video/"+M[2]+"/":D}function O(D,M){var H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;M.forEach(function(z){var U=document.createElement("option");z===H?U.setAttribute("selected","selected"):U.setAttribute("value",z),D.appendChild(U)})}r.BaseTooltip=I,r.default=q},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var c=function(){function f(){this.head=this.tail=null,this.length=0}return f.prototype.append=function(){for(var b=[],w=0;w<arguments.length;w++)b[w]=arguments[w];this.insertBefore(b[0],null),b.length>1&&this.append.apply(this,b.slice(1))},f.prototype.contains=function(b){for(var w,x=this.iterator();w=x();)if(w===b)return!0;return!1},f.prototype.insertBefore=function(b,w){b&&(b.next=w,w!=null?(b.prev=w.prev,w.prev!=null&&(w.prev.next=b),w.prev=b,w===this.head&&(this.head=b)):this.tail!=null?(this.tail.next=b,b.prev=this.tail,this.tail=b):(b.prev=null,this.head=this.tail=b),this.length+=1)},f.prototype.offset=function(b){for(var w=0,x=this.head;x!=null;){if(x===b)return w;w+=x.length(),x=x.next}return-1},f.prototype.remove=function(b){this.contains(b)&&(b.prev!=null&&(b.prev.next=b.next),b.next!=null&&(b.next.prev=b.prev),b===this.head&&(this.head=b.next),b===this.tail&&(this.tail=b.prev),this.length-=1)},f.prototype.iterator=function(b){return b===void 0&&(b=this.head),function(){var w=b;return b!=null&&(b=b.next),w}},f.prototype.find=function(b,w){w===void 0&&(w=!1);for(var x,m=this.iterator();x=m();){var d=x.length();if(b<d||w&&b===d&&(x.next==null||x.next.length()!==0))return[x,b];b-=d}return[null,0]},f.prototype.forEach=function(b){for(var w,x=this.iterator();w=x();)b(w)},f.prototype.forEachAt=function(b,w,x){if(!(w<=0))for(var m=this.find(b),d=m[0],a=m[1],o,y=b-a,g=this.iterator(d);(o=g())&&y<b+w;){var h=o.length();b>y?x(o,b-y,Math.min(w,y+h-b)):x(o,0,Math.min(h,b+w-y)),y+=h}},f.prototype.map=function(b){return this.reduce(function(w,x){return w.push(b(x)),w},[])},f.prototype.reduce=function(b,w){for(var x,m=this.iterator();x=m();)w=b(w,x);return w},f}();r.default=c},function(n,r,i){var c=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,o){a.__proto__=o}||function(a,o){for(var y in o)o.hasOwnProperty(y)&&(a[y]=o[y])};return function(a,o){d(a,o);function y(){this.constructor=a}a.prototype=o===null?Object.create(o):(y.prototype=o.prototype,new y)}}();Object.defineProperty(r,"__esModule",{value:!0});var f=i(17),b=i(1),w={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},x=100,m=function(d){c(a,d);function a(o){var y=d.call(this,o)||this;return y.scroll=y,y.observer=new MutationObserver(function(g){y.update(g)}),y.observer.observe(y.domNode,w),y.attach(),y}return a.prototype.detach=function(){d.prototype.detach.call(this),this.observer.disconnect()},a.prototype.deleteAt=function(o,y){this.update(),o===0&&y===this.length()?this.children.forEach(function(g){g.remove()}):d.prototype.deleteAt.call(this,o,y)},a.prototype.formatAt=function(o,y,g,h){this.update(),d.prototype.formatAt.call(this,o,y,g,h)},a.prototype.insertAt=function(o,y,g){this.update(),d.prototype.insertAt.call(this,o,y,g)},a.prototype.optimize=function(o,y){var g=this;o===void 0&&(o=[]),y===void 0&&(y={}),d.prototype.optimize.call(this,y);for(var h=[].slice.call(this.observer.takeRecords());h.length>0;)o.push(h.pop());for(var p=function(N,T){T===void 0&&(T=!0),!(N==null||N===g)&&N.domNode.parentNode!=null&&(N.domNode[b.DATA_KEY].mutations==null&&(N.domNode[b.DATA_KEY].mutations=[]),T&&p(N.parent))},u=function(N){N.domNode[b.DATA_KEY]==null||N.domNode[b.DATA_KEY].mutations==null||(N instanceof f.default&&N.children.forEach(u),N.optimize(y))},v=o,l=0;v.length>0;l+=1){if(l>=x)throw new Error("[Parchment] Maximum optimize iterations reached");for(v.forEach(function(N){var T=b.find(N.target,!0);T!=null&&(T.domNode===N.target&&(N.type==="childList"?(p(b.find(N.previousSibling,!1)),[].forEach.call(N.addedNodes,function(S){var k=b.find(S,!1);p(k,!1),k instanceof f.default&&k.children.forEach(function(A){p(A,!1)})})):N.type==="attributes"&&p(T.prev)),p(T))}),this.children.forEach(u),v=[].slice.call(this.observer.takeRecords()),h=v.slice();h.length>0;)o.push(h.pop())}},a.prototype.update=function(o,y){var g=this;y===void 0&&(y={}),o=o||this.observer.takeRecords(),o.map(function(h){var p=b.find(h.target,!0);return p==null?null:p.domNode[b.DATA_KEY].mutations==null?(p.domNode[b.DATA_KEY].mutations=[h],p):(p.domNode[b.DATA_KEY].mutations.push(h),null)}).forEach(function(h){h==null||h===g||h.domNode[b.DATA_KEY]==null||h.update(h.domNode[b.DATA_KEY].mutations||[],y)}),this.domNode[b.DATA_KEY].mutations!=null&&d.prototype.update.call(this,this.domNode[b.DATA_KEY].mutations,y),this.optimize(o,y)},a.blotName="scroll",a.defaultChild="block",a.scope=b.Scope.BLOCK_BLOT,a.tagName="DIV",a}(f.default);r.default=m},function(n,r,i){var c=this&&this.__extends||function(){var m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,a){d.__proto__=a}||function(d,a){for(var o in a)a.hasOwnProperty(o)&&(d[o]=a[o])};return function(d,a){m(d,a);function o(){this.constructor=d}d.prototype=a===null?Object.create(a):(o.prototype=a.prototype,new o)}}();Object.defineProperty(r,"__esModule",{value:!0});var f=i(18),b=i(1);function w(m,d){if(Object.keys(m).length!==Object.keys(d).length)return!1;for(var a in m)if(m[a]!==d[a])return!1;return!0}var x=function(m){c(d,m);function d(){return m!==null&&m.apply(this,arguments)||this}return d.formats=function(a){if(a.tagName!==d.tagName)return m.formats.call(this,a)},d.prototype.format=function(a,o){var y=this;a===this.statics.blotName&&!o?(this.children.forEach(function(g){g instanceof f.default||(g=g.wrap(d.blotName,!0)),y.attributes.copy(g)}),this.unwrap()):m.prototype.format.call(this,a,o)},d.prototype.formatAt=function(a,o,y,g){if(this.formats()[y]!=null||b.query(y,b.Scope.ATTRIBUTE)){var h=this.isolate(a,o);h.format(y,g)}else m.prototype.formatAt.call(this,a,o,y,g)},d.prototype.optimize=function(a){m.prototype.optimize.call(this,a);var o=this.formats();if(Object.keys(o).length===0)return this.unwrap();var y=this.next;y instanceof d&&y.prev===this&&w(o,y.formats())&&(y.moveChildren(this),y.remove())},d.blotName="inline",d.scope=b.Scope.INLINE_BLOT,d.tagName="SPAN",d}(f.default);r.default=x},function(n,r,i){var c=this&&this.__extends||function(){var x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,d){m.__proto__=d}||function(m,d){for(var a in d)d.hasOwnProperty(a)&&(m[a]=d[a])};return function(m,d){x(m,d);function a(){this.constructor=m}m.prototype=d===null?Object.create(d):(a.prototype=d.prototype,new a)}}();Object.defineProperty(r,"__esModule",{value:!0});var f=i(18),b=i(1),w=function(x){c(m,x);function m(){return x!==null&&x.apply(this,arguments)||this}return m.formats=function(d){var a=b.query(m.blotName).tagName;if(d.tagName!==a)return x.formats.call(this,d)},m.prototype.format=function(d,a){b.query(d,b.Scope.BLOCK)!=null&&(d===this.statics.blotName&&!a?this.replaceWith(m.blotName):x.prototype.format.call(this,d,a))},m.prototype.formatAt=function(d,a,o,y){b.query(o,b.Scope.BLOCK)!=null?this.format(o,y):x.prototype.formatAt.call(this,d,a,o,y)},m.prototype.insertAt=function(d,a,o){if(o==null||b.query(a,b.Scope.INLINE)!=null)x.prototype.insertAt.call(this,d,a,o);else{var y=this.split(d),g=b.create(a,o);y.parent.insertBefore(g,y)}},m.prototype.update=function(d,a){navigator.userAgent.match(/Trident/)?this.build():x.prototype.update.call(this,d,a)},m.blotName="block",m.scope=b.Scope.BLOCK_BLOT,m.tagName="P",m}(f.default);r.default=w},function(n,r,i){var c=this&&this.__extends||function(){var w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,m){x.__proto__=m}||function(x,m){for(var d in m)m.hasOwnProperty(d)&&(x[d]=m[d])};return function(x,m){w(x,m);function d(){this.constructor=x}x.prototype=m===null?Object.create(m):(d.prototype=m.prototype,new d)}}();Object.defineProperty(r,"__esModule",{value:!0});var f=i(19),b=function(w){c(x,w);function x(){return w!==null&&w.apply(this,arguments)||this}return x.formats=function(m){},x.prototype.format=function(m,d){w.prototype.formatAt.call(this,0,this.length(),m,d)},x.prototype.formatAt=function(m,d,a,o){m===0&&d===this.length()?this.format(a,o):w.prototype.formatAt.call(this,m,d,a,o)},x.prototype.formats=function(){return this.statics.formats(this.domNode)},x}(f.default);r.default=b},function(n,r,i){var c=this&&this.__extends||function(){var x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,d){m.__proto__=d}||function(m,d){for(var a in d)d.hasOwnProperty(a)&&(m[a]=d[a])};return function(m,d){x(m,d);function a(){this.constructor=m}m.prototype=d===null?Object.create(d):(a.prototype=d.prototype,new a)}}();Object.defineProperty(r,"__esModule",{value:!0});var f=i(19),b=i(1),w=function(x){c(m,x);function m(d){var a=x.call(this,d)||this;return a.text=a.statics.value(a.domNode),a}return m.create=function(d){return document.createTextNode(d)},m.value=function(d){var a=d.data;return a.normalize&&(a=a.normalize()),a},m.prototype.deleteAt=function(d,a){this.domNode.data=this.text=this.text.slice(0,d)+this.text.slice(d+a)},m.prototype.index=function(d,a){return this.domNode===d?a:-1},m.prototype.insertAt=function(d,a,o){o==null?(this.text=this.text.slice(0,d)+a+this.text.slice(d),this.domNode.data=this.text):x.prototype.insertAt.call(this,d,a,o)},m.prototype.length=function(){return this.text.length},m.prototype.optimize=function(d){x.prototype.optimize.call(this,d),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof m&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},m.prototype.position=function(d,a){return[this.domNode,d]},m.prototype.split=function(d,a){if(a===void 0&&(a=!1),!a){if(d===0)return this;if(d===this.length())return this.next}var o=b.create(this.domNode.splitText(d));return this.parent.insertBefore(o,this.next),this.text=this.statics.value(this.domNode),o},m.prototype.update=function(d,a){var o=this;d.some(function(y){return y.type==="characterData"&&y.target===o.domNode})&&(this.text=this.statics.value(this.domNode))},m.prototype.value=function(){return this.text},m.blotName="text",m.scope=b.Scope.INLINE_BLOT,m}(f.default);r.default=w},function(n,r,i){var c=document.createElement("div");if(c.classList.toggle("test-class",!1),c.classList.contains("test-class")){var f=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(b,w){return arguments.length>1&&!this.contains(b)==!w?w:f.call(this,b)}}String.prototype.startsWith||(String.prototype.startsWith=function(b,w){return w=w||0,this.substr(w,b.length)===b}),String.prototype.endsWith||(String.prototype.endsWith=function(b,w){var x=this.toString();(typeof w!="number"||!isFinite(w)||Math.floor(w)!==w||w>x.length)&&(w=x.length),w-=b.length;var m=x.indexOf(b,w);return m!==-1&&m===w}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(w){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof w!="function")throw new TypeError("predicate must be a function");for(var x=Object(this),m=x.length>>>0,d=arguments[1],a,o=0;o<m;o++)if(a=x[o],w.call(d,a,o,x))return a}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(n,r){var i=-1,c=1,f=0;function b(l,N,T){if(l==N)return l?[[f,l]]:[];(T<0||l.length<T)&&(T=null);var S=d(l,N),k=l.substring(0,S);l=l.substring(S),N=N.substring(S),S=a(l,N);var A=l.substring(l.length-S);l=l.substring(0,l.length-S),N=N.substring(0,N.length-S);var _=w(l,N);return k&&_.unshift([f,k]),A&&_.push([f,A]),y(_),T!=null&&(_=p(_,T)),_=u(_),_}function w(l,N){var T;if(!l)return[[c,N]];if(!N)return[[i,l]];var S=l.length>N.length?l:N,k=l.length>N.length?N:l,A=S.indexOf(k);if(A!=-1)return T=[[c,S.substring(0,A)],[f,k],[c,S.substring(A+k.length)]],l.length>N.length&&(T[0][0]=T[2][0]=i),T;if(k.length==1)return[[i,l],[c,N]];var _=o(l,N);if(_){var E=_[0],j=_[1],P=_[2],C=_[3],L=_[4],F=b(E,P),B=b(j,C);return F.concat([[f,L]],B)}return x(l,N)}function x(l,N){for(var T=l.length,S=N.length,k=Math.ceil((T+S)/2),A=k,_=2*k,E=new Array(_),j=new Array(_),P=0;P<_;P++)E[P]=-1,j[P]=-1;E[A+1]=0,j[A+1]=0;for(var C=T-S,L=C%2!=0,F=0,B=0,q=0,I=0,R=0;R<k;R++){for(var O=-R+F;O<=R-B;O+=2){var D=A+O,M;O==-R||O!=R&&E[D-1]<E[D+1]?M=E[D+1]:M=E[D-1]+1;for(var H=M-O;M<T&&H<S&&l.charAt(M)==N.charAt(H);)M++,H++;if(E[D]=M,M>T)B+=2;else if(H>S)F+=2;else if(L){var z=A+C-O;if(z>=0&&z<_&&j[z]!=-1){var U=T-j[z];if(M>=U)return m(l,N,M,H)}}}for(var $=-R+q;$<=R-I;$+=2){var z=A+$,U;$==-R||$!=R&&j[z-1]<j[z+1]?U=j[z+1]:U=j[z-1]+1;for(var V=U-$;U<T&&V<S&&l.charAt(T-U-1)==N.charAt(S-V-1);)U++,V++;if(j[z]=U,U>T)I+=2;else if(V>S)q+=2;else if(!L){var D=A+C-$;if(D>=0&&D<_&&E[D]!=-1){var M=E[D],H=A+M-D;if(U=T-U,M>=U)return m(l,N,M,H)}}}}return[[i,l],[c,N]]}function m(l,N,T,S){var k=l.substring(0,T),A=N.substring(0,S),_=l.substring(T),E=N.substring(S),j=b(k,A),P=b(_,E);return j.concat(P)}function d(l,N){if(!l||!N||l.charAt(0)!=N.charAt(0))return 0;for(var T=0,S=Math.min(l.length,N.length),k=S,A=0;T<k;)l.substring(A,k)==N.substring(A,k)?(T=k,A=T):S=k,k=Math.floor((S-T)/2+T);return k}function a(l,N){if(!l||!N||l.charAt(l.length-1)!=N.charAt(N.length-1))return 0;for(var T=0,S=Math.min(l.length,N.length),k=S,A=0;T<k;)l.substring(l.length-k,l.length-A)==N.substring(N.length-k,N.length-A)?(T=k,A=T):S=k,k=Math.floor((S-T)/2+T);return k}function o(l,N){var T=l.length>N.length?l:N,S=l.length>N.length?N:l;if(T.length<4||S.length*2<T.length)return null;function k(B,q,I){for(var R=B.substring(I,I+Math.floor(B.length/4)),O=-1,D="",M,H,z,U;(O=q.indexOf(R,O+1))!=-1;){var $=d(B.substring(I),q.substring(O)),V=a(B.substring(0,I),q.substring(0,O));D.length<V+$&&(D=q.substring(O-V,O)+q.substring(O,O+$),M=B.substring(0,I-V),H=B.substring(I+$),z=q.substring(0,O-V),U=q.substring(O+$))}return D.length*2>=B.length?[M,H,z,U,D]:null}var A=k(T,S,Math.ceil(T.length/4)),_=k(T,S,Math.ceil(T.length/2)),E;if(!A&&!_)return null;_?A?E=A[4].length>_[4].length?A:_:E=_:E=A;var j,P,C,L;l.length>N.length?(j=E[0],P=E[1],C=E[2],L=E[3]):(C=E[0],L=E[1],j=E[2],P=E[3]);var F=E[4];return[j,P,C,L,F]}function y(l){l.push([f,""]);for(var N=0,T=0,S=0,k="",A="",_;N<l.length;)switch(l[N][0]){case c:S++,A+=l[N][1],N++;break;case i:T++,k+=l[N][1],N++;break;case f:T+S>1?(T!==0&&S!==0&&(_=d(A,k),_!==0&&(N-T-S>0&&l[N-T-S-1][0]==f?l[N-T-S-1][1]+=A.substring(0,_):(l.splice(0,0,[f,A.substring(0,_)]),N++),A=A.substring(_),k=k.substring(_)),_=a(A,k),_!==0&&(l[N][1]=A.substring(A.length-_)+l[N][1],A=A.substring(0,A.length-_),k=k.substring(0,k.length-_))),T===0?l.splice(N-S,T+S,[c,A]):S===0?l.splice(N-T,T+S,[i,k]):l.splice(N-T-S,T+S,[i,k],[c,A]),N=N-T-S+(T?1:0)+(S?1:0)+1):N!==0&&l[N-1][0]==f?(l[N-1][1]+=l[N][1],l.splice(N,1)):N++,S=0,T=0,k="",A="";break}l[l.length-1][1]===""&&l.pop();var E=!1;for(N=1;N<l.length-1;)l[N-1][0]==f&&l[N+1][0]==f&&(l[N][1].substring(l[N][1].length-l[N-1][1].length)==l[N-1][1]?(l[N][1]=l[N-1][1]+l[N][1].substring(0,l[N][1].length-l[N-1][1].length),l[N+1][1]=l[N-1][1]+l[N+1][1],l.splice(N-1,1),E=!0):l[N][1].substring(0,l[N+1][1].length)==l[N+1][1]&&(l[N-1][1]+=l[N+1][1],l[N][1]=l[N][1].substring(l[N+1][1].length)+l[N+1][1],l.splice(N+1,1),E=!0)),N++;E&&y(l)}var g=b;g.INSERT=c,g.DELETE=i,g.EQUAL=f,n.exports=g;function h(l,N){if(N===0)return[f,l];for(var T=0,S=0;S<l.length;S++){var k=l[S];if(k[0]===i||k[0]===f){var A=T+k[1].length;if(N===A)return[S+1,l];if(N<A){l=l.slice();var _=N-T,E=[k[0],k[1].slice(0,_)],j=[k[0],k[1].slice(_)];return l.splice(S,1,E,j),[S+1,l]}else T=A}}throw new Error("cursor_pos is out of bounds!")}function p(l,N){var T=h(l,N),S=T[1],k=T[0],A=S[k],_=S[k+1];if(A==null)return l;if(A[0]!==f)return l;if(_!=null&&A[1]+_[1]===_[1]+A[1])return S.splice(k,2,_,A),v(S,k,2);if(_!=null&&_[1].indexOf(A[1])===0){S.splice(k,2,[_[0],A[1]],[0,A[1]]);var E=_[1].slice(A[1].length);return E.length>0&&S.splice(k+2,0,[_[0],E]),v(S,k,3)}else return l}function u(l){for(var N=!1,T=function(_){return _.charCodeAt(0)>=56320&&_.charCodeAt(0)<=57343},S=function(_){return _.charCodeAt(_.length-1)>=55296&&_.charCodeAt(_.length-1)<=56319},k=2;k<l.length;k+=1)l[k-2][0]===f&&S(l[k-2][1])&&l[k-1][0]===i&&T(l[k-1][1])&&l[k][0]===c&&T(l[k][1])&&(N=!0,l[k-1][1]=l[k-2][1].slice(-1)+l[k-1][1],l[k][1]=l[k-2][1].slice(-1)+l[k][1],l[k-2][1]=l[k-2][1].slice(0,-1));if(!N)return l;for(var A=[],k=0;k<l.length;k+=1)l[k][1].length>0&&A.push(l[k]);return A}function v(l,N,T){for(var S=N+T-1;S>=0&&S>=N-1;S--)if(S+1<l.length){var k=l[S],A=l[S+1];k[0]===A[1]&&l.splice(S,2,[k[0],k[1]+A[1]])}return l}},function(n,r){r=n.exports=typeof Object.keys=="function"?Object.keys:i,r.shim=i;function i(c){var f=[];for(var b in c)f.push(b);return f}},function(n,r){var i=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";r=n.exports=i?c:f,r.supported=c;function c(b){return Object.prototype.toString.call(b)=="[object Arguments]"}r.unsupported=f;function f(b){return b&&typeof b=="object"&&typeof b.length=="number"&&Object.prototype.hasOwnProperty.call(b,"callee")&&!Object.prototype.propertyIsEnumerable.call(b,"callee")||!1}},function(n,r){var i=Object.prototype.hasOwnProperty,c="~";function f(){}Object.create&&(f.prototype=Object.create(null),new f().__proto__||(c=!1));function b(x,m,d){this.fn=x,this.context=m,this.once=d||!1}function w(){this._events=new f,this._eventsCount=0}w.prototype.eventNames=function(){var m=[],d,a;if(this._eventsCount===0)return m;for(a in d=this._events)i.call(d,a)&&m.push(c?a.slice(1):a);return Object.getOwnPropertySymbols?m.concat(Object.getOwnPropertySymbols(d)):m},w.prototype.listeners=function(m,d){var a=c?c+m:m,o=this._events[a];if(d)return!!o;if(!o)return[];if(o.fn)return[o.fn];for(var y=0,g=o.length,h=new Array(g);y<g;y++)h[y]=o[y].fn;return h},w.prototype.emit=function(m,d,a,o,y,g){var h=c?c+m:m;if(!this._events[h])return!1;var p=this._events[h],u=arguments.length,v,l;if(p.fn){switch(p.once&&this.removeListener(m,p.fn,void 0,!0),u){case 1:return p.fn.call(p.context),!0;case 2:return p.fn.call(p.context,d),!0;case 3:return p.fn.call(p.context,d,a),!0;case 4:return p.fn.call(p.context,d,a,o),!0;case 5:return p.fn.call(p.context,d,a,o,y),!0;case 6:return p.fn.call(p.context,d,a,o,y,g),!0}for(l=1,v=new Array(u-1);l<u;l++)v[l-1]=arguments[l];p.fn.apply(p.context,v)}else{var N=p.length,T;for(l=0;l<N;l++)switch(p[l].once&&this.removeListener(m,p[l].fn,void 0,!0),u){case 1:p[l].fn.call(p[l].context);break;case 2:p[l].fn.call(p[l].context,d);break;case 3:p[l].fn.call(p[l].context,d,a);break;case 4:p[l].fn.call(p[l].context,d,a,o);break;default:if(!v)for(T=1,v=new Array(u-1);T<u;T++)v[T-1]=arguments[T];p[l].fn.apply(p[l].context,v)}}return!0},w.prototype.on=function(m,d,a){var o=new b(d,a||this),y=c?c+m:m;return this._events[y]?this._events[y].fn?this._events[y]=[this._events[y],o]:this._events[y].push(o):(this._events[y]=o,this._eventsCount++),this},w.prototype.once=function(m,d,a){var o=new b(d,a||this,!0),y=c?c+m:m;return this._events[y]?this._events[y].fn?this._events[y]=[this._events[y],o]:this._events[y].push(o):(this._events[y]=o,this._eventsCount++),this},w.prototype.removeListener=function(m,d,a,o){var y=c?c+m:m;if(!this._events[y])return this;if(!d)return--this._eventsCount===0?this._events=new f:delete this._events[y],this;var g=this._events[y];if(g.fn)g.fn===d&&(!o||g.once)&&(!a||g.context===a)&&(--this._eventsCount===0?this._events=new f:delete this._events[y]);else{for(var h=0,p=[],u=g.length;h<u;h++)(g[h].fn!==d||o&&!g[h].once||a&&g[h].context!==a)&&p.push(g[h]);p.length?this._events[y]=p.length===1?p[0]:p:--this._eventsCount===0?this._events=new f:delete this._events[y]}return this},w.prototype.removeAllListeners=function(m){var d;return m?(d=c?c+m:m,this._events[d]&&(--this._eventsCount===0?this._events=new f:delete this._events[d])):(this._events=new f,this._eventsCount=0),this},w.prototype.off=w.prototype.removeListener,w.prototype.addListener=w.prototype.on,w.prototype.setMaxListeners=function(){return this},w.prefixed=c,w.EventEmitter=w,typeof n<"u"&&(n.exports=w)},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.matchText=r.matchSpacing=r.matchNewline=r.matchBlot=r.matchAttributor=r.default=void 0;var c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(J){return typeof J}:function(J){return J&&typeof Symbol=="function"&&J.constructor===Symbol&&J!==Symbol.prototype?"symbol":typeof J},f=function(){function J(Y,te){var re=[],X=!0,ce=!1,ue=void 0;try{for(var de=Y[Symbol.iterator](),Ee;!(X=(Ee=de.next()).done)&&(re.push(Ee.value),!(te&&re.length===te));X=!0);}catch(Te){ce=!0,ue=Te}finally{try{!X&&de.return&&de.return()}finally{if(ce)throw ue}}return re}return function(Y,te){if(Array.isArray(Y))return Y;if(Symbol.iterator in Object(Y))return J(Y,te);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),b=function(){function J(Y,te){for(var re=0;re<te.length;re++){var X=te[re];X.enumerable=X.enumerable||!1,X.configurable=!0,"value"in X&&(X.writable=!0),Object.defineProperty(Y,X.key,X)}}return function(Y,te,re){return te&&J(Y.prototype,te),re&&J(Y,re),Y}}(),w=i(3),x=j(w),m=i(2),d=j(m),a=i(0),o=j(a),y=i(5),g=j(y),h=i(10),p=j(h),u=i(9),v=j(u),l=i(36),N=i(37),T=i(13),S=j(T),k=i(26),A=i(38),_=i(39),E=i(40);function j(J){return J&&J.__esModule?J:{default:J}}function P(J,Y,te){return Y in J?Object.defineProperty(J,Y,{value:te,enumerable:!0,configurable:!0,writable:!0}):J[Y]=te,J}function C(J,Y){if(!(J instanceof Y))throw new TypeError("Cannot call a class as a function")}function L(J,Y){if(!J)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Y&&(typeof Y=="object"||typeof Y=="function")?Y:J}function F(J,Y){if(typeof Y!="function"&&Y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Y);J.prototype=Object.create(Y&&Y.prototype,{constructor:{value:J,enumerable:!1,writable:!0,configurable:!0}}),Y&&(Object.setPrototypeOf?Object.setPrototypeOf(J,Y):J.__proto__=Y)}var B=(0,p.default)("quill:clipboard"),q="__ql-matcher",I=[[Node.TEXT_NODE,ve],[Node.TEXT_NODE,he],["br",Q],[Node.ELEMENT_NODE,he],[Node.ELEMENT_NODE,Z],[Node.ELEMENT_NODE,pe],[Node.ELEMENT_NODE,W],[Node.ELEMENT_NODE,we],["li",oe],["b",V.bind(V,"bold")],["i",V.bind(V,"italic")],["style",ne]],R=[l.AlignAttribute,A.DirectionAttribute].reduce(function(J,Y){return J[Y.keyName]=Y,J},{}),O=[l.AlignStyle,N.BackgroundStyle,k.ColorStyle,A.DirectionStyle,_.FontStyle,E.SizeStyle].reduce(function(J,Y){return J[Y.keyName]=Y,J},{}),D=function(J){F(Y,J);function Y(te,re){C(this,Y);var X=L(this,(Y.__proto__||Object.getPrototypeOf(Y)).call(this,te,re));return X.quill.root.addEventListener("paste",X.onPaste.bind(X)),X.container=X.quill.addContainer("ql-clipboard"),X.container.setAttribute("contenteditable",!0),X.container.setAttribute("tabindex",-1),X.matchers=[],I.concat(X.options.matchers).forEach(function(ce){var ue=f(ce,2),de=ue[0],Ee=ue[1];!re.matchVisual&&Ee===pe||X.addMatcher(de,Ee)}),X}return b(Y,[{key:"addMatcher",value:function(re,X){this.matchers.push([re,X])}},{key:"convert",value:function(re){if(typeof re=="string")return this.container.innerHTML=re.replace(/\>\r?\n +\</g,"><"),this.convert();var X=this.quill.getFormat(this.quill.selection.savedRange.index);if(X[S.default.blotName]){var ce=this.container.innerText;return this.container.innerHTML="",new d.default().insert(ce,P({},S.default.blotName,X[S.default.blotName]))}var ue=this.prepareMatching(),de=f(ue,2),Ee=de[0],Te=de[1],me=$(this.container,Ee,Te);return z(me,`
`)&&me.ops[me.ops.length-1].attributes==null&&(me=me.compose(new d.default().retain(me.length()-1).delete(1))),B.log("convert",this.container.innerHTML,me),this.container.innerHTML="",me}},{key:"dangerouslyPasteHTML",value:function(re,X){var ce=arguments.length>2&&arguments[2]!==void 0?arguments[2]:g.default.sources.API;if(typeof re=="string")this.quill.setContents(this.convert(re),X),this.quill.setSelection(0,g.default.sources.SILENT);else{var ue=this.convert(X);this.quill.updateContents(new d.default().retain(re).concat(ue),ce),this.quill.setSelection(re+ue.length(),g.default.sources.SILENT)}}},{key:"onPaste",value:function(re){var X=this;if(!(re.defaultPrevented||!this.quill.isEnabled())){var ce=this.quill.getSelection(),ue=new d.default().retain(ce.index),de=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(g.default.sources.SILENT),setTimeout(function(){ue=ue.concat(X.convert()).delete(ce.length),X.quill.updateContents(ue,g.default.sources.USER),X.quill.setSelection(ue.length()-ce.length,g.default.sources.SILENT),X.quill.scrollingContainer.scrollTop=de,X.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var re=this,X=[],ce=[];return this.matchers.forEach(function(ue){var de=f(ue,2),Ee=de[0],Te=de[1];switch(Ee){case Node.TEXT_NODE:ce.push(Te);break;case Node.ELEMENT_NODE:X.push(Te);break;default:[].forEach.call(re.container.querySelectorAll(Ee),function(me){me[q]=me[q]||[],me[q].push(Te)});break}}),[X,ce]}}]),Y}(v.default);D.DEFAULTS={matchers:[],matchVisual:!0};function M(J,Y,te){return(typeof Y>"u"?"undefined":c(Y))==="object"?Object.keys(Y).reduce(function(re,X){return M(re,X,Y[X])},J):J.reduce(function(re,X){return X.attributes&&X.attributes[Y]?re.push(X):re.insert(X.insert,(0,x.default)({},P({},Y,te),X.attributes))},new d.default)}function H(J){if(J.nodeType!==Node.ELEMENT_NODE)return{};var Y="__ql-computed-style";return J[Y]||(J[Y]=window.getComputedStyle(J))}function z(J,Y){for(var te="",re=J.ops.length-1;re>=0&&te.length<Y.length;--re){var X=J.ops[re];if(typeof X.insert!="string")break;te=X.insert+te}return te.slice(-1*Y.length)===Y}function U(J){if(J.childNodes.length===0)return!1;var Y=H(J);return["block","list-item"].indexOf(Y.display)>-1}function $(J,Y,te){return J.nodeType===J.TEXT_NODE?te.reduce(function(re,X){return X(J,re)},new d.default):J.nodeType===J.ELEMENT_NODE?[].reduce.call(J.childNodes||[],function(re,X){var ce=$(X,Y,te);return X.nodeType===J.ELEMENT_NODE&&(ce=Y.reduce(function(ue,de){return de(X,ue)},ce),ce=(X[q]||[]).reduce(function(ue,de){return de(X,ue)},ce)),re.concat(ce)},new d.default):new d.default}function V(J,Y,te){return M(te,J,!0)}function W(J,Y){var te=o.default.Attributor.Attribute.keys(J),re=o.default.Attributor.Class.keys(J),X=o.default.Attributor.Style.keys(J),ce={};return te.concat(re).concat(X).forEach(function(ue){var de=o.default.query(ue,o.default.Scope.ATTRIBUTE);de!=null&&(ce[de.attrName]=de.value(J),ce[de.attrName])||(de=R[ue],de!=null&&(de.attrName===ue||de.keyName===ue)&&(ce[de.attrName]=de.value(J)||void 0),de=O[ue],de!=null&&(de.attrName===ue||de.keyName===ue)&&(de=O[ue],ce[de.attrName]=de.value(J)||void 0))}),Object.keys(ce).length>0&&(Y=M(Y,ce)),Y}function Z(J,Y){var te=o.default.query(J);if(te==null)return Y;if(te.prototype instanceof o.default.Embed){var re={},X=te.value(J);X!=null&&(re[te.blotName]=X,Y=new d.default().insert(re,te.formats(J)))}else typeof te.formats=="function"&&(Y=M(Y,te.blotName,te.formats(J)));return Y}function Q(J,Y){return z(Y,`
`)||Y.insert(`
`),Y}function ne(){return new d.default}function oe(J,Y){var te=o.default.query(J);if(te==null||te.blotName!=="list-item"||!z(Y,`
`))return Y;for(var re=-1,X=J.parentNode;!X.classList.contains("ql-clipboard");)(o.default.query(X)||{}).blotName==="list"&&(re+=1),X=X.parentNode;return re<=0?Y:Y.compose(new d.default().retain(Y.length()-1).retain(1,{indent:re}))}function he(J,Y){return z(Y,`
`)||(U(J)||Y.length()>0&&J.nextSibling&&U(J.nextSibling))&&Y.insert(`
`),Y}function pe(J,Y){if(U(J)&&J.nextElementSibling!=null&&!z(Y,`

`)){var te=J.offsetHeight+parseFloat(H(J).marginTop)+parseFloat(H(J).marginBottom);J.nextElementSibling.offsetTop>J.offsetTop+te*1.5&&Y.insert(`
`)}return Y}function we(J,Y){var te={},re=J.style||{};return re.fontStyle&&H(J).fontStyle==="italic"&&(te.italic=!0),re.fontWeight&&(H(J).fontWeight.startsWith("bold")||parseInt(H(J).fontWeight)>=700)&&(te.bold=!0),Object.keys(te).length>0&&(Y=M(Y,te)),parseFloat(re.textIndent||0)>0&&(Y=new d.default().insert("	").concat(Y)),Y}function ve(J,Y){var te=J.data;if(J.parentNode.tagName==="O:P")return Y.insert(te.trim());if(te.trim().length===0&&J.parentNode.classList.contains("ql-clipboard"))return Y;if(!H(J.parentNode).whiteSpace.startsWith("pre")){var re=function(ce,ue){return ue=ue.replace(/[^\u00a0]/g,""),ue.length<1&&ce?" ":ue};te=te.replace(/\r\n/g," ").replace(/\n/g," "),te=te.replace(/\s\s+/g,re.bind(re,!0)),(J.previousSibling==null&&U(J.parentNode)||J.previousSibling!=null&&U(J.previousSibling))&&(te=te.replace(/^\s+/,re.bind(re,!1))),(J.nextSibling==null&&U(J.parentNode)||J.nextSibling!=null&&U(J.nextSibling))&&(te=te.replace(/\s+$/,re.bind(re,!1)))}return Y.insert(te)}r.default=D,r.matchAttributor=W,r.matchBlot=Z,r.matchNewline=he,r.matchSpacing=pe,r.matchText=ve},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var c=function(){function y(g,h){for(var p=0;p<h.length;p++){var u=h[p];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(g,u.key,u)}}return function(g,h,p){return h&&y(g.prototype,h),p&&y(g,p),g}}(),f=function y(g,h,p){g===null&&(g=Function.prototype);var u=Object.getOwnPropertyDescriptor(g,h);if(u===void 0){var v=Object.getPrototypeOf(g);return v===null?void 0:y(v,h,p)}else{if("value"in u)return u.value;var l=u.get;return l===void 0?void 0:l.call(p)}},b=i(6),w=x(b);function x(y){return y&&y.__esModule?y:{default:y}}function m(y,g){if(!(y instanceof g))throw new TypeError("Cannot call a class as a function")}function d(y,g){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:y}function a(y,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);y.prototype=Object.create(g&&g.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(y,g):y.__proto__=g)}var o=function(y){a(g,y);function g(){return m(this,g),d(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return c(g,[{key:"optimize",value:function(p){f(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"optimize",this).call(this,p),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return f(g.__proto__||Object.getPrototypeOf(g),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),g}(w.default);o.blotName="bold",o.tagName=["STRONG","B"],r.default=o},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.addControls=r.default=void 0;var c=function(){function E(j,P){var C=[],L=!0,F=!1,B=void 0;try{for(var q=j[Symbol.iterator](),I;!(L=(I=q.next()).done)&&(C.push(I.value),!(P&&C.length===P));L=!0);}catch(R){F=!0,B=R}finally{try{!L&&q.return&&q.return()}finally{if(F)throw B}}return C}return function(j,P){if(Array.isArray(j))return j;if(Symbol.iterator in Object(j))return E(j,P);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f=function(){function E(j,P){for(var C=0;C<P.length;C++){var L=P[C];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(j,L.key,L)}}return function(j,P,C){return P&&E(j.prototype,P),C&&E(j,C),j}}(),b=i(2),w=p(b),x=i(0),m=p(x),d=i(5),a=p(d),o=i(10),y=p(o),g=i(9),h=p(g);function p(E){return E&&E.__esModule?E:{default:E}}function u(E,j,P){return j in E?Object.defineProperty(E,j,{value:P,enumerable:!0,configurable:!0,writable:!0}):E[j]=P,E}function v(E,j){if(!(E instanceof j))throw new TypeError("Cannot call a class as a function")}function l(E,j){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j&&(typeof j=="object"||typeof j=="function")?j:E}function N(E,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof j);E.prototype=Object.create(j&&j.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),j&&(Object.setPrototypeOf?Object.setPrototypeOf(E,j):E.__proto__=j)}var T=(0,y.default)("quill:toolbar"),S=function(E){N(j,E);function j(P,C){v(this,j);var L=l(this,(j.__proto__||Object.getPrototypeOf(j)).call(this,P,C));if(Array.isArray(L.options.container)){var F=document.createElement("div");A(F,L.options.container),P.container.parentNode.insertBefore(F,P.container),L.container=F}else typeof L.options.container=="string"?L.container=document.querySelector(L.options.container):L.container=L.options.container;if(!(L.container instanceof HTMLElement)){var B;return B=T.error("Container required for toolbar",L.options),l(L,B)}return L.container.classList.add("ql-toolbar"),L.controls=[],L.handlers={},Object.keys(L.options.handlers).forEach(function(q){L.addHandler(q,L.options.handlers[q])}),[].forEach.call(L.container.querySelectorAll("button, select"),function(q){L.attach(q)}),L.quill.on(a.default.events.EDITOR_CHANGE,function(q,I){q===a.default.events.SELECTION_CHANGE&&L.update(I)}),L.quill.on(a.default.events.SCROLL_OPTIMIZE,function(){var q=L.quill.selection.getRange(),I=c(q,1),R=I[0];L.update(R)}),L}return f(j,[{key:"addHandler",value:function(C,L){this.handlers[C]=L}},{key:"attach",value:function(C){var L=this,F=[].find.call(C.classList,function(q){return q.indexOf("ql-")===0});if(F){if(F=F.slice(3),C.tagName==="BUTTON"&&C.setAttribute("type","button"),this.handlers[F]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[F]==null){T.warn("ignoring attaching to disabled format",F,C);return}if(m.default.query(F)==null){T.warn("ignoring attaching to nonexistent format",F,C);return}}var B=C.tagName==="SELECT"?"change":"click";C.addEventListener(B,function(q){var I=void 0;if(C.tagName==="SELECT"){if(C.selectedIndex<0)return;var R=C.options[C.selectedIndex];R.hasAttribute("selected")?I=!1:I=R.value||!1}else C.classList.contains("ql-active")?I=!1:I=C.value||!C.hasAttribute("value"),q.preventDefault();L.quill.focus();var O=L.quill.selection.getRange(),D=c(O,1),M=D[0];if(L.handlers[F]!=null)L.handlers[F].call(L,I);else if(m.default.query(F).prototype instanceof m.default.Embed){if(I=prompt("Enter "+F),!I)return;L.quill.updateContents(new w.default().retain(M.index).delete(M.length).insert(u({},F,I)),a.default.sources.USER)}else L.quill.format(F,I,a.default.sources.USER);L.update(M)}),this.controls.push([F,C])}}},{key:"update",value:function(C){var L=C==null?{}:this.quill.getFormat(C);this.controls.forEach(function(F){var B=c(F,2),q=B[0],I=B[1];if(I.tagName==="SELECT"){var R=void 0;if(C==null)R=null;else if(L[q]==null)R=I.querySelector("option[selected]");else if(!Array.isArray(L[q])){var O=L[q];typeof O=="string"&&(O=O.replace(/\"/g,'\\"')),R=I.querySelector('option[value="'+O+'"]')}R==null?(I.value="",I.selectedIndex=-1):R.selected=!0}else if(C==null)I.classList.remove("ql-active");else if(I.hasAttribute("value")){var D=L[q]===I.getAttribute("value")||L[q]!=null&&L[q].toString()===I.getAttribute("value")||L[q]==null&&!I.getAttribute("value");I.classList.toggle("ql-active",D)}else I.classList.toggle("ql-active",L[q]!=null)})}}]),j}(h.default);S.DEFAULTS={};function k(E,j,P){var C=document.createElement("button");C.setAttribute("type","button"),C.classList.add("ql-"+j),P!=null&&(C.value=P),E.appendChild(C)}function A(E,j){Array.isArray(j[0])||(j=[j]),j.forEach(function(P){var C=document.createElement("span");C.classList.add("ql-formats"),P.forEach(function(L){if(typeof L=="string")k(C,L);else{var F=Object.keys(L)[0],B=L[F];Array.isArray(B)?_(C,F,B):k(C,F,B)}}),E.appendChild(C)})}function _(E,j,P){var C=document.createElement("select");C.classList.add("ql-"+j),P.forEach(function(L){var F=document.createElement("option");L!==!1?F.setAttribute("value",L):F.setAttribute("selected","selected"),C.appendChild(F)}),E.appendChild(C)}S.DEFAULTS={container:null,handlers:{clean:function(){var j=this,P=this.quill.getSelection();if(P!=null)if(P.length==0){var C=this.quill.getFormat();Object.keys(C).forEach(function(L){m.default.query(L,m.default.Scope.INLINE)!=null&&j.quill.format(L,!1)})}else this.quill.removeFormat(P,a.default.sources.USER)},direction:function(j){var P=this.quill.getFormat().align;j==="rtl"&&P==null?this.quill.format("align","right",a.default.sources.USER):!j&&P==="right"&&this.quill.format("align",!1,a.default.sources.USER),this.quill.format("direction",j,a.default.sources.USER)},indent:function(j){var P=this.quill.getSelection(),C=this.quill.getFormat(P),L=parseInt(C.indent||0);if(j==="+1"||j==="-1"){var F=j==="+1"?1:-1;C.direction==="rtl"&&(F*=-1),this.quill.format("indent",L+F,a.default.sources.USER)}},link:function(j){j===!0&&(j=prompt("Enter link URL:")),this.quill.format("link",j,a.default.sources.USER)},list:function(j){var P=this.quill.getSelection(),C=this.quill.getFormat(P);j==="check"?C.list==="checked"||C.list==="unchecked"?this.quill.format("list",!1,a.default.sources.USER):this.quill.format("list","unchecked",a.default.sources.USER):this.quill.format("list",j,a.default.sources.USER)}}},r.default=S,r.addControls=A},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var c=function(){function y(g,h){for(var p=0;p<h.length;p++){var u=h[p];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(g,u.key,u)}}return function(g,h,p){return h&&y(g.prototype,h),p&&y(g,p),g}}(),f=function y(g,h,p){g===null&&(g=Function.prototype);var u=Object.getOwnPropertyDescriptor(g,h);if(u===void 0){var v=Object.getPrototypeOf(g);return v===null?void 0:y(v,h,p)}else{if("value"in u)return u.value;var l=u.get;return l===void 0?void 0:l.call(p)}},b=i(28),w=x(b);function x(y){return y&&y.__esModule?y:{default:y}}function m(y,g){if(!(y instanceof g))throw new TypeError("Cannot call a class as a function")}function d(y,g){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:y}function a(y,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);y.prototype=Object.create(g&&g.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(y,g):y.__proto__=g)}var o=function(y){a(g,y);function g(h,p){m(this,g);var u=d(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,h));return u.label.innerHTML=p,u.container.classList.add("ql-color-picker"),[].slice.call(u.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(v){v.classList.add("ql-primary")}),u}return c(g,[{key:"buildItem",value:function(p){var u=f(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"buildItem",this).call(this,p);return u.style.backgroundColor=p.getAttribute("value")||"",u}},{key:"selectItem",value:function(p,u){f(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"selectItem",this).call(this,p,u);var v=this.label.querySelector(".ql-color-label"),l=p&&p.getAttribute("data-value")||"";v&&(v.tagName==="line"?v.style.stroke=l:v.style.fill=l)}}]),g}(w.default);r.default=o},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var c=function(){function y(g,h){for(var p=0;p<h.length;p++){var u=h[p];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(g,u.key,u)}}return function(g,h,p){return h&&y(g.prototype,h),p&&y(g,p),g}}(),f=function y(g,h,p){g===null&&(g=Function.prototype);var u=Object.getOwnPropertyDescriptor(g,h);if(u===void 0){var v=Object.getPrototypeOf(g);return v===null?void 0:y(v,h,p)}else{if("value"in u)return u.value;var l=u.get;return l===void 0?void 0:l.call(p)}},b=i(28),w=x(b);function x(y){return y&&y.__esModule?y:{default:y}}function m(y,g){if(!(y instanceof g))throw new TypeError("Cannot call a class as a function")}function d(y,g){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:y}function a(y,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);y.prototype=Object.create(g&&g.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(y,g):y.__proto__=g)}var o=function(y){a(g,y);function g(h,p){m(this,g);var u=d(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,h));return u.container.classList.add("ql-icon-picker"),[].forEach.call(u.container.querySelectorAll(".ql-picker-item"),function(v){v.innerHTML=p[v.getAttribute("data-value")||""]}),u.defaultItem=u.container.querySelector(".ql-selected"),u.selectItem(u.defaultItem),u}return c(g,[{key:"selectItem",value:function(p,u){f(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"selectItem",this).call(this,p,u),p=p||this.defaultItem,this.label.innerHTML=p.innerHTML}}]),g}(w.default);r.default=o},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var c=function(){function w(x,m){for(var d=0;d<m.length;d++){var a=m[d];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(x,a.key,a)}}return function(x,m,d){return m&&w(x.prototype,m),d&&w(x,d),x}}();function f(w,x){if(!(w instanceof x))throw new TypeError("Cannot call a class as a function")}var b=function(){function w(x,m){var d=this;f(this,w),this.quill=x,this.boundsContainer=m||document.body,this.root=x.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){d.root.style.marginTop=-1*d.quill.root.scrollTop+"px"}),this.hide()}return c(w,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(m){var d=m.left+m.width/2-this.root.offsetWidth/2,a=m.bottom+this.quill.root.scrollTop;this.root.style.left=d+"px",this.root.style.top=a+"px",this.root.classList.remove("ql-flip");var o=this.boundsContainer.getBoundingClientRect(),y=this.root.getBoundingClientRect(),g=0;if(y.right>o.right&&(g=o.right-y.right,this.root.style.left=d+g+"px"),y.left<o.left&&(g=o.left-y.left,this.root.style.left=d+g+"px"),y.bottom>o.bottom){var h=y.bottom-y.top,p=m.bottom-m.top+h;this.root.style.top=a-p+"px",this.root.classList.add("ql-flip")}return g}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),w}();r.default=b},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var c=function(){function _(E,j){var P=[],C=!0,L=!1,F=void 0;try{for(var B=E[Symbol.iterator](),q;!(C=(q=B.next()).done)&&(P.push(q.value),!(j&&P.length===j));C=!0);}catch(I){L=!0,F=I}finally{try{!C&&B.return&&B.return()}finally{if(L)throw F}}return P}return function(E,j){if(Array.isArray(E))return E;if(Symbol.iterator in Object(E))return _(E,j);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f=function _(E,j,P){E===null&&(E=Function.prototype);var C=Object.getOwnPropertyDescriptor(E,j);if(C===void 0){var L=Object.getPrototypeOf(E);return L===null?void 0:_(L,j,P)}else{if("value"in C)return C.value;var F=C.get;return F===void 0?void 0:F.call(P)}},b=function(){function _(E,j){for(var P=0;P<j.length;P++){var C=j[P];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(E,C.key,C)}}return function(E,j,P){return j&&_(E.prototype,j),P&&_(E,P),E}}(),w=i(3),x=v(w),m=i(8),d=v(m),a=i(43),o=v(a),y=i(27),g=v(y),h=i(15),p=i(41),u=v(p);function v(_){return _&&_.__esModule?_:{default:_}}function l(_,E){if(!(_ instanceof E))throw new TypeError("Cannot call a class as a function")}function N(_,E){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:_}function T(_,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);_.prototype=Object.create(E&&E.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(_,E):_.__proto__=E)}var S=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],k=function(_){T(E,_);function E(j,P){l(this,E),P.modules.toolbar!=null&&P.modules.toolbar.container==null&&(P.modules.toolbar.container=S);var C=N(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,j,P));return C.quill.container.classList.add("ql-snow"),C}return b(E,[{key:"extendToolbar",value:function(P){P.container.classList.add("ql-snow"),this.buildButtons([].slice.call(P.container.querySelectorAll("button")),u.default),this.buildPickers([].slice.call(P.container.querySelectorAll("select")),u.default),this.tooltip=new A(this.quill,this.options.bounds),P.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(C,L){P.handlers.link.call(P,!L.format.link)})}}]),E}(o.default);k.DEFAULTS=(0,x.default)(!0,{},o.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(E){if(E){var j=this.quill.getSelection();if(j==null||j.length==0)return;var P=this.quill.getText(j);/^\S+@\S+\.\S+$/.test(P)&&P.indexOf("mailto:")!==0&&(P="mailto:"+P);var C=this.quill.theme.tooltip;C.edit("link",P)}else this.quill.format("link",!1)}}}}});var A=function(_){T(E,_);function E(j,P){l(this,E);var C=N(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,j,P));return C.preview=C.root.querySelector("a.ql-preview"),C}return b(E,[{key:"listen",value:function(){var P=this;f(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(C){P.root.classList.contains("ql-editing")?P.save():P.edit("link",P.preview.textContent),C.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(C){if(P.linkRange!=null){var L=P.linkRange;P.restoreFocus(),P.quill.formatText(L,"link",!1,d.default.sources.USER),delete P.linkRange}C.preventDefault(),P.hide()}),this.quill.on(d.default.events.SELECTION_CHANGE,function(C,L,F){if(C!=null){if(C.length===0&&F===d.default.sources.USER){var B=P.quill.scroll.descendant(g.default,C.index),q=c(B,2),I=q[0],R=q[1];if(I!=null){P.linkRange=new h.Range(C.index-R,I.length());var O=g.default.formats(I.domNode);P.preview.textContent=O,P.preview.setAttribute("href",O),P.show(),P.position(P.quill.getBounds(P.linkRange));return}}else delete P.linkRange;P.hide()}})}},{key:"show",value:function(){f(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),E}(a.BaseTooltip);A.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),r.default=k},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var c=i(29),f=X(c),b=i(36),w=i(38),x=i(64),m=i(65),d=X(m),a=i(66),o=X(a),y=i(67),g=X(y),h=i(37),p=i(26),u=i(39),v=i(40),l=i(56),N=X(l),T=i(68),S=X(T),k=i(27),A=X(k),_=i(69),E=X(_),j=i(70),P=X(j),C=i(71),L=X(C),F=i(72),B=X(F),q=i(73),I=X(q),R=i(13),O=X(R),D=i(74),M=X(D),H=i(75),z=X(H),U=i(57),$=X(U),V=i(41),W=X(V),Z=i(28),Q=X(Z),ne=i(59),oe=X(ne),he=i(60),pe=X(he),we=i(61),ve=X(we),J=i(108),Y=X(J),te=i(62),re=X(te);function X(ce){return ce&&ce.__esModule?ce:{default:ce}}f.default.register({"attributors/attribute/direction":w.DirectionAttribute,"attributors/class/align":b.AlignClass,"attributors/class/background":h.BackgroundClass,"attributors/class/color":p.ColorClass,"attributors/class/direction":w.DirectionClass,"attributors/class/font":u.FontClass,"attributors/class/size":v.SizeClass,"attributors/style/align":b.AlignStyle,"attributors/style/background":h.BackgroundStyle,"attributors/style/color":p.ColorStyle,"attributors/style/direction":w.DirectionStyle,"attributors/style/font":u.FontStyle,"attributors/style/size":v.SizeStyle},!0),f.default.register({"formats/align":b.AlignClass,"formats/direction":w.DirectionClass,"formats/indent":x.IndentClass,"formats/background":h.BackgroundStyle,"formats/color":p.ColorStyle,"formats/font":u.FontClass,"formats/size":v.SizeClass,"formats/blockquote":d.default,"formats/code-block":O.default,"formats/header":o.default,"formats/list":g.default,"formats/bold":N.default,"formats/code":R.Code,"formats/italic":S.default,"formats/link":A.default,"formats/script":E.default,"formats/strike":P.default,"formats/underline":L.default,"formats/image":B.default,"formats/video":I.default,"formats/list/item":y.ListItem,"modules/formula":M.default,"modules/syntax":z.default,"modules/toolbar":$.default,"themes/bubble":Y.default,"themes/snow":re.default,"ui/icons":W.default,"ui/picker":Q.default,"ui/icon-picker":pe.default,"ui/color-picker":oe.default,"ui/tooltip":ve.default},!0),r.default=f.default},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.IndentClass=void 0;var c=function(){function g(h,p){for(var u=0;u<p.length;u++){var v=p[u];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(h,v.key,v)}}return function(h,p,u){return p&&g(h.prototype,p),u&&g(h,u),h}}(),f=function g(h,p,u){h===null&&(h=Function.prototype);var v=Object.getOwnPropertyDescriptor(h,p);if(v===void 0){var l=Object.getPrototypeOf(h);return l===null?void 0:g(l,p,u)}else{if("value"in v)return v.value;var N=v.get;return N===void 0?void 0:N.call(u)}},b=i(0),w=x(b);function x(g){return g&&g.__esModule?g:{default:g}}function m(g,h){if(!(g instanceof h))throw new TypeError("Cannot call a class as a function")}function d(g,h){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:g}function a(g,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);g.prototype=Object.create(h&&h.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(g,h):g.__proto__=h)}var o=function(g){a(h,g);function h(){return m(this,h),d(this,(h.__proto__||Object.getPrototypeOf(h)).apply(this,arguments))}return c(h,[{key:"add",value:function(u,v){if(v==="+1"||v==="-1"){var l=this.value(u)||0;v=v==="+1"?l+1:l-1}return v===0?(this.remove(u),!0):f(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"add",this).call(this,u,v)}},{key:"canAdd",value:function(u,v){return f(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"canAdd",this).call(this,u,v)||f(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"canAdd",this).call(this,u,parseInt(v))}},{key:"value",value:function(u){return parseInt(f(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"value",this).call(this,u))||void 0}}]),h}(w.default.Attributor.Class),y=new o("indent","ql-indent",{scope:w.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});r.IndentClass=y},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var c=i(4),f=b(c);function b(a){return a&&a.__esModule?a:{default:a}}function w(a,o){if(!(a instanceof o))throw new TypeError("Cannot call a class as a function")}function x(a,o){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&(typeof o=="object"||typeof o=="function")?o:a}function m(a,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof o);a.prototype=Object.create(o&&o.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(a,o):a.__proto__=o)}var d=function(a){m(o,a);function o(){return w(this,o),x(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}return o}(f.default);d.blotName="blockquote",d.tagName="blockquote",r.default=d},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var c=function(){function o(y,g){for(var h=0;h<g.length;h++){var p=g[h];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(y,p.key,p)}}return function(y,g,h){return g&&o(y.prototype,g),h&&o(y,h),y}}(),f=i(4),b=w(f);function w(o){return o&&o.__esModule?o:{default:o}}function x(o,y){if(!(o instanceof y))throw new TypeError("Cannot call a class as a function")}function m(o,y){if(!o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:o}function d(o,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);o.prototype=Object.create(y&&y.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(o,y):o.__proto__=y)}var a=function(o){d(y,o);function y(){return x(this,y),m(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return c(y,null,[{key:"formats",value:function(h){return this.tagName.indexOf(h.tagName)+1}}]),y}(b.default);a.blotName="header",a.tagName=["H1","H2","H3","H4","H5","H6"],r.default=a},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.ListItem=void 0;var c=function(){function l(N,T){for(var S=0;S<T.length;S++){var k=T[S];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(N,k.key,k)}}return function(N,T,S){return T&&l(N.prototype,T),S&&l(N,S),N}}(),f=function l(N,T,S){N===null&&(N=Function.prototype);var k=Object.getOwnPropertyDescriptor(N,T);if(k===void 0){var A=Object.getPrototypeOf(N);return A===null?void 0:l(A,T,S)}else{if("value"in k)return k.value;var _=k.get;return _===void 0?void 0:_.call(S)}},b=i(0),w=o(b),x=i(4),m=o(x),d=i(25),a=o(d);function o(l){return l&&l.__esModule?l:{default:l}}function y(l,N,T){return N in l?Object.defineProperty(l,N,{value:T,enumerable:!0,configurable:!0,writable:!0}):l[N]=T,l}function g(l,N){if(!(l instanceof N))throw new TypeError("Cannot call a class as a function")}function h(l,N){if(!l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:l}function p(l,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);l.prototype=Object.create(N&&N.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(l,N):l.__proto__=N)}var u=function(l){p(N,l);function N(){return g(this,N),h(this,(N.__proto__||Object.getPrototypeOf(N)).apply(this,arguments))}return c(N,[{key:"format",value:function(S,k){S===v.blotName&&!k?this.replaceWith(w.default.create(this.statics.scope)):f(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"format",this).call(this,S,k)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():f(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(S,k){return this.parent.isolate(this.offset(this.parent),this.length()),S===this.parent.statics.blotName?(this.parent.replaceWith(S,k),this):(this.parent.unwrap(),f(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"replaceWith",this).call(this,S,k))}}],[{key:"formats",value:function(S){return S.tagName===this.tagName?void 0:f(N.__proto__||Object.getPrototypeOf(N),"formats",this).call(this,S)}}]),N}(m.default);u.blotName="list-item",u.tagName="LI";var v=function(l){p(N,l),c(N,null,[{key:"create",value:function(S){var k=S==="ordered"?"OL":"UL",A=f(N.__proto__||Object.getPrototypeOf(N),"create",this).call(this,k);return(S==="checked"||S==="unchecked")&&A.setAttribute("data-checked",S==="checked"),A}},{key:"formats",value:function(S){if(S.tagName==="OL")return"ordered";if(S.tagName==="UL")return S.hasAttribute("data-checked")?S.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function N(T){g(this,N);var S=h(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,T)),k=function(_){if(_.target.parentNode===T){var E=S.statics.formats(T),j=w.default.find(_.target);E==="checked"?j.format("list","unchecked"):E==="unchecked"&&j.format("list","checked")}};return T.addEventListener("touchstart",k),T.addEventListener("mousedown",k),S}return c(N,[{key:"format",value:function(S,k){this.children.length>0&&this.children.tail.format(S,k)}},{key:"formats",value:function(){return y({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(S,k){if(S instanceof u)f(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"insertBefore",this).call(this,S,k);else{var A=k==null?this.length():k.offset(this),_=this.split(A);_.parent.insertBefore(S,_)}}},{key:"optimize",value:function(S){f(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"optimize",this).call(this,S);var k=this.next;k!=null&&k.prev===this&&k.statics.blotName===this.statics.blotName&&k.domNode.tagName===this.domNode.tagName&&k.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(k.moveChildren(this),k.remove())}},{key:"replace",value:function(S){if(S.statics.blotName!==this.statics.blotName){var k=w.default.create(this.statics.defaultChild);S.moveChildren(k),this.appendChild(k)}f(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"replace",this).call(this,S)}}]),N}(a.default);v.blotName="list",v.scope=w.default.Scope.BLOCK_BLOT,v.tagName=["OL","UL"],v.defaultChild="list-item",v.allowedChildren=[u],r.ListItem=u,r.default=v},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var c=i(56),f=b(c);function b(a){return a&&a.__esModule?a:{default:a}}function w(a,o){if(!(a instanceof o))throw new TypeError("Cannot call a class as a function")}function x(a,o){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&(typeof o=="object"||typeof o=="function")?o:a}function m(a,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof o);a.prototype=Object.create(o&&o.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(a,o):a.__proto__=o)}var d=function(a){m(o,a);function o(){return w(this,o),x(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}return o}(f.default);d.blotName="italic",d.tagName=["EM","I"],r.default=d},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var c=function(){function y(g,h){for(var p=0;p<h.length;p++){var u=h[p];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(g,u.key,u)}}return function(g,h,p){return h&&y(g.prototype,h),p&&y(g,p),g}}(),f=function y(g,h,p){g===null&&(g=Function.prototype);var u=Object.getOwnPropertyDescriptor(g,h);if(u===void 0){var v=Object.getPrototypeOf(g);return v===null?void 0:y(v,h,p)}else{if("value"in u)return u.value;var l=u.get;return l===void 0?void 0:l.call(p)}},b=i(6),w=x(b);function x(y){return y&&y.__esModule?y:{default:y}}function m(y,g){if(!(y instanceof g))throw new TypeError("Cannot call a class as a function")}function d(y,g){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:y}function a(y,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);y.prototype=Object.create(g&&g.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(y,g):y.__proto__=g)}var o=function(y){a(g,y);function g(){return m(this,g),d(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return c(g,null,[{key:"create",value:function(p){return p==="super"?document.createElement("sup"):p==="sub"?document.createElement("sub"):f(g.__proto__||Object.getPrototypeOf(g),"create",this).call(this,p)}},{key:"formats",value:function(p){if(p.tagName==="SUB")return"sub";if(p.tagName==="SUP")return"super"}}]),g}(w.default);o.blotName="script",o.tagName=["SUB","SUP"],r.default=o},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var c=i(6),f=b(c);function b(a){return a&&a.__esModule?a:{default:a}}function w(a,o){if(!(a instanceof o))throw new TypeError("Cannot call a class as a function")}function x(a,o){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&(typeof o=="object"||typeof o=="function")?o:a}function m(a,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof o);a.prototype=Object.create(o&&o.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(a,o):a.__proto__=o)}var d=function(a){m(o,a);function o(){return w(this,o),x(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}return o}(f.default);d.blotName="strike",d.tagName="S",r.default=d},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var c=i(6),f=b(c);function b(a){return a&&a.__esModule?a:{default:a}}function w(a,o){if(!(a instanceof o))throw new TypeError("Cannot call a class as a function")}function x(a,o){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&(typeof o=="object"||typeof o=="function")?o:a}function m(a,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof o);a.prototype=Object.create(o&&o.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(a,o):a.__proto__=o)}var d=function(a){m(o,a);function o(){return w(this,o),x(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}return o}(f.default);d.blotName="underline",d.tagName="U",r.default=d},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var c=function(){function h(p,u){for(var v=0;v<u.length;v++){var l=u[v];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(p,l.key,l)}}return function(p,u,v){return u&&h(p.prototype,u),v&&h(p,v),p}}(),f=function h(p,u,v){p===null&&(p=Function.prototype);var l=Object.getOwnPropertyDescriptor(p,u);if(l===void 0){var N=Object.getPrototypeOf(p);return N===null?void 0:h(N,u,v)}else{if("value"in l)return l.value;var T=l.get;return T===void 0?void 0:T.call(v)}},b=i(0),w=m(b),x=i(27);function m(h){return h&&h.__esModule?h:{default:h}}function d(h,p){if(!(h instanceof p))throw new TypeError("Cannot call a class as a function")}function a(h,p){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:h}function o(h,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);h.prototype=Object.create(p&&p.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(h,p):h.__proto__=p)}var y=["alt","height","width"],g=function(h){o(p,h);function p(){return d(this,p),a(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return c(p,[{key:"format",value:function(v,l){y.indexOf(v)>-1?l?this.domNode.setAttribute(v,l):this.domNode.removeAttribute(v):f(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"format",this).call(this,v,l)}}],[{key:"create",value:function(v){var l=f(p.__proto__||Object.getPrototypeOf(p),"create",this).call(this,v);return typeof v=="string"&&l.setAttribute("src",this.sanitize(v)),l}},{key:"formats",value:function(v){return y.reduce(function(l,N){return v.hasAttribute(N)&&(l[N]=v.getAttribute(N)),l},{})}},{key:"match",value:function(v){return/\.(jpe?g|gif|png)$/.test(v)||/^data:image\/.+;base64/.test(v)}},{key:"sanitize",value:function(v){return(0,x.sanitize)(v,["http","https","data"])?v:"//:0"}},{key:"value",value:function(v){return v.getAttribute("src")}}]),p}(w.default.Embed);g.blotName="image",g.tagName="IMG",r.default=g},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var c=function(){function h(p,u){for(var v=0;v<u.length;v++){var l=u[v];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(p,l.key,l)}}return function(p,u,v){return u&&h(p.prototype,u),v&&h(p,v),p}}(),f=function h(p,u,v){p===null&&(p=Function.prototype);var l=Object.getOwnPropertyDescriptor(p,u);if(l===void 0){var N=Object.getPrototypeOf(p);return N===null?void 0:h(N,u,v)}else{if("value"in l)return l.value;var T=l.get;return T===void 0?void 0:T.call(v)}},b=i(4),w=i(27),x=m(w);function m(h){return h&&h.__esModule?h:{default:h}}function d(h,p){if(!(h instanceof p))throw new TypeError("Cannot call a class as a function")}function a(h,p){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:h}function o(h,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);h.prototype=Object.create(p&&p.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(h,p):h.__proto__=p)}var y=["height","width"],g=function(h){o(p,h);function p(){return d(this,p),a(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return c(p,[{key:"format",value:function(v,l){y.indexOf(v)>-1?l?this.domNode.setAttribute(v,l):this.domNode.removeAttribute(v):f(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"format",this).call(this,v,l)}}],[{key:"create",value:function(v){var l=f(p.__proto__||Object.getPrototypeOf(p),"create",this).call(this,v);return l.setAttribute("frameborder","0"),l.setAttribute("allowfullscreen",!0),l.setAttribute("src",this.sanitize(v)),l}},{key:"formats",value:function(v){return y.reduce(function(l,N){return v.hasAttribute(N)&&(l[N]=v.getAttribute(N)),l},{})}},{key:"sanitize",value:function(v){return x.default.sanitize(v)}},{key:"value",value:function(v){return v.getAttribute("src")}}]),p}(b.BlockEmbed);g.blotName="video",g.className="ql-video",g.tagName="IFRAME",r.default=g},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.FormulaBlot=void 0;var c=function(){function v(l,N){for(var T=0;T<N.length;T++){var S=N[T];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(l,S.key,S)}}return function(l,N,T){return N&&v(l.prototype,N),T&&v(l,T),l}}(),f=function v(l,N,T){l===null&&(l=Function.prototype);var S=Object.getOwnPropertyDescriptor(l,N);if(S===void 0){var k=Object.getPrototypeOf(l);return k===null?void 0:v(k,N,T)}else{if("value"in S)return S.value;var A=S.get;return A===void 0?void 0:A.call(T)}},b=i(35),w=o(b),x=i(5),m=o(x),d=i(9),a=o(d);function o(v){return v&&v.__esModule?v:{default:v}}function y(v,l){if(!(v instanceof l))throw new TypeError("Cannot call a class as a function")}function g(v,l){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l&&(typeof l=="object"||typeof l=="function")?l:v}function h(v,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);v.prototype=Object.create(l&&l.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(v,l):v.__proto__=l)}var p=function(v){h(l,v);function l(){return y(this,l),g(this,(l.__proto__||Object.getPrototypeOf(l)).apply(this,arguments))}return c(l,null,[{key:"create",value:function(T){var S=f(l.__proto__||Object.getPrototypeOf(l),"create",this).call(this,T);return typeof T=="string"&&(window.katex.render(T,S,{throwOnError:!1,errorColor:"#f00"}),S.setAttribute("data-value",T)),S}},{key:"value",value:function(T){return T.getAttribute("data-value")}}]),l}(w.default);p.blotName="formula",p.className="ql-formula",p.tagName="SPAN";var u=function(v){h(l,v),c(l,null,[{key:"register",value:function(){m.default.register(p,!0)}}]);function l(){y(this,l);var N=g(this,(l.__proto__||Object.getPrototypeOf(l)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return N}return l}(a.default);r.FormulaBlot=p,r.default=u},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.CodeToken=r.CodeBlock=void 0;var c=function(){function T(S,k){for(var A=0;A<k.length;A++){var _=k[A];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(S,_.key,_)}}return function(S,k,A){return k&&T(S.prototype,k),A&&T(S,A),S}}(),f=function T(S,k,A){S===null&&(S=Function.prototype);var _=Object.getOwnPropertyDescriptor(S,k);if(_===void 0){var E=Object.getPrototypeOf(S);return E===null?void 0:T(E,k,A)}else{if("value"in _)return _.value;var j=_.get;return j===void 0?void 0:j.call(A)}},b=i(0),w=g(b),x=i(5),m=g(x),d=i(9),a=g(d),o=i(13),y=g(o);function g(T){return T&&T.__esModule?T:{default:T}}function h(T,S){if(!(T instanceof S))throw new TypeError("Cannot call a class as a function")}function p(T,S){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:T}function u(T,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);T.prototype=Object.create(S&&S.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(T,S):T.__proto__=S)}var v=function(T){u(S,T);function S(){return h(this,S),p(this,(S.__proto__||Object.getPrototypeOf(S)).apply(this,arguments))}return c(S,[{key:"replaceWith",value:function(A){this.domNode.textContent=this.domNode.textContent,this.attach(),f(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"replaceWith",this).call(this,A)}},{key:"highlight",value:function(A){var _=this.domNode.textContent;this.cachedText!==_&&((_.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=A(_),this.domNode.normalize(),this.attach()),this.cachedText=_)}}]),S}(y.default);v.className="ql-syntax";var l=new w.default.Attributor.Class("token","hljs",{scope:w.default.Scope.INLINE}),N=function(T){u(S,T),c(S,null,[{key:"register",value:function(){m.default.register(l,!0),m.default.register(v,!0)}}]);function S(k,A){h(this,S);var _=p(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,k,A));if(typeof _.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var E=null;return _.quill.on(m.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(E),E=setTimeout(function(){_.highlight(),E=null},_.options.interval)}),_.highlight(),_}return c(S,[{key:"highlight",value:function(){var A=this;if(!this.quill.selection.composing){this.quill.update(m.default.sources.USER);var _=this.quill.getSelection();this.quill.scroll.descendants(v).forEach(function(E){E.highlight(A.options.highlight)}),this.quill.update(m.default.sources.SILENT),_!=null&&this.quill.setSelection(_,m.default.sources.SILENT)}}}]),S}(a.default);N.DEFAULTS={highlight:function(){return window.hljs==null?null:function(T){var S=window.hljs.highlightAuto(T);return S.value}}(),interval:1e3},r.CodeBlock=v,r.CodeToken=l,r.default=N},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(n,r){n.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(n,r){n.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(n,r){n.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(n,r){n.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BubbleTooltip=void 0;var c=function S(k,A,_){k===null&&(k=Function.prototype);var E=Object.getOwnPropertyDescriptor(k,A);if(E===void 0){var j=Object.getPrototypeOf(k);return j===null?void 0:S(j,A,_)}else{if("value"in E)return E.value;var P=E.get;return P===void 0?void 0:P.call(_)}},f=function(){function S(k,A){for(var _=0;_<A.length;_++){var E=A[_];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(k,E.key,E)}}return function(k,A,_){return A&&S(k.prototype,A),_&&S(k,_),k}}(),b=i(3),w=h(b),x=i(8),m=h(x),d=i(43),a=h(d),o=i(15),y=i(41),g=h(y);function h(S){return S&&S.__esModule?S:{default:S}}function p(S,k){if(!(S instanceof k))throw new TypeError("Cannot call a class as a function")}function u(S,k){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:S}function v(S,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);S.prototype=Object.create(k&&k.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(S,k):S.__proto__=k)}var l=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],N=function(S){v(k,S);function k(A,_){p(this,k),_.modules.toolbar!=null&&_.modules.toolbar.container==null&&(_.modules.toolbar.container=l);var E=u(this,(k.__proto__||Object.getPrototypeOf(k)).call(this,A,_));return E.quill.container.classList.add("ql-bubble"),E}return f(k,[{key:"extendToolbar",value:function(_){this.tooltip=new T(this.quill,this.options.bounds),this.tooltip.root.appendChild(_.container),this.buildButtons([].slice.call(_.container.querySelectorAll("button")),g.default),this.buildPickers([].slice.call(_.container.querySelectorAll("select")),g.default)}}]),k}(a.default);N.DEFAULTS=(0,w.default)(!0,{},a.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(k){k?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var T=function(S){v(k,S);function k(A,_){p(this,k);var E=u(this,(k.__proto__||Object.getPrototypeOf(k)).call(this,A,_));return E.quill.on(m.default.events.EDITOR_CHANGE,function(j,P,C,L){if(j===m.default.events.SELECTION_CHANGE)if(P!=null&&P.length>0&&L===m.default.sources.USER){E.show(),E.root.style.left="0px",E.root.style.width="",E.root.style.width=E.root.offsetWidth+"px";var F=E.quill.getLines(P.index,P.length);if(F.length===1)E.position(E.quill.getBounds(P));else{var B=F[F.length-1],q=E.quill.getIndex(B),I=Math.min(B.length()-1,P.index+P.length-q),R=E.quill.getBounds(new o.Range(q,I));E.position(R)}}else document.activeElement!==E.textbox&&E.quill.hasFocus()&&E.hide()}),E}return f(k,[{key:"listen",value:function(){var _=this;c(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){_.root.classList.remove("ql-editing")}),this.quill.on(m.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!_.root.classList.contains("ql-hidden")){var E=_.quill.getSelection();E!=null&&_.position(_.quill.getBounds(E))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(_){var E=c(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"position",this).call(this,_),j=this.root.querySelector(".ql-tooltip-arrow");if(j.style.marginLeft="",E===0)return E;j.style.marginLeft=-1*E-j.offsetWidth/2+"px"}}]),k}(d.BaseTooltip);T.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),r.BubbleTooltip=T,r.default=N},function(n,r,i){n.exports=i(63)}]).default})})(Un);var za=Un.exports,Va=Ce&&Ce.__extends||function(){var e=function(s,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var c in i)i.hasOwnProperty(c)&&(r[c]=i[c])},e(s,n)};return function(s,n){e(s,n);function r(){this.constructor=s}s.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),_t=Ce&&Ce.__assign||function(){return _t=Object.assign||function(e){for(var s,n=1,r=arguments.length;n<r;n++){s=arguments[n];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e},_t.apply(this,arguments)},Ka=Ce&&Ce.__spreadArrays||function(){for(var e=0,s=0,n=arguments.length;s<n;s++)e+=arguments[s].length;for(var r=Array(e),i=0,s=0;s<n;s++)for(var c=arguments[s],f=0,b=c.length;f<b;f++,i++)r[i]=c[f];return r},qt=Ce&&Ce.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Ae=qt(K),Wa=qt($r),Qe=qt(ds),Br=qt(za),Ga=function(e){Va(s,e);function s(n){var r=e.call(this,n)||this;r.dirtyProps=["modules","formats","bounds","theme","children"],r.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],r.state={generation:0},r.selection=null,r.onEditorChange=function(c,f,b,w){var x,m,d,a;c==="text-change"?(m=(x=r).onEditorChangeText)===null||m===void 0||m.call(x,r.editor.root.innerHTML,f,w,r.unprivilegedEditor):c==="selection-change"&&((a=(d=r).onEditorChangeSelection)===null||a===void 0||a.call(d,f,w,r.unprivilegedEditor))};var i=r.isControlled()?n.value:n.defaultValue;return r.value=i??"",r}return s.prototype.validateProps=function(n){var r;if(Ae.default.Children.count(n.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(Ae.default.Children.count(n.children)){var i=Ae.default.Children.only(n.children);if(((r=i)===null||r===void 0?void 0:r.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&n.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},s.prototype.shouldComponentUpdate=function(n,r){var i=this,c;if(this.validateProps(n),!this.editor||this.state.generation!==r.generation)return!0;if("value"in n){var f=this.getEditorContents(),b=(c=n.value,c??"");this.isEqualValue(b,f)||this.setEditorContents(this.editor,b)}return n.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,n.readOnly),Ka(this.cleanProps,this.dirtyProps).some(function(w){return!Qe.default(n[w],i.props[w])})},s.prototype.shouldComponentRegenerate=function(n){var r=this;return this.dirtyProps.some(function(i){return!Qe.default(n[i],r.props[i])})},s.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},s.prototype.componentWillUnmount=function(){this.destroyEditor()},s.prototype.componentDidUpdate=function(n,r){var i=this;if(this.editor&&this.shouldComponentRegenerate(n)){var c=this.editor.getContents(),f=this.editor.getSelection();this.regenerationSnapshot={delta:c,selection:f},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==r.generation){var b=this.regenerationSnapshot,c=b.delta,w=b.selection;delete this.regenerationSnapshot,this.instantiateEditor();var x=this.editor;x.setContents(c),Fr(function(){return i.setEditorSelection(x,w)})}},s.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},s.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},s.prototype.isControlled=function(){return"value"in this.props},s.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},s.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},s.prototype.createEditor=function(n,r){var i=new Br.default(n,r);return r.tabIndex!=null&&this.setEditorTabIndex(i,r.tabIndex),this.hookEditor(i),i},s.prototype.hookEditor=function(n){this.unprivilegedEditor=this.makeUnprivilegedEditor(n),n.on("editor-change",this.onEditorChange)},s.prototype.unhookEditor=function(n){n.off("editor-change",this.onEditorChange)},s.prototype.getEditorContents=function(){return this.value},s.prototype.getEditorSelection=function(){return this.selection},s.prototype.isDelta=function(n){return n&&n.ops},s.prototype.isEqualValue=function(n,r){return this.isDelta(n)&&this.isDelta(r)?Qe.default(n.ops,r.ops):Qe.default(n,r)},s.prototype.setEditorContents=function(n,r){var i=this;this.value=r;var c=this.getEditorSelection();typeof r=="string"?n.setContents(n.clipboard.convert(r)):n.setContents(r),Fr(function(){return i.setEditorSelection(n,c)})},s.prototype.setEditorSelection=function(n,r){if(this.selection=r,r){var i=n.getLength();r.index=Math.max(0,Math.min(r.index,i-1)),r.length=Math.max(0,Math.min(r.length,i-1-r.index)),n.setSelection(r)}},s.prototype.setEditorTabIndex=function(n,r){var i,c;!((c=(i=n)===null||i===void 0?void 0:i.scroll)===null||c===void 0)&&c.domNode&&(n.scroll.domNode.tabIndex=r)},s.prototype.setEditorReadOnly=function(n,r){r?n.disable():n.enable()},s.prototype.makeUnprivilegedEditor=function(n){var r=n;return{getHTML:function(){return r.root.innerHTML},getLength:r.getLength.bind(r),getText:r.getText.bind(r),getContents:r.getContents.bind(r),getSelection:r.getSelection.bind(r),getBounds:r.getBounds.bind(r)}},s.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var n=Wa.default.findDOMNode(this.editingArea);if(!n)throw new Error("Cannot find element for editing area");if(n.nodeType===3)throw new Error("Editing area cannot be a text node");return n},s.prototype.renderEditingArea=function(){var n=this,r=this.props,i=r.children,c=r.preserveWhitespace,f=this.state.generation,b={key:f,ref:function(w){n.editingArea=w}};return Ae.default.Children.count(i)?Ae.default.cloneElement(Ae.default.Children.only(i),b):c?Ae.default.createElement("pre",_t({},b)):Ae.default.createElement("div",_t({},b))},s.prototype.render=function(){var n;return Ae.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(n=this.props.className,n??""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},s.prototype.onEditorChangeText=function(n,r,i,c){var f,b;if(this.editor){var w=this.isDelta(this.value)?c.getContents():c.getHTML();w!==this.getEditorContents()&&(this.lastDeltaChangeSet=r,this.value=w,(b=(f=this.props).onChange)===null||b===void 0||b.call(f,n,r,i,c))}},s.prototype.onEditorChangeSelection=function(n,r,i){var c,f,b,w,x,m;if(this.editor){var d=this.getEditorSelection(),a=!d&&n,o=d&&!n;Qe.default(n,d)||(this.selection=n,(f=(c=this.props).onChangeSelection)===null||f===void 0||f.call(c,n,r,i),a?(w=(b=this.props).onFocus)===null||w===void 0||w.call(b,n,r,i):o&&((m=(x=this.props).onBlur)===null||m===void 0||m.call(x,d,r,i)))}},s.prototype.focus=function(){this.editor&&this.editor.focus()},s.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},s.displayName="React Quill",s.Quill=Br.default,s.defaultProps={theme:"snow",modules:{},readOnly:!1},s}(Ae.default.Component);function Fr(e){Promise.resolve().then(e)}var Ja=Ga;const Ya=Hr(Ja);const Bn=K.forwardRef(({results:e,hasSession:s},n)=>{const[r,i]=K.useState(""),[c,f]=K.useState({}),[b,w]=K.useState(!1),[x,m]=K.useState(!1),[d,a]=K.useState(!1),[o,y]=K.useState({}),[g,h]=K.useState(!1),p=K.useRef(null),u=K.useRef(!1),v=K.useRef(null),l=K.useRef("{}"),N=K.useRef(null),T=se(I=>I.currentSessionId),S=()=>({content:`transcript_content_${T}`,speakers:`speaker_mappings_${T}`,hasEdits:`has_edits_${T}`});K.useImperativeHandle(n,()=>({getCurrentContent:()=>{var R;const I=(R=p.current)==null?void 0:R.getEditor();return I?I.root.innerHTML:A()},getCurrentMappings:()=>c,hasUnsavedChanges:()=>x,getPlainTextContent:()=>{const I=E(),R=document.createElement("div");return R.innerHTML=I,R.textContent||R.innerText||""}}),[c,x]),K.useEffect(()=>{var M;if(!T)return;const I=S(),R=localStorage.getItem(I.content),O=localStorage.getItem(I.speakers),D=localStorage.getItem(I.hasEdits)==="true";if(R&&D){console.log("ðŸ“‚ Loading saved transcript edits");const H=O?JSON.parse(O):{};i(R),f(H),l.current=JSON.stringify(H),N.current=setTimeout(()=>{h(!0)},500),m(!1)}else if((M=e==null?void 0:e.results)!=null&&M.segments){console.log("ðŸ†• Initializing transcript from results");const{content:H,speakers:z}=k(e.results.segments);i(H),f(z),l.current=JSON.stringify(z),N.current=setTimeout(()=>{h(!0)},500),m(!1)}},[T,e]);const k=I=>{if(!I||I.length===0)return{content:"<p>No transcript available</p>",speakers:{}};const R={};let O="";return I.forEach(D=>{const M=D.speaker,H=D.text||"",z=D.start||0,U=D.end||0;R[M]||(R[M]=M);const $=W=>{const Z=Math.floor(W/60),Q=Math.floor(W%60);return`${Z.toString().padStart(2,"0")}:${Q.toString().padStart(2,"0")}`},V=`[${$(z)} - ${$(U)}]`;O+=`<p><span style="color: #6b7280; font-size: 0.875rem; font-family: monospace;">${V}</span> <strong style="color: #059669;">${M}:</strong> ${H}</p>`}),{content:O,speakers:R}},A=K.useCallback(()=>{var O;if(!((O=e==null?void 0:e.results)!=null&&O.segments))return r;const I=e.results.segments;let R="";return I.forEach(D=>{const M=D.speaker,H=c[M]||M,z=D.text||"",U=D.start||0,$=D.end||0,V=Z=>{const Q=Math.floor(Z/60),ne=Math.floor(Z%60);return`${Q.toString().padStart(2,"0")}:${ne.toString().padStart(2,"0")}`},W=`[${V(U)} - ${V($)}]`;R+=`<p><span style="color: #6b7280; font-size: 0.875rem; font-family: monospace;">${W}</span> <strong style="color: #059669;">${H}:</strong> ${z}</p>`}),console.log("ðŸŽ¨ Generated live content from segments with current mappings"),R},[e,c]),_=K.useCallback(I=>{var O;const R=(O=p.current)==null?void 0:O.getEditor();if(R){console.log("ðŸ–Šï¸ Updating Quill content (bulletproof)"),u.current=!0;try{const D=R.getSelection();try{const M=R.clipboard.convert(I);R.setContents(M,"silent"),console.log("âœ… Used silent setContents method")}catch{R.setText(""),R.clipboard.dangerouslyPasteHTML(0,I),console.log("âœ… Used fallback setText method")}if(D)try{const M=R.getLength(),H=Math.min(D.index,Math.max(0,M-1));R.setSelection(H,0)}catch{}}catch(D){console.error("âŒ Error updating Quill:",D)}setTimeout(()=>{u.current=!1},200)}},[]),E=K.useCallback(()=>{var R;const I=(R=p.current)==null?void 0:R.getEditor();return I?I.root.innerHTML:A()},[A]);K.useEffect(()=>{var I;g&&r&&((I=p.current)!=null&&I.getEditor())&&(console.log("ðŸŽ¬ Initializing Quill with original content (delayed)"),_(r))},[g,r,_]),K.useEffect(()=>{const I=JSON.stringify(c);I!==l.current&&g&&(l.current=I,console.log("ðŸ”„ Mappings changed, updating Quill (bulletproof)"),v.current&&clearTimeout(v.current),v.current=setTimeout(()=>{const R=A();_(R)},150))},[c,g,A,_]);const j=K.useCallback((I,R)=>{console.log(`âŒ¨ï¸ Input change: ${I} â†’ "${R}"`),y(O=>{if(!O[I])return O;const D={...O};return delete D[I],D}),f(O=>({...O,[I]:R})),m(!0)},[]),P=K.useCallback((I,R,O,D)=>{if(u.current){console.log("ðŸš« Ignoring programmatic change to prevent loop");return}O==="user"&&(console.log("âœï¸ Manual editor change by user"),i(I),m(!0))},[]),C=K.useCallback(()=>{if(!T){ee.error("No active session to save");return}const I={},R=[];if(Object.entries(c).forEach(([M,H])=>{(!H||!H.trim())&&(I[M]="Speaker name cannot be empty",R.push(M))}),R.length>0){y(I),ee.error(`Please provide names for: ${R.join(", ")}`);return}y({});const O=S(),D=A();try{localStorage.setItem(O.content,D),localStorage.setItem(O.speakers,JSON.stringify(c)),localStorage.setItem(O.hasEdits,"true"),l.current=JSON.stringify(c),m(!1),console.log("ðŸ’¾ Saved changes - speaker mapping functionality preserved")}catch(M){console.error("Save failed:",M),ee.error("Failed to save changes")}},[T,c,A]),L=K.useCallback(()=>{var R;if(!((R=e==null?void 0:e.results)!=null&&R.segments)){ee.error("No original transcript available");return}if(window.confirm("This will discard all edits and restore the original transcript. Continue?")){v.current&&clearTimeout(v.current),N.current&&clearTimeout(N.current);const{content:O,speakers:D}=k(e.results.segments);i(O),f(D),y({}),m(!1),h(!1),l.current=JSON.stringify(D);const M=S();localStorage.removeItem(M.content),localStorage.removeItem(M.speakers),localStorage.removeItem(M.hasEdits),setTimeout(()=>{h(!0)},300)}},[e]),F=K.useCallback(async()=>{try{const I=E(),R=document.createElement("div");R.innerHTML=I;const O=R.textContent||R.innerText||"";await navigator.clipboard.writeText(O),a(!0),setTimeout(()=>a(!1),2e3)}catch{ee.error("Failed to copy")}},[E]);K.useEffect(()=>()=>{v.current&&clearTimeout(v.current),N.current&&clearTimeout(N.current)},[]);const B=K.useMemo(()=>({toolbar:[["bold","italic","underline"],[{color:[]},{background:[]}],["clean"]]}),[]),q=K.useMemo(()=>["bold","italic","underline","color","background"],[]);return K.useEffect(()=>{if(p.current&&g){const I=p.current.getEditor();if(I){const R=I.container,O=R.querySelector(".ql-editor"),D=R.querySelector(".ql-container");O&&D&&(D.style.height="100%",D.style.maxHeight="100%",D.style.overflow="hidden",D.style.display="flex",D.style.flexDirection="column",O.style.flex="1",O.style.height="0",O.style.minHeight="0",O.style.maxHeight="100%",O.style.overflowY="auto",O.style.overflowX="hidden",O.style.scrollBehavior="smooth",O.style.padding="20px",O.style.boxSizing="border-box",console.log("âœ¨ FIXED: Overflow prevention and smooth scrolling setup completed"))}}},[g]),s?t.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 h-full flex flex-col",children:[t.jsx("div",{className:"p-6 border-b border-gray-200 flex-shrink-0",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Live Transcript Editor"}),t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsxs("button",{onClick:()=>w(!b),className:`flex items-center space-x-2 px-4 py-2 rounded-lg text-sm font-medium transition-colors ${b?"bg-blue-100 text-blue-700 hover:bg-blue-200":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[t.jsx(cr,{className:"w-4 h-4"}),t.jsx("span",{children:"Speaker Mapping"})]}),t.jsxs("button",{onClick:F,className:"flex items-center space-x-2 px-4 py-2 bg-gray-100 text-gray-700 hover:bg-gray-200 rounded-lg text-sm font-medium transition-colors",children:[d?t.jsx(ze,{className:"w-4 h-4 text-green-600"}):t.jsx(ts,{className:"w-4 h-4"}),t.jsx("span",{children:"Copy"})]}),t.jsxs("button",{onClick:L,className:"flex items-center space-x-2 px-4 py-2 bg-gray-100 text-gray-700 hover:bg-gray-200 rounded-lg text-sm font-medium transition-colors",children:[t.jsx(Xr,{className:"w-4 h-4"}),t.jsx("span",{children:"Reset"})]}),t.jsxs("button",{onClick:C,disabled:!x,className:`flex items-center space-x-2 px-4 py-2 rounded-lg text-sm font-medium transition-colors ${x?"bg-blue-500 text-white hover:bg-blue-600":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:[t.jsx(Wr,{className:"w-4 h-4 mr-2"}),"Save"]})]})]})}),b&&t.jsx(fe.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"bg-gray-50 border-b border-gray-200 overflow-hidden",children:t.jsxs("div",{className:"p-4 max-h-64 overflow-y-auto",children:[t.jsxs("h4",{className:"font-medium text-gray-900 mb-4 flex items-center",children:[t.jsx(Ke,{className:"w-4 h-4 mr-2"}),"Speaker Names"]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 mb-4",children:Object.entries(c).map(([I,R])=>t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-sm font-medium text-gray-700",children:I}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"text",value:R||"",onChange:O=>j(I,O.target.value),className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 text-sm transition-colors ${o[I]?"border-red-300 focus:ring-red-500 bg-red-50":"border-gray-300 focus:ring-blue-500"}`,placeholder:"Enter speaker name..."}),o[I]&&t.jsx("div",{className:"absolute right-2 top-2",children:t.jsx(_e,{className:"w-4 h-4 text-red-500"})})]}),o[I]&&t.jsxs("p",{className:"text-xs text-red-600 flex items-center",children:[t.jsx(_e,{className:"w-3 h-3 mr-1"}),o[I]]})]},I))}),t.jsxs("div",{className:"flex flex-wrap gap-4",children:[t.jsxs("div",{className:"flex-1 min-w-64 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[t.jsxs("p",{className:"text-xs text-blue-700 font-medium",children:["â„¹ï¸ ",t.jsx("strong",{children:"Downloads moved to header!"})]}),t.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"Use the enhanced download menu in the page header for all download options."})]}),Object.keys(o).length>0&&t.jsxs("div",{className:"flex-1 min-w-64 p-3 bg-red-50 border border-red-200 rounded-lg",children:[t.jsx("p",{className:"text-xs text-red-700 font-medium mb-1",children:"âŒ Fix before saving:"}),t.jsx("ul",{className:"text-xs text-red-600 space-y-1",children:Object.entries(o).map(([I,R])=>t.jsxs("li",{children:["â€¢ ",I,": ",R]},I))})]}),t.jsx("div",{className:"flex-1 min-w-64 p-3 bg-green-50 border border-green-200 rounded-lg",children:t.jsxs("p",{className:"text-xs text-green-700",children:["ðŸ”§ ",t.jsx("strong",{children:"Status:"})," ",Object.keys(c).length," speakers â€¢ Initialized: ",g?"âœ…":"â³"]})})]})]})}),t.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden h-full",children:[t.jsx("div",{className:"flex-1 p-4 overflow-hidden h-full",children:t.jsx("div",{className:"h-full overflow-hidden",children:t.jsx(Ya,{ref:p,theme:"snow",onChange:P,modules:B,formats:q,style:{height:b?"calc(160vh - 900px)":"calc(160vh - 700px)",maxHeight:b?"calc(160vh - 900px)":"calc(160vh - 700px)",minHeight:b?"600px":"800px"},className:"smooth-scroll-editor"})})}),t.jsxs("div",{className:"px-4 py-2 bg-gray-50 border-t border-gray-200 flex items-center justify-between text-sm text-gray-600 flex-shrink-0",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsxs("span",{children:["Speakers: ",Object.keys(c).length]}),t.jsx("span",{children:"â€¢"}),t.jsx("span",{children:x?"Live Editing Mode":"Saved"}),Object.keys(o).length>0&&t.jsxs(t.Fragment,{children:[t.jsx("span",{children:"â€¢"}),t.jsxs("span",{className:"text-red-600 flex items-center",children:[t.jsx(_e,{className:"w-3 h-3 mr-1"}),Object.keys(o).length," error",Object.keys(o).length!==1?"s":""]})]})]}),x&&t.jsxs("div",{className:"flex items-center space-x-2 text-green-600",children:[t.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),t.jsx("span",{children:"Live editing"})]})]})]})]}):t.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-8 h-full flex flex-col items-center justify-center",children:[t.jsx(Ot,{className:"w-16 h-16 text-gray-400 mb-4"}),t.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"Live Transcript Editor"}),t.jsx("p",{className:"text-gray-500 text-center",children:"Process an audio file to start editing your transcript with live speaker name mapping."})]})});Bn.displayName="LiveTranscriptEditor";const Za=({results:e,isExpanded:s,onToggleExpand:n,hasSession:r,editorRef:i,onViewChange:c})=>{var m,d,a;const[f,b]=K.useState(!1),w=o=>{b(o),c&&c(o?"editor":"original")},x=o=>{const y=Math.floor(o/60),g=Math.floor(o%60);return`${y}:${String(g).padStart(2,"0")}`};return!r&&!e?t.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 h-full flex flex-col items-center justify-center p-8",children:[t.jsx(Ue,{className:"w-16 h-16 text-gray-400 mb-4"}),t.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"No Transcript Available"}),t.jsx("p",{className:"text-gray-500 text-center",children:"Upload and process an audio file to see the transcript here."})]}):t.jsxs("div",{className:`bg-white rounded-2xl shadow-sm border border-gray-200 transition-all duration-300 ${s?"fixed inset-4 z-50":"h-full"}`,children:[t.jsxs("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Live Transcript"}),e&&t.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[t.jsxs("button",{onClick:()=>w(!1),className:`flex items-center space-x-2 px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${f?"text-gray-600 hover:text-gray-900":"bg-white text-gray-900 shadow-sm"}`,children:[t.jsx(bt,{className:"w-4 h-4"}),t.jsx("span",{children:"Original"})]}),t.jsxs("button",{onClick:()=>w(!0),className:`flex items-center space-x-2 px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${f?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[t.jsx(Ot,{className:"w-4 h-4"}),t.jsx("span",{children:"Editor"})]})]})]}),t.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:s?"Minimize":"Expand",children:s?t.jsx(rs,{className:"w-5 h-5 text-gray-600"}):t.jsx(ns,{className:"w-5 h-5 text-gray-600"})})]}),t.jsx("div",{className:"flex-1 overflow-hidden flex flex-col",children:f?t.jsx("div",{className:"flex-1 overflow-hidden h-full",children:t.jsx(Bn,{ref:i,results:e,hasSession:r})}):t.jsx("div",{className:"flex-1 overflow-hidden flex flex-col h-full",children:(m=e==null?void 0:e.results)!=null&&m.segments?t.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden p-6 space-y-4",style:{scrollBehavior:"smooth",maxHeight:"calc(160vh - 600px)",height:"100%",minHeight:"800px"},children:e.results.segments.map((o,y)=>t.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200 hover:bg-gray-100 transition-colors w-full",style:{maxWidth:"100%",boxSizing:"border-box"},children:t.jsxs("div",{className:"flex items-start space-x-4 w-full",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsxs("div",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-xs font-medium whitespace-nowrap",children:[x(o.start)," - ",x(o.end)]})}),t.jsxs("div",{className:"flex-1 min-w-0 overflow-hidden",children:[t.jsx("div",{className:"flex items-center space-x-2 mb-2",children:t.jsx("span",{className:"font-semibold text-green-700 text-sm",children:o.speaker})}),t.jsx("p",{className:"text-gray-900 leading-relaxed break-words overflow-wrap-anywhere",children:o.text})]})]})},y))}):t.jsx("div",{className:"flex-1 flex items-center justify-center p-8 overflow-hidden h-full",children:t.jsxs("div",{className:"text-center",children:[t.jsx(Ue,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),t.jsx("h4",{className:"text-lg font-medium text-gray-600 mb-2",children:"No Transcript Data"}),t.jsx("p",{className:"text-gray-500",children:"The transcript will appear here once processing is complete."})]})})})}),!f&&((d=e==null?void 0:e.results)==null?void 0:d.segments)&&t.jsxs("div",{className:"px-6 py-3 bg-gray-50 border-t border-gray-200 flex items-center justify-between text-sm text-gray-600",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsxs("span",{children:[e.results.segments.length," segments"]}),t.jsx("span",{children:"â€¢"}),t.jsxs("span",{children:[new Set(e.results.segments.map(o=>o.speaker)).size," speakers"]}),((a=e.results.metadata)==null?void 0:a.total_duration)&&t.jsxs(t.Fragment,{children:[t.jsx("span",{children:"â€¢"}),t.jsxs("span",{children:[x(e.results.metadata.total_duration)," total"]})]})]}),t.jsx("div",{className:"text-xs text-gray-500",children:"Original transcript view"})]})]})},Vt=e=>{var s,n,r,i,c,f,b;return e?(console.log("ðŸ” Validating results structure:",{hasData:!!e,hasResults:!!e.results,hasSegments:!!((s=e.results)!=null&&s.segments),segmentsCount:((r=(n=e.results)==null?void 0:n.segments)==null?void 0:r.length)||0,dataKeys:Object.keys(e),resultsKeys:e.results?Object.keys(e.results):[]}),(i=e.results)!=null&&i.segments&&Array.isArray(e.results.segments)?(console.log("âœ… Valid results structure found"),e):e.segments&&Array.isArray(e.segments)?(console.log("âœ… Found segments at root level, normalizing..."),{results:{segments:e.segments,metadata:e.metadata||{},speaker_stats:e.speaker_stats||{}}}):Array.isArray(e)?(console.log("âœ… Found array data, treating as segments..."),{results:{segments:e,metadata:{},speaker_stats:{}}}):(c=e.result)!=null&&c.segments?(console.log("âœ… Found segments in result property, normalizing..."),{results:{segments:e.result.segments,metadata:e.result.metadata||{},speaker_stats:e.result.speaker_stats||{}}}):(console.warn("âš ï¸ Could not find valid segments in data structure:",{hasResults:!!e.results,hasResultsSegments:!!((f=e.results)!=null&&f.segments),hasSegments:!!e.segments,isArray:Array.isArray(e),hasResultSegments:!!((b=e.result)!=null&&b.segments)}),null)):(console.log("âŒ No data received"),null)},Xa=()=>{var P,C;const e=Je(),s=lr(),{isConnected:n,updateSession:r}=dt(),i=K.useRef(null),[c,f]=K.useState("original"),b=se(L=>L.currentSessionId),w=se(L=>L.setCurrentSessionId),x=se(L=>L.processingStatus),m=se(L=>L.setProcessingStatus),d=se(L=>L.updateProgressSimulation),a=se(L=>L.updateBackendProgress),o=se(L=>L.results),y=se(L=>L.setResults),g=se(L=>L.expandedTranscript),h=se(L=>L.setExpandedTranscript),p=se(L=>L.structures),u=se(L=>L.parameters),v=K.useRef(null),l=K.useRef(null),N=K.useRef(!1),T=K.useRef(!1),S=K.useCallback(L=>{f(L)},[]),k=K.useCallback(()=>{l.current&&clearInterval(l.current);const L=se.getState().processingStatus;!(L!=null&&L.simulationActive)||!(L!=null&&L.startTime)||!(L!=null&&L.estimatedDuration)||(console.log("ðŸŽ¬ Starting progress simulation"),l.current=setInterval(()=>{const F=se.getState().processingStatus;if(!(F!=null&&F.simulationActive)){clearInterval(l.current),l.current=null;return}const q=(Date.now()-F.startTime)/1e3,I=Math.min(q/F.estimatedDuration,1),O=5+(1-Math.pow(1-I,2))*90;d(O),O>=95&&(clearInterval(l.current),l.current=null,console.log("ðŸŽ¬ Progress simulation reached 95%, stopping"))},100))},[d]),A=K.useCallback(()=>{l.current&&(clearInterval(l.current),l.current=null,console.log("ðŸ›‘ Progress simulation stopped"))},[]);K.useEffect(()=>{if(N.current)return;N.current=!0;const L=e.state;if(b&&o&&!L){console.log("ðŸ”„ Page refresh detected - session already completed"),(x==null?void 0:x.status)!=="completed"&&m({status:"completed",progress:100,message:"Processing completed successfully!",simulationActive:!1});return}if(L!=null&&L.sessionId){console.log("ðŸ”¥ Receiving new session:",L.sessionId),T.current=!1,w(L.sessionId);const F=se.getState().processingStatus;(!F||F.status!=="processing"||F.sessionId!==L.sessionId)&&(m({status:"processing",progress:5,simulatedProgress:5,backendProgress:null,simulationActive:!0,message:"Starting audio processing...",fileInfo:L.fileInfo,sessionId:L.sessionId}),setTimeout(()=>{k()},100))}},[e.state,w,m,b,o,x,k]),K.useEffect(()=>{const L=b,F=o&&Vt(o);if(!L||(x==null?void 0:x.status)==="completed"&&F||L.startsWith("temp_")||v.current){(x==null?void 0:x.status)==="completed"&&F&&console.log("âœ… Session already completed with valid results - skipping polling");return}console.log("ðŸ”„ Starting status polling for session:",L),_(L)},[b,x==null?void 0:x.status,o]);const _=K.useCallback(L=>{v.current&&clearInterval(v.current),console.log("ðŸ”„ Starting status polling for:",L);let F=0;const B=3;v.current=setInterval(async()=>{var q;try{const I=se.getState().results,R=se.getState().processingStatus,O=I&&Vt(I);if((R==null?void 0:R.status)==="completed"&&O){console.log("ðŸ›‘ Stopping polling - session already completed with valid results"),clearInterval(v.current),v.current=null;return}const M=(await ae.get(`/api/processing-status/${L}`)).data;if(F=0,console.log("ðŸ“Š Backend status:",M.status,M.progress||"no progress"),r&&r(L,M),M.status==="completed"){console.log("âœ… Backend processing completed"),A(),clearInterval(v.current),v.current=null;const H=se.getState().processingStatus,z=Math.max(100,(H==null?void 0:H.progress)||0);m({status:"completed",progress:z,message:"Processing completed successfully!",simulationActive:!1,sessionId:L});try{const U=await ae.get(`/api/results/${L}`);console.log("ðŸ“¦ Fetched results:",U.data);const $=Vt(U.data);$?(y($),console.log("âœ… Results set successfully with normalized structure"),T.current||(ee.success("Transcription completed!"),T.current=!0)):(console.error("âŒ Could not validate or normalize results structure"),ee.error("Results received but data structure is invalid"))}catch(U){console.error("Failed to fetch results:",U),ee.error("Processing completed but failed to fetch results")}}else if(M.status==="failed")console.log("âŒ Backend processing failed"),A(),clearInterval(v.current),v.current=null,m({status:"failed",message:M.message||"Processing failed",progress:0,simulationActive:!1,sessionId:L}),ee.error("Processing failed");else if(M.status==="processing"){const H=se.getState().processingStatus;(!H||M.progress>(H.backendProgress||0))&&(a(M.progress||5),M.message&&M.message!==(H==null?void 0:H.message)&&m({...se.getState().processingStatus,message:M.message,sessionId:L}),console.log("ðŸ“ˆ Updated backend progress:",M.progress))}}catch(I){F++,console.error(`Status polling error (${F}/${B}):`,I),((q=I.response)==null?void 0:q.status)===404?F>=B&&(console.log("âŒ Session not found after multiple attempts, stopping polling"),A(),clearInterval(v.current),v.current=null,m({status:"failed",message:"Session not found on server",progress:0,simulationActive:!1,sessionId:L}),L.startsWith("temp_")||ee.error("Session not found on server")):F>=B&&(console.log("âŒ Multiple network errors, stopping polling"),A(),clearInterval(v.current),v.current=null)}},3e3)},[m,y,r,a,A]),E=K.useCallback(()=>{v.current&&(clearInterval(v.current),v.current=null),A(),T.current=!1,w(null),m(null),y(null),s("/")},[s,w,m,y,A]);K.useEffect(()=>()=>{v.current&&(console.log("ðŸ§¹ Cleaning up status polling on unmount"),clearInterval(v.current),v.current=null),l.current&&(console.log("ðŸ§¹ Cleaning up progress simulation on unmount"),clearInterval(l.current),l.current=null)},[]);const j=!!b;return t.jsx("div",{className:"min-h-screen bg-gray-800 overflow-auto",children:t.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[t.jsx(Ba,{currentSessionId:b,results:o,structures:p,parameters:u,hasSession:j,editorRef:i,currentView:c}),t.jsx(Ha,{hasSession:j,processingStatus:x,onReset:E,results:o,metadata:(P=o==null?void 0:o.results)==null?void 0:P.metadata,speakerStats:(C=o==null?void 0:o.results)==null?void 0:C.speaker_stats}),t.jsx("div",{className:"flex justify-center",style:{height:"calc(160vh - 480px)",minHeight:"960px"},children:t.jsx("div",{className:"border-4 border-cyan-400 rounded-3xl p-2 w-full max-w-5xl overflow-hidden",style:{maxWidth:"calc(64rem + 100px)",height:"100%"},children:t.jsx(Za,{results:o,isExpanded:g,onToggleExpand:()=>h(!g),hasSession:j,editorRef:i,onViewChange:S})})})]})})},Qa=()=>{var a,o,y,g,h,p,u,v,l,N,T,S,k,A,_;const{backendStatus:e,checkBackendHealth:s,activeSessions:n,removeSession:r}=dt(),[i,c]=K.useState("http://localhost:8888"),[f,b]=K.useState(null);K.useEffect(()=>{e.info&&b(e.info)},[e.info]);const w=async()=>{ee.loading("Checking connection...",{id:"refresh"}),await s()?ee.success("Connection successful!",{id:"refresh"}):ee.error("Connection failed",{id:"refresh"})},x=async E=>{try{await ae.cleanupSession(E),r(E),ee.success("Session cleared")}catch{ee.error("Failed to clear session")}},m=async()=>{const E=Array.from(n.keys());for(const j of E)try{await ae.cleanupSession(j),r(j)}catch(P){console.error(`Failed to clear session ${j}:`,P)}ee.success("All sessions cleared")},d=()=>{var L,F,B,q,I,R,O,D,M;if(!f)return;const E=`Speech AI Platform - System Information
${"=".repeat(50)}

Generated: ${new Date().toLocaleString()}

Backend Status:
- Status: ${e.connected?"Connected":"Disconnected"}
- Last Checked: ${((L=e.lastChecked)==null?void 0:L.toLocaleString())||"Never"}
- URL: ${i}

System Information:
- Tailscale Connected: ${((F=f.tailscale)==null?void 0:F.connected)||!1}
- Tailscale IP: ${((B=f.tailscale)==null?void 0:B.ip)||"N/A"}
- Pipeline Available: ${((q=f.features)==null?void 0:q.pipeline_available)||!1}
- Whisper Model: ${((I=f.features)==null?void 0:I.whisper_model)||"N/A"}
- Preprocessing: ${((R=f.features)==null?void 0:R.preprocessing)||!1}

LLM Status:
- Status: ${((O=f.llm)==null?void 0:O.status)||"Unknown"}
- Current Model: ${((D=f.llm)==null?void 0:D.current_model)||"N/A"}
- Model Available: ${((M=f.llm)==null?void 0:M.model_available)||!1}

Active Sessions: ${n.size}

${"=".repeat(50)}
Generated by Speech AI Platform
`,j=new Blob([E],{type:"text/plain"}),P=URL.createObjectURL(j),C=document.createElement("a");C.href=P,C.download=`system_info_${new Date().toISOString().split("T")[0]}.txt`,document.body.appendChild(C),C.click(),C.remove(),URL.revokeObjectURL(P),ee.success("System info downloaded")};return t.jsxs("div",{className:"flex-1 p-6 max-w-4xl mx-auto",children:[t.jsx("div",{className:"mb-8",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"p-2 bg-gradient-to-r from-gray-500 to-slate-500 rounded-lg",children:t.jsx(St,{className:"w-6 h-6 text-white"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Settings"}),t.jsx("p",{className:"text-gray-600",children:"Configure and monitor your Speech AI platform"})]})]})}),t.jsxs("div",{className:"space-y-8",children:[t.jsxs(fe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx(ss,{className:"w-5 h-5 text-blue-500"}),t.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Backend Connection"})]}),t.jsxs("button",{onClick:w,className:"flex items-center space-x-2 px-3 py-2 bg-blue-50 text-blue-600 border border-blue-200 rounded-lg hover:bg-blue-100 transition-colors",children:[t.jsx(it,{className:"w-4 h-4"}),t.jsx("span",{children:"Test Connection"})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Backend URL"}),t.jsx("input",{type:"text",value:i,onChange:E=>c(E.target.value),placeholder:"http://192.168.1.100:8888",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Configure this in your .env file as VITE_BACKEND_URL"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:`p-4 rounded-lg border ${e.connected?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[e.connected?t.jsx(ze,{className:"w-5 h-5 text-green-500"}):t.jsx(_e,{className:"w-5 h-5 text-red-500"}),t.jsxs("span",{className:`font-medium ${e.connected?"text-green-900":"text-red-900"}`,children:["Backend ",e.connected?"Connected":"Disconnected"]})]}),e.lastChecked&&t.jsxs("p",{className:`text-sm mt-1 ${e.connected?"text-green-700":"text-red-700"}`,children:["Last checked: ",e.lastChecked.toLocaleTimeString()]})]}),t.jsxs("div",{className:`p-4 rounded-lg border ${((a=f==null?void 0:f.llm)==null?void 0:a.status)==="connected"?"bg-green-50 border-green-200":"bg-yellow-50 border-yellow-200"}`,children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(rt,{className:`w-5 h-5 ${((o=f==null?void 0:f.llm)==null?void 0:o.status)==="connected"?"text-green-500":"text-yellow-500"}`}),t.jsxs("span",{className:`font-medium ${((y=f==null?void 0:f.llm)==null?void 0:y.status)==="connected"?"text-green-900":"text-yellow-900"}`,children:["LLM ",((g=f==null?void 0:f.llm)==null?void 0:g.status)==="connected"?"Ready":"Offline"]})]}),((h=f==null?void 0:f.llm)==null?void 0:h.current_model)&&t.jsxs("p",{className:`text-sm mt-1 ${((p=f==null?void 0:f.llm)==null?void 0:p.status)==="connected"?"text-green-700":"text-yellow-700"}`,children:["Model: ",f.llm.current_model]})]})]})]})]}),f&&t.jsxs(fe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx(is,{className:"w-5 h-5 text-green-500"}),t.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"System Information"})]}),t.jsxs("button",{onClick:d,className:"flex items-center space-x-2 px-3 py-2 bg-green-50 text-green-600 border border-green-200 rounded-lg hover:bg-green-100 transition-colors",children:[t.jsx(ur,{className:"w-4 h-4"}),t.jsx("span",{children:"Download Info"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Backend Features"}),t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:"Pipeline:"}),t.jsx("span",{className:(u=f.features)!=null&&u.pipeline_available?"text-green-600":"text-red-600",children:(v=f.features)!=null&&v.pipeline_available?"Available":"Unavailable"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:"Whisper Model:"}),t.jsx("span",{className:"text-gray-900",children:((l=f.features)==null?void 0:l.whisper_model)||"N/A"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:"Preprocessing:"}),t.jsx("span",{className:(N=f.features)!=null&&N.preprocessing?"text-green-600":"text-gray-600",children:(T=f.features)!=null&&T.preprocessing?"Enabled":"Disabled"})]})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Network"}),t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:"Tailscale:"}),t.jsx("span",{className:(S=f.tailscale)!=null&&S.connected?"text-green-600":"text-gray-600",children:(k=f.tailscale)!=null&&k.connected?"Connected":"Disconnected"})]}),((A=f.tailscale)==null?void 0:A.ip)&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:"Tailscale IP:"}),t.jsx("span",{className:"text-gray-900 font-mono text-xs",children:f.tailscale.ip})]}),((_=f.tailscale)==null?void 0:_.url)&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:"Remote URL:"}),t.jsx("a",{href:f.tailscale.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 font-mono text-xs",children:f.tailscale.url})]})]})]})]})]}),t.jsxs(fe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx(ht,{className:"w-5 h-5 text-red-500"}),t.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Session Management"})]}),n.size>0&&t.jsxs("button",{onClick:m,className:"flex items-center space-x-2 px-3 py-2 bg-red-50 text-red-600 border border-red-200 rounded-lg hover:bg-red-100 transition-colors",children:[t.jsx(ht,{className:"w-4 h-4"}),t.jsx("span",{children:"Clear All"})]})]}),n.size===0?t.jsxs("div",{className:"text-center py-8 text-gray-500",children:[t.jsx(ht,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),t.jsx("p",{children:"No active sessions"})]}):t.jsx("div",{className:"space-y-3",children:Array.from(n.entries()).map(([E,j])=>t.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"font-medium text-gray-900",children:["Session ",E.slice(0,8),"..."]}),t.jsxs("div",{className:"text-sm text-gray-600",children:["Status: ",t.jsx("span",{className:`font-medium ${j.status==="completed"?"text-green-600":j.status==="processing"?"text-blue-600":j.status==="failed"?"text-red-600":"text-gray-600"}`,children:j.status})]})]}),t.jsx("button",{onClick:()=>x(E),className:"px-3 py-1 bg-red-50 text-red-600 border border-red-200 rounded-md hover:bg-red-100 transition-colors text-sm",children:"Clear"})]},E))})]}),t.jsxs(fe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl border border-blue-200 p-6",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Help & Support"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 text-sm",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Common Issues"}),t.jsxs("ul",{className:"space-y-1 text-gray-600",children:[t.jsx("li",{children:"â€¢ Backend not connecting? Check if server is running"}),t.jsx("li",{children:"â€¢ LLM offline? Ensure Ollama is started and model is pulled"}),t.jsx("li",{children:"â€¢ Processing slow? Check system resources"}),t.jsx("li",{children:"â€¢ Upload fails? Verify file format and size"})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Quick Commands"}),t.jsxs("div",{className:"space-y-1 text-gray-600",children:[t.jsxs("div",{children:["Backend: ",t.jsx("code",{className:"bg-white px-2 py-1 rounded text-xs",children:"python main.py"})]}),t.jsxs("div",{children:["Ollama: ",t.jsx("code",{className:"bg-white px-2 py-1 rounded text-xs",children:"ollama serve"})]}),t.jsxs("div",{children:["Model: ",t.jsx("code",{className:"bg-white px-2 py-1 rounded text-xs",children:"ollama pull llama3.2:3b"})]})]})]})]})]})]})]})},el=({prompt:e,selectedSession:s,analysisResults:n,analysisProgress:r,isLoading:i,onRunAnalysis:c,onDownload:f,showUsageStats:b=!1,isAdminView:w=!1,onToggleStatus:x,onEdit:m,onDelete:d})=>{const a=os[e.icon]||rt,o=n[e.key],y=r[e.key];console.log(`ðŸ” UnifiedAnalysisCard Debug for ${e.key}:`,{prompt:e.key,result:o,progress:y,isLoading:i,analysisResults:Object.keys(n),analysisProgress:Object.keys(r)});const g=u=>u?u.split(`
`).map((l,N)=>l.trim()===""?t.jsx("div",{className:"mb-2"},N):l.startsWith("**")&&l.endsWith("**")?t.jsx("h4",{className:"text-lg font-semibold text-gray-200 mt-4 mb-2",children:l.replace(/\*\*/g,"")},N):l.startsWith("###")?t.jsx("h5",{className:"text-md font-medium text-gray-300 mt-3 mb-2",children:l.replace(/###/g,"").trim()},N):l.startsWith("- ")||l.startsWith("â€¢ ")?t.jsx("li",{className:"ml-4 text-gray-300 mb-1 list-disc",children:l.replace(/^[â€¢\-]\s/,"")},N):l.includes("**")?t.jsx("p",{className:"text-gray-300 mb-2",dangerouslySetInnerHTML:{__html:l.replace(/\*\*(.*?)\*\*/g,'<strong class="text-white">$1</strong>')}},N):l.trim().match(/^\d+\./)?t.jsx("div",{className:"text-gray-300 mb-2 ml-4",children:l.trim()},N):t.jsx("p",{className:"text-gray-300 mb-2",children:l},N)):t.jsx("div",{className:"text-gray-500",children:"No content available"}),h=()=>e.gradient_from&&e.gradient_to?`from-${e.gradient_from} to-${e.gradient_to}`:{general:"from-blue-500 to-blue-600",meeting:"from-green-500 to-green-600",content:"from-purple-500 to-purple-600",analysis:"from-yellow-500 to-yellow-600",productivity:"from-orange-500 to-orange-600"}[e.category]||"from-cyan-500 to-cyan-600",p=()=>({general:"border-blue-500/30 text-blue-400",meeting:"border-green-500/30 text-green-400",content:"border-purple-500/30 text-purple-400",analysis:"border-yellow-500/30 text-yellow-400",productivity:"border-orange-500/30 text-orange-400"})[e.category]||"border-blue-500/30 text-blue-400";return t.jsxs(fe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gray-800 rounded-xl border border-gray-700 overflow-hidden hover:border-gray-600 transition-all duration-200",children:[t.jsx("div",{className:`p-4 bg-gradient-to-r ${h()}`,children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:t.jsx("span",{className:"text-2xl",children:e.emoji})}),t.jsxs("div",{className:"text-white",children:[t.jsx("h3",{className:"font-semibold",children:e.title}),t.jsx("p",{className:"text-sm opacity-90",children:e.description})]})]}),w&&t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx("button",{onClick:()=>x(e),className:`p-2 rounded-lg transition-colors ${e.is_active?"bg-green-600/20 text-green-400 hover:bg-green-600/30":"bg-gray-600/20 text-gray-400 hover:bg-gray-600/30"}`,title:e.is_active?"Deactivate":"Activate",children:e.is_active?t.jsx(bt,{className:"w-4 h-4"}):t.jsx(Wt,{className:"w-4 h-4"})}),t.jsx("button",{onClick:()=>m(e),className:"p-2 bg-blue-600/20 text-blue-400 rounded-lg hover:bg-blue-600/30 transition-colors",title:"Edit Prompt",children:t.jsx(a,{className:"w-4 h-4"})}),!e.is_system&&t.jsx("button",{onClick:()=>d(e.id),className:"p-2 bg-red-600/20 text-red-400 rounded-lg hover:bg-red-600/30 transition-colors",title:"Delete Prompt",children:t.jsx(_e,{className:"w-4 h-4"})})]})]})}),t.jsxs("div",{className:"flex items-center justify-between mb-4 px-4 pt-4",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("span",{className:`px-2 py-1 text-xs rounded border ${p()}`,children:e.category}),t.jsxs("div",{className:"flex items-center space-x-1 text-xs text-gray-500",children:[t.jsx(Qr,{className:"w-3 h-3"}),t.jsxs("span",{children:["~",e.estimated_time,"s"]})]}),b&&t.jsxs("div",{className:"flex items-center space-x-1 text-xs text-gray-500",children:[t.jsx(as,{className:"w-3 h-3"}),t.jsxs("span",{children:[e.usage_count," uses"]})]})]}),!w&&e.is_active&&t.jsx("button",{onClick:()=>c(e.key),disabled:i,className:`px-4 py-2 bg-gradient-to-r ${h()} text-white rounded-lg hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 flex items-center space-x-2`,children:i?t.jsxs(t.Fragment,{children:[t.jsx(je,{className:"w-4 h-4 animate-spin"}),t.jsx("span",{children:"Processing..."})]}):t.jsxs(t.Fragment,{children:[t.jsx(rt,{className:"w-4 h-4"}),t.jsx("span",{children:"Analyze"})]})})]}),y&&y.status==="processing"&&t.jsx("div",{className:"px-4 pb-4",children:t.jsxs("div",{className:"bg-blue-900/20 border border-blue-500/30 rounded-lg p-3",children:[t.jsxs("div",{className:"flex items-center space-x-2 text-sm text-blue-400 mb-2",children:[t.jsx(je,{className:"w-4 h-4 animate-spin"}),t.jsx("span",{children:"Processing analysis..."})]}),t.jsxs("div",{className:"text-xs text-blue-300",children:["Started: ",new Date(y.timestamp).toLocaleTimeString()]})]})}),o&&(o.response||o.result)&&t.jsx(fe.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"px-4 pb-4",children:t.jsxs("div",{className:"border-t border-gray-700 pt-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-400",children:[t.jsx(ze,{className:"w-4 h-4 text-green-400"}),t.jsx("span",{children:"Analysis completed"}),o.timestamp&&t.jsxs(t.Fragment,{children:[t.jsx("span",{children:"â€¢"}),t.jsx("span",{children:new Date(o.timestamp).toLocaleTimeString()})]}),o.model&&t.jsxs(t.Fragment,{children:[t.jsx("span",{children:"â€¢"}),t.jsx("span",{children:o.model})]})]}),t.jsxs("button",{onClick:()=>f(e.key),className:"flex items-center space-x-2 px-3 py-1 bg-gray-700 text-gray-300 rounded-md hover:bg-gray-600 transition-colors text-sm",children:[t.jsx(ur,{className:"w-3 h-3"}),t.jsx("span",{children:"Download"})]})]}),t.jsx("div",{className:"bg-gray-700 rounded-lg p-4 max-h-80 overflow-y-auto",children:t.jsx("div",{className:"prose prose-sm max-w-none text-gray-300",children:g(o.response||o.result)})})]})}),o&&o.error&&t.jsx("div",{className:"px-4 pb-4",children:t.jsxs("div",{className:"border-t border-gray-700 pt-4",children:[t.jsxs("div",{className:"flex items-center space-x-2 text-sm text-red-400 mb-2",children:[t.jsx(_e,{className:"w-4 h-4"}),t.jsx("span",{children:"Analysis failed"})]}),t.jsx("div",{className:"bg-red-900/20 border border-red-500/30 rounded-lg p-3 text-sm text-red-400",children:o.error})]})}),y&&y.status==="failed"&&!o&&t.jsx("div",{className:"px-4 pb-4",children:t.jsxs("div",{className:"border-t border-gray-700 pt-4",children:[t.jsxs("div",{className:"flex items-center space-x-2 text-sm text-red-400 mb-2",children:[t.jsx(_e,{className:"w-4 h-4"}),t.jsx("span",{children:"Analysis failed"})]}),t.jsx("div",{className:"bg-red-900/20 border border-red-500/30 rounded-lg p-3 text-sm text-red-400",children:y.error||"Analysis failed to complete"})]})})]})},tl=()=>{var E;const[e,s]=K.useState([]),[n,r]=K.useState(""),[i,c]=K.useState("all"),[f,b]=K.useState(!1),[w,x]=K.useState(new Set),m=se(j=>j.currentSessionId),d=se(j=>j.results),a=se(j=>j.processingStatus),o=se(j=>j.customPrompt),y=se(j=>j.setCustomPrompt),g=se(j=>j.analysisResults),h=se(j=>j.setAnalysisResults),p=se(j=>j.analysisProgress),u=se(j=>j.setAnalysisProgress),[v,l]=K.useState({});K.useEffect(()=>{const j=setInterval(()=>{const P=se.getState();l({timestamp:new Date().toISOString(),analysisResults:P.analysisResults,analysisProgress:P.analysisProgress,analysisResultsCount:Object.keys(P.analysisResults||{}).length,analysisProgressCount:Object.keys(P.analysisProgress||{}).length})},1e3);return()=>clearInterval(j)},[]),dt();const N=[{value:"all",label:"All Categories"},{value:"general",label:"General"},{value:"meeting",label:"Meeting"},{value:"content",label:"Content"},{value:"analysis",label:"Analysis"},{value:"productivity",label:"Productivity"}];K.useEffect(()=>{T()},[]);const T=async()=>{var j;b(!0);try{let P=[];try{const C=await ae.get("/api/prompts/");(j=C==null?void 0:C.data)!=null&&j.prompts&&(P=Object.entries(C.data.prompts).map(([L,F])=>({key:L,title:F.title||"Untitled",description:F.description||"",category:F.category||"general",icon:F.icon||"Brain",is_active:!0,...F})))}catch{console.log("Using fallback prompts"),P=[{key:"summary",title:"Conversation Summary",description:"Generate a comprehensive summary",category:"general",icon:"FileText",is_active:!0},{key:"action_items",title:"Action Items",description:"Extract action items and tasks",category:"meeting",icon:"CheckSquare",is_active:!0}]}console.log(`âœ… Loaded ${P.length} prompts`),s(P)}catch(P){console.error("âŒ Failed to load prompts:",P)}finally{b(!1)}},S=()=>{var j;return(j=d==null?void 0:d.results)!=null&&j.segments?d.results.segments.map(P=>`${P.speaker}: ${P.text}`).join(`
`):null},k=async j=>{var P,C,L,F,B,q,I,R,O,D;if(console.log(`
ðŸš€ ============ STARTING ANALYSIS FOR: ${j} ============`),console.log("ðŸ“Š STEP 1: Current state before analysis:",{currentSessionId:m,analysisResults:JSON.stringify(g,null,2),analysisProgress:JSON.stringify(p,null,2),analysisResultsKeys:Object.keys(g||{}),analysisProgressKeys:Object.keys(p||{})}),!m){ee.error("No session selected. Please process audio first.");return}try{let M=S();if(!M){console.log("ðŸ“„ STEP 2: No transcript in results, fetching from API...");const Q=await ae.getResults(m);if(!((C=(P=Q==null?void 0:Q.data)==null?void 0:P.results)!=null&&C.segments)){ee.error("No transcript available for analysis.");return}M=Q.data.results.segments.map(ne=>`${ne.speaker}: ${ne.text}`).join(`
`)}console.log(`ðŸ“„ STEP 3: Transcript ready, length: ${M.length} characters`),x(Q=>new Set(Q).add(j)),console.log(`ðŸ“ˆ STEP 4: Setting progress to processing for ${j}...`);const H={...p,[j]:{status:"processing",progress:0,timestamp:new Date().toISOString()}};console.log("ðŸ“ˆ STEP 4a: New progress object:",H),u(H),setTimeout(()=>{const Q=se.getState();console.log("ðŸ“ˆ STEP 4b: Progress after setState:",Q.analysisProgress)},100);const z=e.find(Q=>Q.key===j);if(!z)throw new Error("Prompt not found");console.log("ðŸ” STEP 5: Found prompt:",z),console.log("ðŸŒ STEP 6: Making API call to /api/llm-process...");const U={transcript:M,prompt_key:j};console.log("ðŸŒ STEP 6a: API payload:",U);const $=await ae.post("/api/llm-process",U);console.log("âœ… STEP 7: Analysis API response received:",{status:$.status,data:$.data,hasResult:!!((L=$.data)!=null&&L.result||(F=$.data)!=null&&F.response),resultLength:((I=((B=$.data)==null?void 0:B.result)||((q=$.data)==null?void 0:q.response))==null?void 0:I.length)||0});const V={response:$.data.result||$.data.response,result:$.data.result||$.data.response,model:$.data.model,prompt_title:$.data.prompt_title||z.title,prompt_key:j,timestamp:new Date().toISOString(),processing_time:$.data.processing_time,raw_api_response:$.data};console.log("ðŸ’¾ STEP 8: Prepared result data:",{promptKey:j,hasResponse:!!V.response,hasResult:!!V.result,responseLength:((R=V.response)==null?void 0:R.length)||0,resultData:JSON.stringify(V,null,2)}),console.log("ðŸ“Š STEP 9: Updating analysisResults in store...");const W={...g,[j]:V};console.log("ðŸ“Š STEP 9a: New results object:",W),h(W),console.log("ðŸ“ˆ STEP 10: Setting progress to completed...");const Z={...p,[j]:{status:"completed",progress:100,timestamp:new Date().toISOString()}};console.log("ðŸ“ˆ STEP 10a: Final progress object:",Z),u(Z),setTimeout(()=>{var ne,oe;const Q=se.getState();console.log("ðŸŽ¯ STEP 11: FINAL VERIFICATION:",{analysisResults:Q.analysisResults,analysisProgress:Q.analysisProgress,hasResultForKey:!!Q.analysisResults[j],hasProgressForKey:!!Q.analysisProgress[j],resultContent:((oe=(ne=Q.analysisResults[j])==null?void 0:ne.response)==null?void 0:oe.substring(0,100))+"..."})},200),console.log("ðŸŽ‰ STEP 12: Analysis completed successfully!"),ee.success(`Analysis completed: ${z.title}`)}catch(M){console.error("âŒ ANALYSIS FAILED at some step:",M);const H=((D=(O=M.response)==null?void 0:O.data)==null?void 0:D.detail)||M.message||"Analysis failed";u(z=>({...z,[j]:{status:"failed",progress:0,error:H,timestamp:new Date().toISOString()}})),ee.error(H)}finally{x(M=>{const H=new Set(M);return H.delete(j),H}),console.log(`ðŸ ============ ANALYSIS PROCESS COMPLETE FOR: ${j} ============
`)}},A=Array.isArray(e)?e.filter(j=>{if(!j||typeof j!="object")return!1;const P=j.title||"",C=j.description||"";if(typeof P!="string"||typeof C!="string")return!1;try{const L=P.toLowerCase().includes(n.toLowerCase())||C.toLowerCase().includes(n.toLowerCase()),F=i==="all"||j.category===i;return L&&F}catch{return!1}}):[],_=m&&((a==null?void 0:a.status)==="completed"||((E=d==null?void 0:d.results)==null?void 0:E.segments));return t.jsx("div",{className:"min-h-screen bg-gray-900 text-white",children:t.jsxs("div",{className:"container mx-auto px-6 py-8",children:[t.jsx(fe.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx(Kr,{className:"w-8 h-8 text-cyan-400"}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-white",children:"Analysis Dashboard"}),t.jsx("p",{className:"text-gray-400 mt-1",children:"AI-powered insights and analysis"})]})]}),t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsxs("button",{onClick:T,disabled:f,className:"flex items-center space-x-2 px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors",children:[t.jsx(it,{className:`w-4 h-4 ${f?"animate-spin":""}`}),t.jsx("span",{children:"Refresh"})]}),t.jsxs("button",{onClick:()=>{console.log("ðŸ—‘ï¸ Clearing analysis history..."),h({}),u({}),ee.success("Analysis history cleared")},className:"flex items-center space-x-2 px-4 py-2 bg-red-600 hover:bg-red-700 rounded-lg transition-colors",children:[t.jsx(We,{className:"w-4 h-4"}),t.jsx("span",{children:"Clear History"})]})]})]})}),!_&&t.jsx("div",{className:"mb-6 p-4 bg-amber-900 border border-amber-700 rounded-xl",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx(Vr,{className:"w-5 h-5 text-amber-400"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-amber-200 font-medium",children:"No Active Session"}),t.jsx("p",{className:"text-amber-300 text-sm",children:"Please process audio first to enable analysis features."})]})]})}),t.jsx("div",{className:"mb-6 bg-gray-800 rounded-xl border border-gray-700 p-4",children:t.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsxs("div",{className:"relative",children:[t.jsx(Gt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),t.jsx("input",{type:"text",placeholder:"Search analysis prompts...",value:n,onChange:j=>r(j.target.value),className:"pl-10 pr-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-cyan-500 focus:border-transparent"})]}),t.jsx("select",{value:i,onChange:j=>c(j.target.value),className:"px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-cyan-500 focus:border-transparent",children:N.map(j=>t.jsx("option",{value:j.value,children:j.label},j.value))})]}),t.jsxs("div",{className:"text-sm text-gray-400",children:[A.length," of ",e.length," prompts"]})]})}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[t.jsxs("div",{className:"lg:col-span-2",children:[t.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Predefined Analysis"}),f?t.jsxs("div",{className:"text-center py-12",children:[t.jsx(je,{className:"animate-spin w-8 h-8 text-cyan-500 mx-auto"}),t.jsx("p",{className:"text-gray-400 mt-2",children:"Loading prompts..."})]}):A.length===0?t.jsxs("div",{className:"text-center py-12 bg-gray-800 rounded-xl border border-gray-700",children:[t.jsx(rt,{className:"w-12 h-12 text-gray-600 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-400 mb-2",children:"No analysis prompts available"})]}):t.jsx("div",{className:"grid gap-4",children:A.map(j=>{var L;const P=g[j.key],C=p[j.key];return console.log(`ðŸƒ RENDERING CARD for ${j.key}:`,{promptKey:j.key,hasAnalysisResult:!!P,hasAnalysisProgress:!!C,analysisResultContent:((L=P==null?void 0:P.response)==null?void 0:L.substring(0,50))+"..."||"No content",analysisProgressStatus:(C==null?void 0:C.status)||"No status",fullAnalysisResult:P,fullAnalysisProgress:C,allResultKeys:Object.keys(g||{}),allProgressKeys:Object.keys(p||{})}),t.jsx("div",{className:"relative",children:t.jsx(el,{prompt:j,selectedSession:m,analysisResults:g,analysisProgress:p,isLoading:w.has(j.key),onRunAnalysis:k,onDownload:F=>{console.log("ðŸ“¥ Download requested for:",F);const B=g[F];if(B!=null&&B.response||B!=null&&B.result){const q=new Blob([B.response||B.result],{type:"text/plain"}),I=URL.createObjectURL(q),R=document.createElement("a");R.href=I,R.download=`analysis_${F}.txt`,R.click(),URL.revokeObjectURL(I),ee.success("Analysis downloaded")}else ee.error("No result to download")},showUsageStats:!0,isAdminView:!1})},j.key)})})]}),t.jsxs("div",{className:"lg:col-span-1",children:[t.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Custom Analysis"}),t.jsxs("div",{className:"bg-gray-800 rounded-xl border border-gray-700 p-6",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[t.jsx(ls,{className:"w-5 h-5 text-yellow-400"}),t.jsx("h3",{className:"font-medium text-white",children:"Create Custom Prompt"})]}),t.jsx("textarea",{value:o,onChange:j=>y(j.target.value),placeholder:"Enter your custom analysis prompt here.",className:"w-full h-32 px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 resize-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent"}),t.jsx("button",{onClick:()=>k("custom_analysis"),disabled:!_||!o.trim()||w.has("custom_analysis"),className:`w-full mt-4 py-2 rounded-lg font-semibold transition-colors flex items-center justify-center space-x-2 ${_&&o.trim()&&!w.has("custom_analysis")?"bg-cyan-500 text-white hover:bg-cyan-600":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:w.has("custom_analysis")?t.jsxs(t.Fragment,{children:[t.jsx(je,{className:"w-4 h-4 animate-spin"}),t.jsx("span",{children:"Analyzing..."})]}):t.jsxs(t.Fragment,{children:[t.jsx(cs,{className:"w-4 h-4"}),t.jsx("span",{children:"Run Analysis"})]})})]})]})]})]})})},rl=()=>{const[e,s]=K.useState([]),[n,r]=K.useState([]),[i,c]=K.useState(!0),[f,b]=K.useState(""),[w,x]=K.useState("all"),[m,d]=K.useState(!1),[a,o]=K.useState(!1),[y,g]=K.useState(null),[h,p]=K.useState(!1),[u,v]=K.useState(()=>{const q={from:"blue-500",to:"blue-600"};return{key:"",title:"",description:"",prompt_template:"",icon:"Brain",emoji:"ðŸ¤–",category:"general",gradient_from:q.from,gradient_to:q.to,max_tokens:2e3,estimated_time:30}}),l=[{value:"all",label:"All Categories",color:"gray"},{value:"general",label:"General",color:"blue"},{value:"meeting",label:"Meeting",color:"green"},{value:"content",label:"Content",color:"purple"},{value:"analysis",label:"Analysis",color:"yellow"},{value:"productivity",label:"Productivity",color:"orange"}];K.useEffect(()=>{N()},[]);const N=async()=>{c(!0);try{await Promise.all([T(),S()])}catch(q){console.error("Failed to load initial data:",q),ee.error("Failed to load admin data")}finally{c(!1)}},T=async()=>{try{const q=await ae.prompts.getAll({category:w!=="all"?w:void 0,active_only:!1});s(q.data)}catch(q){throw console.error("Failed to load prompts:",q),q}},S=async()=>{try{const q=await ae.prompts.getCategories();r(q.data.categories||l)}catch(q){console.error("Failed to load categories:",q),r(l)}};K.useEffect(()=>{i||T()},[w]);const k=async q=>{var I,R;q.preventDefault(),p(!0);try{if(!u.key||!u.title||!u.prompt_template){ee.error("Please fill in all required fields");return}if(!u.prompt_template.includes("{transcript}")){ee.error("Prompt template must contain {transcript} placeholder");return}await ae.prompts.create(u),ee.success("Prompt created successfully!"),d(!1),P(),await T()}catch(O){console.error("Failed to create prompt:",O),((I=O.response)==null?void 0:I.status)===400?ee.error(O.response.data.detail||"Invalid prompt data"):((R=O.response)==null?void 0:R.status)===503?ee.error("Database not available"):ee.error("Failed to create prompt")}finally{p(!1)}},A=async q=>{var I,R;q.preventDefault(),p(!0);try{if(!y)return;await ae.prompts.update(y.id,u),ee.success("Prompt updated successfully!"),o(!1),g(null),P(),await T()}catch(O){console.error("Failed to update prompt:",O),((I=O.response)==null?void 0:I.status)===403?ee.error("Cannot modify system prompts"):((R=O.response)==null?void 0:R.status)===404?ee.error("Prompt not found"):ee.error("Failed to update prompt")}finally{p(!1)}},_=async q=>{var I,R;if(confirm(`Are you sure you want to delete "${q.title}"?`))try{await ae.prompts.delete(q.id),ee.success("Prompt deleted successfully!"),await T()}catch(O){console.error("Failed to delete prompt:",O),((I=O.response)==null?void 0:I.status)===403?ee.error("Cannot delete system prompts"):((R=O.response)==null?void 0:R.status)===404?ee.error("Prompt not found"):ee.error("Failed to delete prompt")}},E=async q=>{try{await ae.prompts.toggle(q.key),ee.success(`Prompt ${q.is_active?"deactivated":"activated"} successfully!`),await T()}catch(I){console.error("Failed to toggle prompt status:",I),ee.error("Failed to update prompt status")}},j=q=>{g(q),v({key:q.key,title:q.title,description:q.description,prompt_template:q.prompt_template,icon:q.icon,emoji:q.emoji,category:q.category,gradient_from:q.gradient_from,gradient_to:q.gradient_to,max_tokens:q.max_tokens,estimated_time:q.estimated_time}),o(!0)},P=()=>{const q=B("general");v({key:"",title:"",description:"",prompt_template:"",icon:"Brain",emoji:"ðŸ¤–",category:"general",gradient_from:q.from,gradient_to:q.to,max_tokens:2e3,estimated_time:30})},C=(q,I)=>{v(R=>{const O={...R,[q]:I};if(q==="category"){const D=B(I);O.gradient_from=D.from,O.gradient_to=D.to}return O})},L=e.filter(q=>{const I=q.title.toLowerCase().includes(f.toLowerCase())||q.description.toLowerCase().includes(f.toLowerCase())||q.key.toLowerCase().includes(f.toLowerCase()),R=w==="all"||q.category===w;return I&&R}),F=q=>({general:"blue",meeting:"green",content:"purple",analysis:"yellow",productivity:"orange"})[q]||"blue",B=q=>{const I={general:{from:"blue-500",to:"blue-600"},meeting:{from:"green-500",to:"green-600"},content:{from:"purple-500",to:"purple-600"},analysis:{from:"yellow-500",to:"yellow-600"},productivity:{from:"orange-500",to:"orange-600"}};return I[q]||I.general};return i?t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx(je,{className:"w-8 h-8 animate-spin text-cyan-600 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Loading admin dashboard..."})]})}):t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx("div",{className:"bg-white shadow-sm border-b",children:t.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Admin Dashboard"}),t.jsx("p",{className:"text-gray-600",children:"Manage analysis prompts and system settings"})]}),t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsxs("button",{onClick:()=>N(),className:"flex items-center space-x-2 px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:[t.jsx(it,{className:"w-4 h-4"}),t.jsx("span",{children:"Refresh"})]}),t.jsxs("button",{onClick:()=>d(!0),className:"flex items-center space-x-2 px-4 py-2 bg-cyan-600 hover:bg-cyan-700 text-white rounded-lg transition-colors",children:[t.jsx(us,{className:"w-4 h-4"}),t.jsx("span",{children:"Add Prompt"})]})]})]})})}),t.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[t.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-4 mb-6",children:t.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsxs("div",{className:"relative",children:[t.jsx(Gt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),t.jsx("input",{type:"text",placeholder:"Search prompts...",value:f,onChange:q=>b(q.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent"})]}),t.jsx("select",{value:w,onChange:q=>x(q.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent",children:n.map(q=>t.jsx("option",{value:q.value,children:q.label},q.value))})]}),t.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",L.length," of ",e.length," prompts"]})]})}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:L.map(q=>t.jsxs(fe.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white rounded-lg shadow-sm border overflow-hidden hover:shadow-md transition-shadow",children:[t.jsx("div",{className:`p-4 bg-gradient-to-r from-${q.gradient_from||B(q.category).from} to-${q.gradient_to||B(q.category).to}`,children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:t.jsx("span",{className:"text-2xl",children:q.emoji})}),t.jsxs("div",{className:"text-white",children:[t.jsx("h3",{className:"font-semibold",children:q.title}),t.jsx("p",{className:"text-sm opacity-90",children:q.key})]})]}),t.jsxs("div",{className:"flex items-center space-x-1",children:[q.is_system&&t.jsx("div",{className:"p-1 bg-white/20 rounded",children:t.jsx(St,{className:"w-3 h-3 text-white"})}),t.jsx("div",{className:`p-1 rounded ${q.is_active?"bg-green-500/20":"bg-red-500/20"}`,children:q.is_active?t.jsx(bt,{className:"w-3 h-3 text-white"}):t.jsx(Wt,{className:"w-3 h-3 text-white"})})]})]})}),t.jsxs("div",{className:"p-4",children:[t.jsx("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2",children:q.description||"No description provided"}),t.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 mb-4",children:[t.jsx("span",{className:`px-2 py-1 rounded-full bg-${F(q.category)}-100 text-${F(q.category)}-800`,children:q.category}),t.jsxs("span",{children:[q.usage_count," uses"]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("button",{onClick:()=>j(q),className:"p-2 text-gray-400 hover:text-blue-600 transition-colors",title:"Edit",children:t.jsx(Ot,{className:"w-4 h-4"})}),t.jsx("button",{onClick:()=>E(q),className:`p-2 transition-colors ${q.is_active?"text-gray-400 hover:text-orange-600":"text-gray-400 hover:text-green-600"}`,title:q.is_active?"Deactivate":"Activate",children:q.is_active?t.jsx(Wt,{className:"w-4 h-4"}):t.jsx(bt,{className:"w-4 h-4"})}),!q.is_system&&t.jsx("button",{onClick:()=>_(q),className:"p-2 text-gray-400 hover:text-red-600 transition-colors",title:"Delete",children:t.jsx(ht,{className:"w-4 h-4"})})]}),t.jsxs("div",{className:"text-xs text-gray-500",children:["~",q.estimated_time,"s"]})]})]})]},q.id))}),L.length===0&&t.jsx("div",{className:"text-center py-12",children:t.jsxs("div",{className:"text-gray-400 mb-4",children:[t.jsx(Gt,{className:"w-12 h-12 mx-auto mb-4"}),t.jsx("p",{children:"No prompts found matching your criteria"})]})})]}),(m||a)&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsx(fe.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h2",{className:"text-xl font-semibold",children:m?"Create New Prompt":"Edit Prompt"}),t.jsx("button",{onClick:()=>{d(!1),o(!1),g(null),P()},className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:t.jsx(We,{className:"w-5 h-5"})})]}),t.jsxs("form",{onSubmit:m?k:A,className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Key* ",t.jsx("span",{className:"text-xs text-gray-500",children:"(unique identifier)"})]}),t.jsx("input",{type:"text",value:u.key,onChange:q=>C("key",q.target.value),placeholder:"e.g., summary, action_items",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent",required:!0,disabled:a})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title*"}),t.jsx("input",{type:"text",value:u.title,onChange:q=>C("title",q.target.value),placeholder:"Display name for the prompt",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent",required:!0})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),t.jsx("textarea",{value:u.description,onChange:q=>C("description",q.target.value),placeholder:"Brief description of what this prompt does",rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Prompt Template*",t.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(must include ","{transcript}"," placeholder)"]})]}),t.jsx("textarea",{value:u.prompt_template,onChange:q=>C("prompt_template",q.target.value),placeholder:"Enter your prompt template here. Use {transcript} where the transcript should be inserted.",rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent font-mono text-sm",required:!0}),u.prompt_template&&!u.prompt_template.includes("{transcript}")&&t.jsxs("p",{className:"text-red-500 text-xs mt-1",children:["âš ï¸ Prompt template must contain ","{transcript}"," placeholder"]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Icon"}),t.jsxs("select",{value:u.icon,onChange:q=>C("icon",q.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent",children:[t.jsx("option",{value:"Brain",children:"Brain"}),t.jsx("option",{value:"MessageSquare",children:"MessageSquare"}),t.jsx("option",{value:"FileText",children:"FileText"}),t.jsx("option",{value:"BarChart3",children:"BarChart3"}),t.jsx("option",{value:"Users",children:"Users"}),t.jsx("option",{value:"Calendar",children:"Calendar"}),t.jsx("option",{value:"HelpCircle",children:"HelpCircle"}),t.jsx("option",{value:"TrendingUp",children:"TrendingUp"}),t.jsx("option",{value:"Zap",children:"Zap"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Emoji"}),t.jsx("input",{type:"text",value:u.emoji,onChange:q=>C("emoji",q.target.value),placeholder:"ðŸ¤–",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent text-center"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),t.jsx("select",{value:u.category,onChange:q=>C("category",q.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent",children:n.filter(q=>q.value!=="all").map(q=>t.jsx("option",{value:q.value,children:q.label},q.value))})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gradient From"}),t.jsxs("select",{value:u.gradient_from,onChange:q=>C("gradient_from",q.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent",children:[t.jsx("option",{value:"cyan-500",children:"Cyan 500"}),t.jsx("option",{value:"blue-500",children:"Blue 500"}),t.jsx("option",{value:"purple-500",children:"Purple 500"}),t.jsx("option",{value:"green-500",children:"Green 500"}),t.jsx("option",{value:"yellow-500",children:"Yellow 500"}),t.jsx("option",{value:"red-500",children:"Red 500"}),t.jsx("option",{value:"orange-500",children:"Orange 500"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gradient To"}),t.jsxs("select",{value:u.gradient_to,onChange:q=>C("gradient_to",q.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent",children:[t.jsx("option",{value:"cyan-600",children:"Cyan 600"}),t.jsx("option",{value:"blue-600",children:"Blue 600"}),t.jsx("option",{value:"purple-600",children:"Purple 600"}),t.jsx("option",{value:"green-600",children:"Green 600"}),t.jsx("option",{value:"yellow-600",children:"Yellow 600"}),t.jsx("option",{value:"red-600",children:"Red 600"}),t.jsx("option",{value:"orange-600",children:"Orange 600"})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Tokens"}),t.jsx("input",{type:"number",value:u.max_tokens,onChange:q=>C("max_tokens",parseInt(q.target.value)),min:"100",max:"8000",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estimated Time (seconds)"}),t.jsx("input",{type:"number",value:u.estimated_time,onChange:q=>C("estimated_time",parseFloat(q.target.value)),min:"1",max:"300",step:"0.5",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent"})]})]}),t.jsxs("div",{className:"border rounded-lg p-4 bg-gray-50",children:[t.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Preview"}),t.jsx("div",{className:`p-3 rounded-lg bg-gradient-to-r from-${u.gradient_from} to-${u.gradient_to} text-white`,children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("span",{className:"text-lg",children:u.emoji}),t.jsxs("div",{children:[t.jsx("h5",{className:"font-medium",children:u.title||"Prompt Title"}),t.jsx("p",{className:"text-sm opacity-90",children:u.key||"prompt_key"})]})]})})]}),t.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4 border-t",children:[t.jsx("button",{type:"button",onClick:()=>{d(!1),o(!1),g(null),P()},className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",disabled:h,children:"Cancel"}),t.jsxs("button",{type:"submit",disabled:h||!u.key||!u.title||!u.prompt_template||!u.prompt_template.includes("{transcript}"),className:"flex items-center space-x-2 px-6 py-2 bg-cyan-600 hover:bg-cyan-700 disabled:bg-gray-400 text-white rounded-lg transition-colors",children:[h&&t.jsx(je,{className:"w-4 h-4 animate-spin"}),t.jsx("span",{children:m?"Create Prompt":"Update Prompt"})]})]})]})]})})})]})},nl=()=>{const[e,s]=K.useState(!0);return K.useEffect(()=>{const n=()=>{s(window.innerWidth>=1024)};return n(),window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]),t.jsx(zo,{children:t.jsx(li,{children:t.jsx(Ho,{children:t.jsxs(zn,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:[t.jsxs(xr,{children:[t.jsx(Pe,{path:"/login",element:t.jsx(Yo,{})}),t.jsx(Pe,{path:"/auth/callback",element:t.jsx(Zo,{})}),t.jsx(Pe,{path:"/auth/silent-callback",element:t.jsx("div",{children:"Processing authentication..."})}),t.jsx(Pe,{path:"/*",element:t.jsx(Dr,{children:t.jsxs("div",{className:"h-screen bg-gray-50 flex overflow-hidden",children:[e&&t.jsx("div",{className:"hidden lg:flex lg:flex-shrink-0",children:t.jsx("div",{className:"flex flex-col w-20 xl:w-24",children:t.jsx(Vo,{})})}),t.jsxs("div",{className:"flex flex-col w-0 flex-1 overflow-hidden",children:[t.jsx(Go,{}),t.jsx("main",{className:"flex-1 relative overflow-y-auto focus:outline-none",children:t.jsxs(xr,{children:[t.jsx(Pe,{path:"/",element:t.jsx(Da,{})}),t.jsx(Pe,{path:"/results",element:t.jsx(Xa,{})}),t.jsx(Pe,{path:"/analysis",element:t.jsx(tl,{})}),t.jsx(Pe,{path:"/admin",element:t.jsx(Dr,{requireAdmin:!0,children:t.jsx(rl,{})})}),t.jsx(Pe,{path:"/settings",element:t.jsx(Qa,{})})]})})]})]})})})]}),t.jsx(ai,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"},success:{duration:3e3,iconTheme:{primary:"#10B981",secondary:"#fff"}},error:{duration:5e3,iconTheme:{primary:"#EF4444",secondary:"#fff"}}}})]})})})})};Jt.createRoot(document.getElementById("root")).render(t.jsx(ar.StrictMode,{children:t.jsx(nl,{})}));export{Ua as _};
//# sourceMappingURL=index-8a24ad04.js.map
